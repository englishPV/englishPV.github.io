<!DOCTYPE html>
<html lang="fr">
<head>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no" />
  <title>Flashcards 9:16</title>
  <style>
    :root{
      --bg:#0b1020;
      --surface:#12172b;
      --card:#161c33;
      --text:#e6ecff;
      --muted:#8aa0d3;
      --primary:#6366f1;
      --primary-600:#5457e6;
      --green:#22c55e;
      --blue:#3b82f6;
      --amber:#f59e0b;
      --red:#ef4444;
      --ring:#e5e7eb;
      --border:#232a48;

      --fs-term:20px;
      --fs-def:24px;
      --fs-front-list:16px;
      --fs-back-list:18px;
      --radius-md:14px;

      /* Tokens Boutons Dark (par d√©faut) */
      --btn-neutral-bg: rgba(255,255,255,.06);
      --btn-neutral-fg: #e6ecff;
      --btn-neutral-bd: #232a48;
      --btn-neutral-bg-h: rgba(255,255,255,.10);

      --btn-soft-primary-bg: color-mix(in srgb, var(--primary) 22%, transparent);
      --btn-soft-primary-bg-h: color-mix(in srgb, var(--primary) 34%, transparent);
      --btn-soft-primary-fg: #dbe4ff;
      --btn-soft-primary-bd: color-mix(in srgb, var(--primary) 55%, transparent);

      --btn-soft-red-bg: rgba(239,68,68,.18);
      --btn-soft-red-bg-h: rgba(239,68,68,.28);
      --btn-soft-red-fg: #fecaca;
      --btn-soft-red-bd: rgba(239,68,68,.45);

      --btn-soft-amber-bg: rgba(245,158,11,.18);
      --btn-soft-amber-bg-h: rgba(245,158,11,.28);
      --btn-soft-amber-fg: #fde68a;
      --btn-soft-amber-bd: rgba(245,158,11,.45);

      --btn-soft-blue-bg: rgba(59,130,246,.18);
      --btn-soft-blue-bg-h: rgba(59,130,246,.28);
      --btn-soft-blue-fg: #bfdbfe;
      --btn-soft-blue-bd: rgba(59,130,246,.45);

      --btn-soft-green-bg: rgba(34,197,94,.18);
      --btn-soft-green-bg-h: rgba(34,197,94,.28);
      --btn-soft-green-fg: #bbf7d0;
      --btn-soft-green-bd: rgba(34,197,94,.45);

      --btn-solid-primary-bg: var(--primary);
      --btn-solid-primary-bg-h: var(--primary-600);
      --btn-solid-primary-fg: #fff;
      --btn-solid-primary-bd: var(--primary-600);

      --btn-solid-red-bg:#ef4444;  --btn-solid-red-bg-h:#dc2626;  --btn-solid-red-fg:#fff;  --btn-solid-red-bd:#dc2626;
      --btn-solid-amber-bg:#f59e0b;--btn-solid-amber-bg-h:#d97706;--btn-solid-amber-fg:#0f172a;--btn-solid-amber-bd:#d97706;
      --btn-solid-blue-bg:#3b82f6; --btn-solid-blue-bg-h:#2563eb; --btn-solid-blue-fg:#fff;  --btn-solid-blue-bd:#2563eb;
      --btn-solid-green-bg:#22c55e;--btn-solid-green-bg-h:#16a34a;--btn-solid-green-fg:#0f172a;--btn-solid-green-bd:#16a34a;
    }

    :root[data-theme="light"]{
      --bg:linear-gradient(180deg,#f8fafc 0%,#eef2f7 100%);
      --surface:#ffffff;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --primary:#3b82f6;
      --primary-600:#2563eb;
      --border:#cbd5e1;

      /* Tokens Boutons Light */
      --btn-neutral-bg:#f1f5f9;
      --btn-neutral-fg:#0f172a;
      --btn-neutral-bd:#cbd5e1;
      --btn-neutral-bg-h:#e2e8f0;

      --btn-soft-primary-bg: color-mix(in srgb, var(--primary) 14%, white 86%);
      --btn-soft-primary-bg-h: color-mix(in srgb, var(--primary) 22%, white 78%);
      --btn-soft-primary-fg: color-mix(in srgb, var(--primary) 78%, black 22%);
      --btn-soft-primary-bd: color-mix(in srgb, var(--primary) 35%, white 65%);

      --btn-soft-red-bg:#fee2e2;   --btn-soft-red-bg-h:#fecaca;   --btn-soft-red-fg:#991b1b;   --btn-soft-red-bd:#fca5a5;
      --btn-soft-amber-bg:#fef3c7; --btn-soft-amber-bg-h:#fde68a; --btn-soft-amber-fg:#92400e; --btn-soft-amber-bd:#fcd34d;
      --btn-soft-blue-bg:#dbeafe;  --btn-soft-blue-bg-h:#bfdbfe;  --btn-soft-blue-fg:#1e3a8a;  --btn-soft-blue-bd:#93c5fd;
      --btn-soft-green-bg:#dcfce7; --btn-soft-green-bg-h:#bbf7d0; --btn-soft-green-fg:#14532d; --btn-soft-green-bd:#86efac;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:ui-sans-serif,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji";
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow:hidden;
      font-size:17px;
    }

    .wrapper{
      height:100dvh; width:100%;
      display:flex; align-items:center; justify-content:center;
      padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    .phone{
      aspect-ratio:9/16;
      height:100%; width:auto; max-width:100%; max-height:100%;
      display:grid;
      grid-template-rows: var(--row-top,52px) var(--row-main,1fr) var(--row-actions,52px) var(--row-rev,64px);
      position:relative; min-height:0; touch-action:pan-y; overflow:hidden; background:transparent; border:0; border-radius:0; box-shadow:none;
    }

    .topbar{
      position:sticky; top:0; z-index:10;
      display:flex; align-items:center; padding:0 10px;
      background:transparent; border-bottom:0;
    }

    .topbar .back{
      appearance:none; border:0; outline:0; background:transparent; color:var(--text);
      padding:8px 10px; margin-right:4px; border-radius:10px;
      display:flex; align-items:center; gap:8px; cursor:pointer; font-weight:700;
    }
    .topbar .back:hover{background:rgba(255,255,255,.06)}
    .topbar .title{font-weight:800; font-size:16px; letter-spacing:.2px; margin-left:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; cursor:pointer;}
    .topbar .spacer{flex:1}

    main#view{
      min-height:0; height:100%;
      display:flex; flex-direction:column; overflow:hidden;
      padding:8px; gap:10px; justify-content:flex-start;
    }

    /* Utilities */
    .hidden{display:none!important}
    .muted{color:var(--muted)}
    .center{text-align:center}
    .mt6{margin-top:6px}
    .mt8{margin-top:8px}
    .scroll-y{overflow:auto; -webkit-overflow-scrolling:touch; overscroll-behavior:contain; touch-action:pan-y;}
    .list{display:flex; flex-direction:column; gap:8px}
    .stack{display:flex; flex-direction:column; gap:6px}
    .flexcol{display:flex; flex-direction:column; min-height:0}
    .row{display:grid; grid-template-columns:1fr 1fr; gap:6px}
    .grid2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .row-4{display:grid; grid-template-columns:repeat(4,1fr); gap:8px; width:100%}
    .face-label{font-size:11px; color:var(--muted); text-transform:uppercase; letter-spacing:.3px}
    .input{
      width:100%; padding:8px 10px; border-radius:10px; border:1px solid var(--border);
      background:var(--surface); color:var(--text); font-size:14px;
    }

    /* Cards/containers base (flat) */
    .card,.deck-item,.review-card,.viewer,.card-item,.legend-item,.kpi .k,.stat,.chip{
      background:transparent; border:0; box-shadow:none;
      border-radius:var(--radius-md);
    }

    .section-title{font-weight:900; font-size:14px; color:var(--primary); letter-spacing:.3px; margin:0 0 6px}

    .kpi{display:grid; grid-template-columns:1fr 1fr; gap:8px}
    .kpi .k{padding:0}
    .k .label{color:var(--muted); font-size:12px}
    .k .value{font-weight:900; font-size:17px; margin-top:2px}

    /* Deck list */
    .deck-wrap{display:flex; align-items:center; gap:8px}
    .decks{display:grid; grid-template-columns:1fr; gap:8px; flex:1}
    .deck-item{display:flex; align-items:center; justify-content:space-between; padding:0 8px; cursor:pointer; user-select:none; touch-action:pan-y;}
    .deck-item:hover{outline:none}
    .deck-meta{color:var(--muted); font-size:13px}

    /* Chips */
    .chip{display:inline-flex; align-items:center; gap:8px; padding:0; border-radius:0; color:var(--muted); cursor:pointer; user-select:none; font-size:12px}
    .chip.toggle{opacity:.75}
    .chip.toggle.active{opacity:1; border-color:#6b7cff; box-shadow:inset 0 0 0 1px rgba(107,124,255,.35)}
    .chip-pie{width:18px; height:18px; border-radius:50%;
      background:conic-gradient(var(--primary) var(--progress,0%), var(--border) var(--progress,0%)); display:inline-block; vertical-align:middle}
    .legend{display:grid; grid-template-columns:1fr 1fr; gap:6px; margin-top:6px}
    .legend-item{display:flex; align-items:center; gap:6px; padding:0; font-size:13px; color:#dbe4ff; cursor:pointer; user-select:none; transition:opacity .15s ease, filter .15s ease}
    .legend-item.inactive{opacity:.45; filter:grayscale(20%)}
    .legend-item .count{font-weight:900}
    .legend-item[data-key="unseen"] .count{color:#9ca3af}
    .legend-item[data-key="echec"] .count{color:var(--red)}
    .legend-item[data-key="difficile"] .count{color:var(--amber)}
    .legend-item[data-key="bien"] .count{color:var(--blue)}
    .legend-item[data-key="facile"] .count{color:var(--green)}

    /* Dots */
    .dot{width:10px; height:10px; border-radius:50%}
    .dot.gray{background:#9ca3af}
    .dot.red{background:var(--red)}
    .dot.amber{background:var(--amber)}
    .dot.blue{background:var(--blue)}
    .dot.green{background:var(--green)}

    /* Chart */
    .chart-wrap{display:flex; align-items:center; justify-content:center; height:200px}
    canvas#gradeChart{width:180px; height:180px}

    /* Bottom bars */
    .bottom-actions{display:none; padding:8px 10px; gap:8px; grid-template-columns:1fr 1fr; background:transparent; border-top:0; box-shadow:none}
    .revision-bar{padding:8px 10px calc(8px + env(safe-area-inset-bottom)); background:transparent; border-top:0; box-shadow:none; display:none}
    .review-actions-bar{display:none; grid-row:4; padding:8px 10px calc(8px + env(safe-area-inset-bottom)); backdrop-filter:blur(8px) saturate(140%);}

    /* Review view */
    .review-wrap{position:relative; flex:1; min-height:0; display:flex; flex-direction:column; padding-bottom:0}
    .review-top{display:flex; align-items:center; justify-content:space-between; color:var(--muted); font-size:13px}
    .review-card{flex:1; display:flex; align-items:center; justify-content:center; padding:8px; text-align:center; min-height:0; cursor:auto;}
    .review-card .review-scroller {
      max-height:100%; width:100%;
      overflow:auto; -webkit-overflow-scrolling:touch;
    }

    .size-toast{
      position:absolute; left:50%; transform:translateX(-50%);
      bottom:calc(64px + env(safe-area-inset-bottom) + 8px);
      background:rgba(0,0,0,.55); color:#fff; font-weight:800; font-size:12px; padding:6px 10px; border-radius:999px;
      pointer-events:none; z-index:3; display:none;
    }
    :root[data-theme="light"] .size-toast{background:rgba(0,0,0,.15); color:#0f172a}
    .chapter-list {
  font-size: 12px;
  white-space: nowrap;      /* Assure que le texte reste sur une seule ligne */
  overflow: hidden;         /* Masque le texte qui d√©passe */
  text-overflow: ellipsis;  /* Ajoute "..." √† la fin du texte qui d√©passe */
  opacity: 0.8;
  padding-left: 2px; /* Petit ajustement pour l'alignement */
}
    /* Cards view */
    .cards-wrap{display:flex; flex-direction:column; gap:8px; height:100%}
    .cards-top{display:flex; align-items:center; justify-content:space-between; color:var(--muted); font-size:12px}
    .viewer{flex:1; display:flex; align-items:center; justify-content:center; padding:12px; text-align:center}
    .viewer .front{font-weight:900; font-size:20px}
    .viewer .back{color:#d9e6ff; opacity:.95; font-size:15px; margin-top:6px}
    .viewer-actions{display:grid; grid-template-columns:1fr 1fr 1fr; gap:6px}
    .small{font-size:13px; color:var(--muted)}

    /* Recap */
    .recap{display:flex; flex-direction:column; gap:8px}
    .recap h2{margin:0; font-size:18px}
    .recap .subtitle{color:var(--muted); margin-top:-2px; font-size:12px}
    .stat{padding:0}
    .label{color:var(--muted); font-size:11px}
    .val{font-weight:900; font-size:16px; margin-top:2px}
    .cta{margin-top:4px}

    /* Typo sizes */
    .term{font-size:var(--fs-term)!important; font-weight:600}
    .definition{font-size:var(--fs-def)!important; font-weight:900}
    .card-item .front{font-size:var(--fs-front-list); font-weight:600}
    .card-item .back{font-size:var(--fs-back-list); font-weight:800; color:var(--text); opacity:.95}

    /* Wheel control */
    .wheel{
      display:flex; align-items:center; gap:12px; padding:10px 12px;
      border:1px solid var(--border); border-radius:var(--radius-md);
      background:rgba(255,255,255,.04); touch-action:none; user-select:none; cursor:ns-resize;
    }
    .wheel .name{font-weight:800; font-size:13px}
    .wheel .hint{color:var(--muted); font-size:12px}
    .wheel .wheel-value{margin-left:auto; font-weight:900; font-size:13px}

    /* Settings */
    .settings-page{display:flex; flex-direction:column; gap:14px; padding:6px 4px}
    .settings-hero{font-weight:900; font-size:18px; letter-spacing:.2px; color:var(--primary)}
    .settings-sub{color:var(--muted); font-size:12px; margin-top:-2px}
    .settings-section{display:flex; flex-direction:column; gap:8px}
    .settings-section .section-title{font-size:12px; font-weight:900; color:var(--primary); letter-spacing:.4px; text-transform:uppercase; margin:10px 0 2px!important}
    .swatches{display:flex; gap:8px; flex-wrap:wrap}
    .swatch{width:26px; height:26px; border-radius:8px; border:1px solid var(--border); background:var(--sw,#6366f1); cursor:pointer; position:relative}
    .swatch.is-active::after{content:''; position:absolute; inset:-3px; border:2px solid var(--primary); border-radius:10px}

    /* 7-day activity */
    .bar7-wrap{margin-top:8px}
    canvas#bar7{width:100%; height:68px; display:block}
    .bar7-labels{display:grid; grid-template-columns:repeat(7,1fr); gap:6px; margin-top:4px; font-size:12px; color:var(--muted); text-align:center}
    .bar7-labels > div { cursor: pointer; }

    /* Cards grid */
    .cards-grid{display:grid; grid-template-columns:1fr; gap:10px}
    @media(min-width:480px){.cards-grid{grid-template-columns:1fr 1fr}}
    @media(min-width:900px){.cards-grid{grid-template-columns:1fr 1fr 1fr}}
    .card-block{position:relative; border:2px solid transparent; border-radius:14px; padding:14px; background:transparent; overflow-x: auto;}
    .card-block .term{text-align:center}
    .card-block .definition{display:none; text-align:center; margin-top:6px}
    .card-block.flipped .definition{display:block}
    .cb-time{position:absolute; right:10px; bottom:8px; font-size:12px; color:var(--muted)}
    .card-block.grade-echec{border-color:var(--red)}
    .card-block.grade-difficile{border-color:var(--amber)}
    .card-block.grade-bien{border-color:var(--blue)}
    .card-block.grade-facile{border-color:var(--green)}
    .card-block.grade-unseen{border-color:#9ca3af}

    /* Styles consolid√©s pour les images */
    .review-card img,
    .card-block img {
      display: block;
      max-width: 100%;
      height: auto;
      margin: 10px auto;
      border-radius: 8px;
      background: var(--border);
      -webkit-user-drag: none;
      user-select: none;
    }
    .review-card img {
      cursor: zoom-in;
      touch-action: none; /* Les gestes sont g√©r√©s par JS pour la Lightbox */
    }
    .card-block img {
       touch-action: pan-y; /* Permet le scroll vertical dans la liste de cartes */
    }

    /* Wrapper pour le zoom d'image en r√©vision */
    .zoom-wrap {
      display: inline-block;
      max-width: none;
    }

    /* Light theme boosts */
    :root[data-theme="light"] .definition,
    :root[data-theme="light"] .card-item .back{color:var(--text)!important; opacity:1!important}
    :root[data-theme="light"] .muted{color:#475569!important}
    :root[data-theme="light"] .legend-item{color:#0f172a!important; border-color:#e2e8f0!important; background:transparent!important}
    :root[data-theme="light"] .chip{color:#334155!important; border-color:#cbd5e1!important; background:#f8fafc!important}
    :root[data-theme="light"] .revision-bar,
    :root[data-theme="light"] .review-actions-bar {
      background:rgba(241,245,249,.9) !important;
      border-top:1px solid #e2e8f0!important;
    }
    :root[data-theme="light"] .topbar{
      background:transparent!important;
      border-bottom:1px solid #e2e8f0!important;
    }

    /* === SYST√àME DE BOUTONS AVEC VARIANTES (SOFT/SOLID) === */
    .btn,
    .bottom-actions .action,
    .navbtn,
    .review-actions-bar .btn,
    .rev-btn{
      background: var(--btn-bg, var(--btn-neutral-bg));
      color: var(--btn-fg, var(--btn-neutral-fg));
      border: 1px solid var(--btn-bd, var(--btn-neutral-bd));
      border-radius: var(--radius-md);
      padding: 10px 12px;
      font-weight: 900;
      cursor: pointer;
      transition: background .15s ease, border-color .15s ease, color .15s ease, box-shadow .15s ease;
      width: 100%;
      appearance: none;
      outline: 0;
      font-size: 15px;
    }
    .btn:hover,
    .bottom-actions .action:hover,
    .navbtn:hover,
    .review-actions-bar .btn:hover,
    .rev-btn:hover{
      background: var(--btn-bg-h, var(--btn-bg, var(--btn-neutral-bg-h)));
    }
    .btn:disabled, .rev-btn:disabled, .navbtn:disabled, .action:disabled {opacity:.6; cursor:not-allowed}
    .btn:focus-visible{outline:2px solid var(--btn-bd, var(--btn-neutral-bd)); outline-offset:2px}

    /* Variantes SOFT (pastel) */
    .btn--primary{ --btn-bg:var(--btn-soft-primary-bg); --btn-bg-h:var(--btn-soft-primary-bg-h); --btn-fg:var(--btn-soft-primary-fg); --btn-bd:var(--btn-soft-primary-bd); }
    .btn--red    { --btn-bg:var(--btn-soft-red-bg);     --btn-bg-h:var(--btn-soft-red-bg-h);     --btn-fg:var(--btn-soft-red-fg);     --btn-bd:var(--btn-soft-red-bd); }
    .btn--amber  { --btn-bg:var(--btn-soft-amber-bg);   --btn-bg-h:var(--btn-soft-amber-bg-h);   --btn-fg:var(--btn-soft-amber-fg);   --btn-bd:var(--btn-soft-amber-bd); }
    .btn--blue   { --btn-bg:var(--btn-soft-blue-bg);    --btn-bg-h:var(--btn-soft-blue-bg-h);    --btn-fg:var(--btn-soft-blue-fg);    --btn-bd:var(--btn-soft-blue-bd); }
    .btn--green  { --btn-bg:var(--btn-soft-green-bg);   --btn-bg-h:var(--btn-soft-green-bg-h);   --btn-fg:var(--btn-soft-green-fg);   --btn-bd:var(--btn-soft-green-bd); }

    /* Ton SOLID (plein) ‚Äì combine avec la couleur */
    .btn--solid.btn--primary{ --btn-bg:var(--btn-solid-primary-bg); --btn-bg-h:var(--btn-solid-primary-bg-h); --btn-fg:var(--btn-solid-primary-fg); --btn-bd:var(--btn-solid-primary-bd); }
    .btn--solid.btn--red    { --btn-bg:var(--btn-solid-red-bg);     --btn-bg-h:var(--btn-solid-red-bg-h);     --btn-fg:var(--btn-solid-red-fg);     --btn-bd:var(--btn-solid-red-bd); }
    .btn--solid.btn--amber  { --btn-bg:var(--btn-solid-amber-bg);   --btn-bg-h:var(--btn-solid-amber-bg-h);   --btn-fg:var(--btn-solid-amber-fg);   --btn-bd:var(--btn-solid-amber-bd); }
    .btn--solid.btn--blue   { --btn-bg:var(--btn-solid-blue-bg);    --btn-bg-h:var(--btn-solid-blue-bg-h);    --btn-fg:var(--btn-solid-blue-fg);    --btn-bd:var(--btn-solid-blue-bd); }
    .btn--solid.btn--green  { --btn-bg:var(--btn-solid-green-bg);   --btn-bg-h:var(--btn-solid-green-bg-h);   --btn-fg:var(--btn-solid-green-fg);   --btn-bd:var(--btn-solid-green-bd); }

    /* Desktop wide */
    @media (pointer:fine) and (min-width:1024px){
      .phone{aspect-ratio:auto; width:100%; height:100dvh}
      .topbar, main#view, .bottom-actions, .revision-bar{max-width:1200px; margin:0 auto; width:100%}
      main#view{padding:16px 20px}
    }

    /* Subject menu (s√©lecteur de mati√®re) */
    .subject-menu{
      position: absolute;
      top: 52px;
      left: 10px;
      background: var(--surface);
      color: var(--text);
      border:1px solid var(--border);
      border-radius: var(--radius-md);
      min-width: 220px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      padding: 6px;
      z-index: 1000;
      display:none;
    }
    .subject-item{
      display:flex; align-items:center; gap:8px;
      padding:8px 10px; border-radius:10px; cursor:pointer;
    }
    .subject-item:hover{ background: rgba(255,255,255,.06) }
    .subject-item .name{ font-weight:800; flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .subject-item .meta{ font-size:12px; color:var(--muted) }
    .subject-item .subject-actions{ margin-left:auto; display:flex; gap:6px; }
    .subject-item .subject-actions .btn { padding: 4px 6px; }
    .subject-item.drop-target { background: color-mix(in srgb, var(--primary) 12%, transparent); }
    :root[data-theme="light"] .subject-item:hover{ background: rgba(0,0,0,.06) }
    :root[data-theme="light"] .subject-item.drop-target { background: color-mix(in srgb, var(--primary) 12%, transparent); }

    /* === LIGHTBOX IMAGE VIEWER === */
    .img-lightbox{
      position:fixed; inset:0;
      display:none; /* on affiche via .open */
      background:transparent; /* pas de flou, pas d'assombrissement */
      z-index:10000;
    }
    .img-lightbox.open{ display:block; }

    /* Surface de geste: 100% de l‚Äô√©cran, drag/pinch/zoom partout */
    .img-stage{
      position:absolute; inset:0;
      width:100%; height:100%;
      overflow:hidden;
      touch-action:none;      /* on g√®re le pan/zoom nous-m√™mes */
      cursor:grab;
    }

    /* Canvas transform√© (pan/zoom via translate+scale) */
    .img-canvas{
      position:absolute; top:0; left:0;
      transform:translate(0px,0px) scale(1);
      transform-origin:0 0;
      will-change:transform;
    }
    .img-canvas img{
      display:block;
      width:100%; height:auto;
      user-select:none; -webkit-user-drag:none;
      pointer-events:none; /* toute la surface sert aux gestes */
    }
    .img-counter{
      position:absolute; left:50%; transform:translateX(-50%);
      bottom:16px; z-index:2;
      background:rgba(255,255,255,.9); color:#0f172a;
      padding:6px 10px; border-radius:999px; font-weight:900; font-size:12px;
    }
    
    /* Light/clair */
    :root[data-theme="light"] .img-close,
    :root[data-theme="light"] .img-nav{ color:#0f172a; background:rgba(255,255,255,.9); border-color:#e2e8f0; }
    :root[data-theme="light"] .img-counter{ background:rgba(255,255,255,.9); color:#0f172a; }

    /* NOUVEAUX STYLES */
    /* Boutons decks minimalistes */
    .btn--ghost { --btn-bg:transparent; --btn-bg-h:rgba(255,255,255,.06); --btn-fg:var(--muted); --btn-bd:var(--border); }
    :root[data-theme="light"] .btn--ghost{ --btn-bg-h:rgba(0,0,0,.06); }
    .btn--tiny { padding:6px 8px; font-size:13px; border-radius:8px; }

    /* En-t√™te deck */
    .deck-head{ display:flex; align-items:center; justify-content:space-between; gap:8px }
    .deck-head .actions{ display:flex; gap:6px }
    .deck-item {
  -webkit-user-select: none; /* Safari, Chrome */
  -moz-user-select: none;    /* Firefox */
  -ms-user-select: none;     /* IE/Edge */
  user-select: none;         /* Standard */
  -webkit-touch-callout: none; /* D√©sactive le menu contextuel sur iOS Safari */
}
    /* Indicateur groupe */
    .deck-item .folder-badge{ font-size:12px; color:var(--muted) }

    /* Swipe gauche pour supprimer */
    .deck-item{ position:relative; overflow:hidden; }
    .deck-item .slide{ display:flex; align-items:center; gap:8px; padding:8px 0; transition: transform .18s ease; will-change: transform; }
    .deck-item .right-action{ position:absolute; top:0; right:0; height:100%; width:92px; display:flex; align-items:center; justify-content:center; }
    .deck-item.reveal-delete .slide{ transform: translateX(-92px); }
    .scroll-lock {
  overflow: hidden; /* Fallback pour certains navigateurs */
  touch-action: none !important; /* La r√®gle la plus importante ! */
}
    /* Drag & drop */
    .drag-ghost{
      position: fixed; left:0; top:0; pointer-events:none; z-index: 9999;
      transform: translate(-9999px,-9999px) scale(1.02);
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      border-radius: var(--radius-md);
      background: rgba(0,0,0,.08);
    }
    :root[data-theme="light"] .drag-ghost{ background: rgba(0,0,0,.06) }

    .deck-item.drop-target{ outline: 2px dashed var(--primary); outline-offset: -2px; border-radius: var(--radius-md); background: color-mix(in srgb, var(--primary) 8%, transparent); }
    .deck-item.dragging-origin{ opacity:.3 }

    body.dragging-active, .dragging-active * {
      cursor: grabbing !important;
    }

  </style>
</head>
<body>
  <div class="wrapper">
    <div class="phone" id="app">
      <header class="topbar">
        <button class="back" id="backBtn" title="Retour"><span aria-hidden="true">‚Üê</span><span>Retour</span></button>
        <div class="title" id="title">Deck</div>
        <div class="spacer"></div>
      </header>

      <main id="view"></main>

      <div class="bottom-actions" id="bottomActions">
        <button class="action btn" id="cardsBtn">Cartes</button>
        <button class="action btn" id="settingsBtn">Param√®tres</button>
      </div>

      <footer class="revision-bar" id="revisionBar">
        <button id="startReviewBtn" class="rev-btn btn btn--solid btn--primary">R√©vision ‚Ä¢ 10 cartes</button>
      </footer>

      <footer id="reviewActionsBar" class="review-actions-bar" aria-live="polite"></footer>
    </div>
  </div>

  <script>
    // ---------- Donn√©es & stockage ----------
    const STORAGE_KEY = 'flash9x16_data_v3';
    // *** PATCH APPLIQU√â *** : J'ai mis √† jour la version suite √† l'ajout des nouveaux chapitres.
    const APP_VERSION = '2025-10-18-5'; // Version incr√©ment√©e de 4 √† 5.
    
    // Cat√©gories Anglais
    const CD="Democracy",CG="Genetics",CI="Immigration",CIT="International Relations",CU="Labor",CR="Crime",PC="Capital Punishment",CF="Status of Women";
    const HI="HEALTH ISSUES", IF="INDIVIDUAL FREEDOM",IDR="ILLEGAL DRUGS"; // <--- VOS DEUX NOUVEAUX CHAPITRES
    
    // Chapitres Physique (constantes pratiques pour le raw)
    const PM = "M2";
    const PM3 = "M3";
    const PM4 = "M4";
    const PEM1 = "EM1";

    // <--- NOUVELLE SECTION √âLECTROMAGN√âTISME --- >
    const PEM2 = "EM2";
    const PE345 = "E3-E4-E5"; 
    const PEM6 = "EM6"; 
    const PEM7 = "EM7", PEM8 = "EM8(Pas de E7)", PEM9 = "EM9", PEM10 = "EM10", PEM11 = "EM11";
    const PEM12 = "EM12", PEM13 = "EM13", PEM14 = "EM14", PEM15 = "EM15";
    // <--- NOUVELLE SECTION OPTIQUE --- >
    const PO1 = "O1", PO2 = "O2", PO3 = "O3", PO4 = "O4";

    // Emojis chapitres
    const CHAPTER_EMOJIS = {
      [CD]:'üèõÔ∏è',[CG]:'üß¨',[CI]:'üß≥',[CIT]:'üåê',[CU]:'üíº',[CR]:'‚öñÔ∏è',[PC]:'üíÄ',[CF]:'‚ôÄÔ∏è',
      [HI]:'‚öïÔ∏è', [IF]:'üóΩ', // <--- AJOUT DES EMOJIS CORRESPONDANTS
      [IDR]:'üíä',
      'Politique':'üèõÔ∏è','Business':'üíº','Education':'üéì','Thanksgiving':'ü¶É',
      'M2':'‚öôÔ∏è',
      'M3':'üåç',
      'M4':'ü§ù',
      'EM1':'‚ö°Ô∏è',

      // === √âlectromagn√©tisme (EM) ===
      'EM2':'üß≤',
      'E3-E4-E5':'üß≤',
      'EM6':'üß≤',
      'EM8(Pas de E7)':'üß≤', 'EM9':'üß≤', 'EM10':'üß≤', 'EM11':'üß≤',
      'EM12':'üß≤', 'EM13':'üß≤', 'EM14':'üß≤', 'EM15':'üß≤',

      // === Optique (O) ===
      'O1':'üåà', 'O2':'üåà', 'O3':'üåà', 'O4':'üåà',
    };
    

    // Liste brute Anglais (id|fr|en|chap)
    const cardsRawText = `
0|monarchie|monarchy|${CD}
1|monarque de droit divin|a monarch by divine right|${CD}
2|souverain|sovereign|${CD}
3|aristocratie|aristocracy|${CD}
4|oligarchie|oligarchy|${CD}
5|dictateur|a dictator|${CD}
6|dictature|dictatorship|${CD}
7|autoritaire|authoritarian|${CD}
8|autoritarisme|authoritarianism|${CD}
9|totalitaire|totalitarian|${CD}
10|totalitarisme|totalitarianism|${CD}
11|homme fort|a strongman|${CD}
12|tyran|a tyrant, an autocrat|${CD}
13|despote|a despot|${CD}
14|despote √©clair√©|an enlightened despot|${CD}
15|junte militaire|a military junta|${CD}
16|coup d'√âtat|a coup, a coup d'√©tat|${CD}
17|gouvernement autoritaire|a regime|${CD}
18|r√©gime de Vichy / de Pinochet|the Vichy / Pinochet regime|${CD}
19|r√©gime r√©pressif|a repressive regime|${CD}
20|r√©gime politique|a political system|${CD}
21|se d√©mocratiser|to become more democratic|${CD}
22|prendre le pouvoir|to take, seize power|${CD}
23|arriver au pouvoir|to come to power|${CD}
24|arriver au pouvoir (d√©mocratiquement)|to come into office|${CD}
25|√™tre au pouvoir|to be in power|${CD}
26|rester au pouvoir|to remain, stay in power|${CD}
27|s'accrocher au pouvoir|to cling to power|${CD}
28|bonne gouvernance|good governance|${CD}
29|mal administrer, mal g√©rer|to misrule, mismanage|${CD}
30|mauvaise administration|misrule|${CD}
31|mauvaise gestion|mismanagement|${CD}
32|tenir un dirigeant pour responsable|to hold a leader to account|${CD}
33|√™tre responsable devant les √©lecteurs|to be accountable to the electorate|${CD}
34|responsabilit√©|accountability|${CD}
35|corruption|corruption, sleaze, bribery|${CD}
36|corrompu|corrupt|${CD}
37|pot-de-vin|a bribe|${CD}
38|acheter, soudoyer qn|to bribe sb|${CD}
39|√©tat de droit, r√®gne de la loi|the rule of law|${CD}
40|multipartisme|multi-party system|${CD}
41|syst√®me de parti unique|single-party system|${CD}
42|√©lections libres et r√©guli√®res|free and fair elections|${CD}
43|fraude √©lectorale|vote rigging, ballot rigging, electoral fraud|${CD}
44|l'√©lection √©tait truqu√©e|the election was rigged|${CD}
45|opposant politique|a political opponent|${CD}
46|dissident|a dissident|${CD}
47|b√¢illonner / museler la presse / l'opposition|to gag / muzzle the press / the opposition|${CD}
48|d√©clarer l'√©tat d'urgence|to declare a state of emergency|${CD}
49|bafouer la constitution|to trample the constitution|${CD}
50|censurer|to censor|${CD}
51|censure|censorship|${CD}
52|bloquer / restreindre l'acc√®s √† internet|to block / restrict internet access|${CD}
53|contourner la censure|to circumvent, bypass censorship|${CD}
54|droits de l'homme|human rights|${CD}
55|atteintes aux droits de l'homme|human rights abuses, violations|${CD}
56|crime contre l'humanit√©|a crime against humanity|${CD}
57|devoir d'ing√©rence|the duty to interfere, to intervene|${CD}
58|association de d√©fense des droits de l'homme|human Rights lobby|${CD}
59|pass√© de la Chine en mati√®re de droits de l'homme|China's human rights record|${CD}
60|m√©contentement, malaise|discontent|${CD}
61|provoquer des troubles|to spark unrest|${CD}
62|agitation|turmoil|${CD}
63|bouleversement|an upheaval|${CD}
64|fomenter des troubles|to stir up trouble|${CD}
65|insurg√©|an insurgent|${CD}
66|insurrection|an insurgency|${CD}
67|manifestation|a demonstration, a protest march|${CD}
68|manifestant|a demonstrator, a protester|${CD}
69|organiser / participer √† un rassemblement|to hold / attend a rally|${CD}
70|√©meute|a riot|${CD}
71|√©meutier, casseur|a rioter|${CD}
72|des √©meutes ont √©clat√©|riots broke out|${CD}
73|CRS|anti-riot police|${CD}
74|cocktail Molotov|a petrol bomb, a Molotov cocktail|${CD}
75|gaz lacrymog√®ne|tear gas|${CD}
76|heurt, affrontement|a clash|${CD}
77|√©chauffour√©e|a skirmish|${CD}
78|complot|a plot|${CD}
79|comploteur|a plotter|${CD}
80|se r√©volter|to revolt|${CD}
81|se rebeller|to rebel|${CD}
82|rebelle|a rebel|${CD}
83|r√©bellion, r√©volte|a rebellion|${CD}
84|d√©jouer les autorit√©s|to defy the authorities|${CD}
85|soul√®vement|an uprising|${CD}
86|se soulever contre|to rise up against|${CD}
87|renverser un dictateur|to overthrow, to topple a dictator|${CD}
88|√©vincer un dictateur|to oust a dictator|${CD}
89|renversement d'un dictateur|the overthrow of a dictator|${CD}
90|d√©poser un dirigeant|to depose a ruler|${CD}
91|s'effondrer|to collapse|${CD}
92|restaurer la d√©mocratie|to restore democracy|${CD}
93|chute d'un gouvernement|the downfall of a government|${CD}
94|r√©pression brutale|ruthless repression|${CD}
95|r√©primer une r√©bellion|to put down, to suppress a rebellion|${CD}
96|r√©primer, √©touffer la contestation|to quell the protests|${CD}
97|mesures de r√©pression|crackdown, clampdown|${CD}
98|mettre les gens en prison|to send people to prison|${CD}
99|passer qn √† tabac|to beat sb up|${CD}
100|g√®ne|a gene|${CG}
101|cellule|a cell|${CG}
102|cellules-souches|stem cells|${CG}
103|recherche sur les cellules souches|stem-cell research|${CG}
104|g√©nome humain|the human genome|${CG}
105|cartographie du g√©nome|genome mapping|${CG}
106|carte g√©n√©tique|gene map, genetic map|${CG}
107|s√©quence g√©n√©tique|gene sequence|${CG}
108|s√©quen√ßage|sequencing|${CG}
109|√©pissage du g√®ne|gene splicing|${CG}
110|patrimoine h√©r√©ditaire|gene pool|${CG}
111|g√©n√©ticien|a geneticist|${CG}
112|eug√©nisme|eugenics|${CG}
113|eug√©niste, partisan de l'eug√©nisme|a eugenicist|${CG}
114|ADN|DNA|${CG}
115|test g√©n√©tique|a DNA test|${CG}
116|empreinte g√©n√©tique|a DNA print, genetic print|${CG}
117|analyse ADN|DNA analysis|${CG}
118|pr√©l√®vement d'ADN|a DNA sample|${CG}
119|profil g√©n√©tique|genetic make-up, genetic profile|${CG}
120|analyse de l'empreinte g√©n√©tique|genetic profiling, DNA fingerprinting|${CG}
121|d√©pistage g√©n√©tique|genetic screening|${CG}
122|subir un pr√©l√®vement d'ADN|to be DNA-swabbed|${CG}
123|manipulations g√©n√©tiques, g√©nie g√©n√©tique|genetic engineering|${CG}
124|transg√©nique|transgenic|${CG}
125|organisme g√©n√©tiquement modifi√©|a genetically modified organism|${CG}
126|OGM|GMOs|${CG}
127|aliments contenant des OGM|GM food|${CG}
128|pommes de terres g√©n√©tiquement modifi√©es|GM potatoes|${CG}
129|produits transg√©niques|biotech products|${CG}
130|semence, graines|seed|${CG}
131|soja|soyabeans|${CG}
132|colza|rapeseed|${CG}
133|ma√Øs|maize (GB), corn (US)|${CG}
134|bl√©|wheat|${CG}
135|culture, r√©colte|a crop|${CG}
136|essais sur le terrain|field trials, crop trials|${CG}
137|culture OGM|a GM crop|${CG}
138|rendement|yield|${CG}
139|fili√®re agroalimentaire|agribusiness|${CG}
140|augmenter, am√©liorer les rendements|to improve yields|${CG}
141|r√©sistant aux maladies|resistant to disease|${CG}
142|insecticide / pesticide / herbicide|insecticide / pesticide / herbicide|${CG}
143|polliniser|to pollinate|${CG}
144|pollinisation crois√©e|cross-pollination|${CG}
145|contaminer|to contaminate|${CG}
146|contamination|contamination|${CG}
147|maladie g√©n√©tique|a genetic disease|${CG}
148|g√®ne d√©fectueux|a faulty gene|${CG}
149|g√®ne manquant|a missing gene|${CG}
150|h√©r√©ditaire|hereditary|${CG}
151|chromosome X / Y|an X / Y chromosome|${CG}
152|clonage|cloning|${CG}
153|conseil g√©n√©tique|genetic counselling|${CG}
154|entreprise pharmaceutique|a pharmaceutical company|${CG}
155|th√©rapie g√©nique|gene therapy|${CG}
156|traitement g√©nique|genetic treatment|${CG}
157|√† des fins th√©rapeutiques|for therapeutic purposes|${CG}
158|agriculture au service de la m√©decine|pharming|${CG}
159|jouer √† l'apprenti-sorcier|to play God|${CG}
160|toucher √† la nature|to tamper with nature|${CG}
161|principe de pr√©caution|the precautionary principle, the safety-first principle|${CG}
162|√©tiquette|a label|${CG}
163|√©tiquetter|to label|${CG}
164|√©tiquetage|labelling|${CG}
165|avertir|to warn|${CG}
166|avertissement|a warning|${CG}
167|dont l'origine peut √™tre √©tablie|traceable|${CG}
168|tra√ßabilit√©|traceability|${CG}
169|effets √† long terme|long-term effects|${CG}
170|cha√Æne alimentaire|the food chain|${CG}
171|s√©curit√© alimentaire|food security|${CG}
172|lobby OGM|the pro-GM lobby|${CG}
173|militants contre les OGM|anti-GM activists|${CG}
174|campagne contre les OGM|an anti-GM campaign|${CG}
175|√©tranger|a foreigner|${CI}
176|inconnu|a stranger|${CI}
177|nationalit√©|nationality|${CI}
178|ressortissant √©tranger|a foreign national|${CI}
179|personnes de nationalit√© fran√ßaise|French citizens|${CI}
180|√©migrer en Nouvelle-Z√©lande|to emigrate to New Zealand|${CI}
181|immigrer en France|to immigrate to France|${CI}
182|vague d'immigration|a wave of immigration|${CI}
183|immigration √† grande √©chelle / de masse|large-scale / mass immigration|${CI}
184|exode|an exodus|${CI}
185|nouvel arrivant|a newcomer|${CI}
186|pays natal, pays d'origine|native country, home country|${CI}
187|patrie|homeland|${CI}
188|pays d'accueil|a host country|${CI}
189|pays d'adoption|an adoptive country, a country of adoption|${CI}
190|accueillir|to welcome|${CI}
191|accueillant|welcoming|${CI}
192|politique migratoire|immigration policy|${CI}
193|immigration choisie|selective immigration, controlled immigration|${CI}
194|flux migratoires|migration flows|${CI}
195|passager clandestin|a stowaway|${CI}
196|immigration clandestine, irr√©guli√®re|illegal immigration|${CI}
197|immigration sauvage|uncontrolled immigration|${CI}
198|immigrant clandestin, sans-papiers|an illegal immigrant, an illegal alien, an undocumented alien|${CI}
199|il est en situation irr√©guli√®re|his papers are not in order|${CI}
200|fronti√®re|a border, a frontier|${CI}
201|fermer ses fronti√®res|to close one's borders|${CI}
202|contr√¥les aux fronti√®res|border controls|${CI}
203|contr√¥les d'identit√©|identity checks|${CI}
204|centre de r√©tention (administrative)|a holding centre, a detention facility|${CI}
205|passeport|a passport|${CI}
206|carte d'identit√©|an identity card|${CI}
207|visa|a visa|${CI}
208|r√©fugi√©|a refugee|${CI}
209|personne d√©plac√©e|a displaced person|${CI}
210|apatride|a stateless person|${CI}
211|se r√©fugier|to take refuge, take shelter|${CI}
212|demander l'asile politique|to seek political asylum|${CI}
213|demandeur d'asile|an asylum-seeker|${CI}
214|fuir la pers√©cution / la mis√®re|to flee persecution / destitution|${CI}
215|√©chapper √† la pauvret√©|to escape poverty|${CI}
216|chercher de meilleures conditions de vie|to be in search of better living conditions|${CI}
217|trafic des √™tres humains|human trafficking|${CI}
218|contrebandier, passeur|a smuggler|${CI}
219|passeurs d'immigrants clandestins|people-smugglers|${CI}
220|r√©seau de passeurs|a smuggling ring|${CI}
221|faux passeport|a fake passport|${CI}
222|reconduire qn √† la fronti√®re|to escort sb back to the border|${CI}
223|renvoyer un immigrant dans son pays d'origine|to send an immigrant back to his native country|${CI}
224|expulser qn|to deport sb|${CI}
225|√™tre refoul√© √† la fronti√®re|to be turned away at the border|${CI}
226|√™tre expuls√©|to be ordered out of the country|${CI}
227|s'exiler|to go into exile|${CI}
228|exil√©|an exile|${CI}
229|exiler, bannir qn|to exile, banish sb|${CI}
230|s'expatrier|to expatriate oneself|${CI}
231|expatri√©|an expatriate, an expat|${CI}
232|passer √† l'Ouest / √† l'ennemi|to defect to the West / to the enemy|${CI}
233|fuite des cerveaux / afflux des cerveaux|brain drain / brain gain|${CI}
234|partir de rien|to start from scratch|${CI}
235|travail au noir|moonlighting|${CI}
236|atelier clandestin|a sweatshop|${CI}
237|exploiter les travailleurs immigr√©s|to exploit migrant workers|${CI}
238|permis de travail, carte de travail|a work permit|${CI}
239|permis de s√©jour, carte de s√©jour|a residence permit, a resident permit|${CI}
240|travailleur migrant|a migrant worker|${CI}
241|travailleur invit√© (disposant d'un visa temporaire)|a guest worker|${CI}
242|s'int√©grer|to become integrated|${CI}
243|bien s'int√©grer dans une soci√©t√©|to integrate well into a society|${CI}
244|insertion sociale|social integration|${CI}
245|r√©gulariser la situation des clandestins|to regularise the status of illegal immigrants|${CI}
246|r√©gularisation|regularisation|${CI}
247|se faire naturaliser britannique, √™tre naturalis√© britannique, obtenir la nationalit√© britannique|to be granted British citizenship, to become a British citizen|${CI}
248|quota|a quota|${CI}
249|regroupement familial|family reunion, reunification|${CI}
250|qn qui abuse du syst√®me des prestations sociales|a benefit cheat|${CI}
251|fraude aux prestations sociales|benefit fraud|${CI}
252|parasite|a freeloader|${CI}
253|mariage blanc|a sham marriage, a marriage of convenience|${CI}
254|inonder|to flood|${CI}
255|√™tre envahi par les √©trangers|to be swamped with foreigners|${CI}
256|arriv√©e massive, afflux de travailleurs|the influx of workers|${CI}
257|endiguer l'afflux d'immigr√©s|to stem the flow of immigrants|${CI}
258|limiter / freiner l'immigration|to restrict / curb immigration|${CI}
259|parti d'extr√™me-droite|a far-right party|${CI}
260|faire fuir les immigrants|to scare immigrants away|${CI}
261|emp√™cher les ind√©sirables d'entrer|to keep out undesirables|${CI}
262|x√©nophobie|xenophobia|${CI}
263|x√©nophobe|xenophobic|${CI}
264|avoir un grand-p√®re n√© √† l'√©tranger|to have a foreign-born grandfather|${CI}
265|jeunes gens d'origine asiatique / portugaise|young men of Asian / Portuguese descent|${CI}
266|Fran√ßais de naissance|a native of France|${CI}
267|New Yorkais de souche|a born and bred New Yorker|${CI}
268|il est fran√ßais de souche|he's of French origin, of French extraction|${CI}
269|Maghreb|North Africa|${CI}
270|Maghr√©bins|North Africans|${CI}
271|pakistanais / du Bangladesh|Pakistani / Bangladeshi|${CI}
272|hispanophone / parlant le Hindi|Spanish-speaking / Hindi-speaking|${CI}
273|diaspora|diaspora|${CI}
274|affaires √©trang√®res|foreign affairs|${CIT}
275|relations ext√©rieures|foreign relations|${CIT}
276|communaut√© internationale|the international community|${CIT}
277|probl√®me mondial, plan√©taire|a global issue|${CIT}
278|√âtat souverain|a sovereign state|${CIT}
279|souverainet√©|sovereignty|${CIT}
280|√âtat-nation|a nation-state|${CIT}
281|fronti√®re|a border, a frontier|${CIT}
282|droit international|international law|${CIT}
283|g√©opolitique|geopolitics|${CIT}
284|sc√®ne internationale|the international stage, the international scene, the world stage|${CIT}
285|jouer un r√¥le dans qch|to play a role, a part in sth|${CIT}
286|occidental / oriental|western / eastern|${CIT}
287|politique √©trang√®re, ext√©rieure|foreign policy|${CIT}
288|ambassadeur|an ambassador|${CIT}
289|ambassade|an embassy|${CIT}
290|attach√© culturel / commercial / militaire|a cultural / commercial / military attach√©|${CIT}
291|envoy√©, √©missaire|an envoy, an emissary|${CIT}
292|diplomate|a diplomat|${CIT}
293|diplomatie|diplomacy|${CIT}
294|rompre / reprendre les relations|to break off / resume diplomatic relations|${CIT}
295|relations tendues|tense, strained relations|${CIT}
296|r√©chauffement|a thaw|${CIT}
297|refroidissement|a chill, a cooling off|${CIT}
298|rappeler un ambassadeur|to recall an ambassador|${CIT}
299|normaliser les relations|to normalize relations|${CIT}
300|grande puissance|a great power|${CIT}
301|superpuissance / hyperpuissance|a superpower / a hyperpower|${CIT}
302|h√©g√©monie|hegemony|${CIT}
303|imp√©rialisme|imperialism|${CIT}
304|imp√©rialiste|imperialistic|${CIT}
305|expansionisme|expansionism|${CIT}
306|unilat√©ralisme / multilat√©ralisme|unilateralism / multilateralism|${CIT}
307|bilat√©ral / multilat√©ral|bilateral / multilateral|${CIT}
308|bipolaire / multipolaire|bipolar / multipolar|${CIT}
309|bloc|a bloc|${CIT}
310|√©quilibre des forces|balance of power|${CIT}
311|syst√®me onusien|the UN system|${CIT}
312|√âtat-membre, pays membre|a member state|${CIT}
313|membre fondateur|a founding member, founder member|${CIT}
314|cotisation|a contribution|${CIT}
315|discuter / voter une r√©solution|to debate / to pass a resolution|${CIT}
316|appliquer une r√©solution|to implement, enforce a resolution|${CIT}
317|autoriser l'usage de la force|to authorize the use of force|${CIT}
318|embargo|an embargo|${CIT}
319|majorit√© des deux-tiers|a two-thirds majority|${CIT}
320|maintenir la paix|to maintain peace|${CIT}
321|op√©ration de maintien de la paix|a peace-keeping operation|${CIT}
322|soldat de la paix|a peacekeeper|${CIT}
323|casque bleu|a blue helmet|${CIT}
324|devoir d'ing√©rence|the duty to interfere, to intervene|${CIT}
325|intervention militaire|military intervention|${CIT}
326|OTAN|NATO, the North Atlantic Treaty Organization|${CIT}
327|n√©gocier|to negotiate|${CIT}
328|n√©gociations, pourparlers, discussions|negotiations, talks|${CIT}
329|table des n√©gociations|negotiating table|${CIT}
330|table ronde|a round table|${CIT}
331|faire une d√©claration|to make, issue, deliver a statement|${CIT}
332|communiqu√©|a communiqu√©|${CIT}
333|sous l'√©gide de|under the aegis of|${CIT}
334|r√©union au sommet, sommet|a summit (meeting)|${CIT}
335|porte-parole|a spokesman, spokeswoman, spokesperson|${CIT}
336|homologue|a counterpart, an opposite number|${CIT}
337|impasse|a stalemate, a deadlock, a standoff, an impasse|${CIT}
338|aboutir √† une impasse|to reach a stalemate|${CIT}
339|sortir d'une impasse|to break a stalemate|${CIT}
340|ultimatum|an ultimatum|${CIT}
341|m√©diateur|a mediator|${CIT}
342|n√©gocier un accord|to broker an agreement|${CIT}
343|surmonter un obstacle|to overcome an obstacle|${CIT}
344|volont√© politique|political will|${CIT}
345|compromis|a compromise|${CIT}
346|transiger|to compromise|${CIT}
347|faire une concession|to make a concession|${CIT}
348|s'engager √† faire qch|to commit oneself to doing sth|${CIT}
349|promettre de faire, s'engager √† faire qch|to pledge to do sth|${CIT}
350|signer / ratifier un trait√©|to sign / ratify a treaty|${CIT}
351|protocole|a protocol|${CIT}
352|accord|an agreement, an accord|${CIT}
353|conclure un accord|to reach a settlement|${CIT}
354|stipuler|to stipulate|${CIT}
355|parvenir √† un consensus|to reach a consensus|${CIT}
356|interdire|to prohibit, to ban|${CIT}
357|mettre son v√©to √† une d√©cision|to veto a decision|${CIT}
358|Union Europ√©enne, l'UE|the European Union, the EU|${CIT}
359|directive europ√©enne|an EU directive|${CIT}
360|adh√©rer √† l'UE|to join the EU|${CIT}
361|demander son adh√©sion √† l'UE|to apply to join the EU, to apply for EU membership|${CIT}
362|pourparlers d'adh√©sion|membership negotiations|${CIT}
363|organisation non-gouvernementale, ONG|a non-governmental organization, an NGO|${CIT}
364|droits de l'homme|human rights|${CIT}
365|violations des droits de l'homme|human rights abuses, violations|${CIT}
366|faire respecter un principe|to uphold a principle|${CIT}
367|pass√© de la Chine en mati√®re de droits de l'homme|China's human Rights record|${CIT}
368|d√©colonisation|decolonization|${CIT}
369|obtenir l'ind√©pendance, devenir ind√©pendant|to achieve, gain, attain independence|${CIT}
370|ancienne colonie|a former colony|${CIT}
371|puissance coloniale|a colonial power|${CIT}
372|du travail|work|${CU}
373|un travail, un emploi|a job|${CU}
374|une profession, une activit√© professionnelle|an occupation|${CU}
375|les professions lib√©rales|the professions|${CU}
376|une carri√®re|a career|${CU}
377|le monde du travail|the world of work|${CU}
378|√™tre au travail|to be at work|${CU}
379|le lieu de travail|the workplace|${CU}
380|travailler chez soi|to work from home|${CU}
381|travailler √† temps partiel OU √† mi-temps|to work part time|${CU}
382|travailler √† plein temps|to work full time|${CU}
383|la classe ouvri√®re|the working class|${CU}
384|la population active|the working population|${CU}
385|la vie active|the working life|${CU}
386|conditions de travail|working conditions|${CU}
387|atelier|a workshop|${CU}
388|usine|a factory, a plant|${CU}
389|atelier clandestin (o√π la main d'≈ìuvre est exploit√©e)|a sweatshop|${CU}
390|travailler beaucoup|to work hard|${CU}
391|√™tre travailleur|to be hard-working|${CU}
392|travailleur acharn√©, bourreau de travail|a hard worker, a workaholic|${CU}
393|permis de travail|a work permit|${CU}
394|√™tre / ne pas √™tre de service OU de garde|to be on duty / off duty|${CU}
395|ch√¥mage|unemployment, joblessness|${CU}
396|√™tre au ch√¥mage|to be unemployed, jobless, out of work|${CU}
397|taux de ch√¥mage|unemployment rate, jobless rate|${CU}
398|ch√¥meurs|the unemployed, the jobless|${CU}
399|ch√¥mage de longue dur√©e|long-term unemployment|${CU}
400|ch√¥mage des jeunes|youth unemployment|${CU}
401|allocation ch√¥mage|unemployment benefit|${CU}
402|toucher le ch√¥mage|to be on the dole (GB), to be on welfare (US)|${CU}
403|march√© du travail, de l'emploi|job market, labour market|${CU}
404|contrat √† dur√©e d√©termin√©e, CDD|a fixed-term contract|${CU}
405|contrat √† dur√©e ind√©termin√©e, CDI|an open-ended contract|${CU}
406|flexibilit√© de l'emploi|job flexibility|${CU}
407|avoir des horaires flexibles|work flexitime (GB) flextime (US)|${CU}
408|s√©curit√© / pr√©carit√© de l'emploi|job security / insecurity|${CU}
409|stage|an internship, a work placement|${CU}
410|stagiaire|an intern, a trainee|${CU}
411|travailleur pr√©caire|a casual worker|${CU}
412|petit boulot|an odd job, a casual job|${CU}
413|boulot d'√©t√©|a summer job|${CU}
414|int√©rimaire|a temporary worker|${CU}
415|faire de l'int√©rim|to temp, to work as a temp|${CU}
416|employer|to employ|${CU}
417|employeur|an employer|${CU}
418|employ√©|an employee|${CU}
419|changer de travail|to change jobs|${CU}
420|embaucher un travailleur|to hire, to take on a worker|${CU}
421|recruter|to recruit|${CU}
422|p√©riode d'essai|a trial period|${CU}
423|poste|a post, a position|${CU}
424|nommer qn √† un poste|to appoint sb to a post|${CU}
425|muter qn|to transfer sb|${CU}
426|poste √† responsabilit√©(s)|a responsible job|${CU}
427|emploi subalterne|a menial job|${CU}
428|demandeur d'emploi|a job-seeker|${CU}
429|agence P√¥le emploi|a Jobcenter (GB)|${CU}
430|CV, curriculum vitae|a curriculum vitae, a CV, a r√©sum√© (US)|${CU}
431|exp√©rience professionnelle|work experience|${CU}
432|comp√©tences|skills|${CU}
433|√™tre candidat √† un emploi, faire une demande d'emploi|to apply for a job|${CU}
434|candidat √† un poste|an applicant|${CU}
435|entretien d'embauche|a job interview|${CU}
436|offre d'emploi|a job offer, a job vacancy, a job opportunity|${CU}
437|travail OU main d'≈ìuvre|labour|${CU}
438|main d'≈ìuvre f√©minine / travail des enfants|female labour / child labour|${CU}
439|normes en mati√®re d'emploi|labour standards|${CU}
440|main d'≈ìuvre|manpower, workforce|${CU}
441|personnel|staff, personnel|${CU}
442|coll√®gue, camarade de travail|a colleague, a co-worker, a workmate|${CU}
443|ressources humaines|human resources|${CU}
444|travail qualifi√© / peu qualifi√© / non qualifi√©|a skilled / low-skilled / an unskilled job|${CU}
445|ouvrier sp√©cialis√©, OS|an unskilled worker|${CU}
446|ouvrier|a blue-collar worker|${CU}
447|employ√© de bureau|a white-collar worker|${CU}
448|fonctionnaire|a state employee, a civil servant|${CU}
449|salari√© du secteur public|a public-sector employee|${CU}
450|haut fonctionnaire|a high-ranking civil servant|${CU}
451|√™tre ind√©pendant, travailler √† son compte|to be self-employed|${CU}
452|travailleurs ind√©pendants|the self-employed|${CU}
453|honoraires|fees|${CU}
454|paie, paye|pay|${CU}
455|salaire|salary|${CU}
456|salaire (d'ouvrier)|wages|${CU}
457|gagner de l'argent|to earn money, to make money|${CU}
458|gagner sa vie|to earn a living, to earn one's living, to make a living|${CU}
459|Que fait-il dans la vie ?|What does he do for a living?|${CU}
460|travail mal pay√©|a badly-paid job, a low-paid job|${CU}
461|travail bien pay√©|a well-paid job, a highly-paid job|${CU}
462|salari√©|a wage-earner|${CU}
463|prime|a bonus|${CU}
464|avantage (en nature), avantage annexe|a perk, a fringe benefit|${CU}
465|voiture de fonction|a company car|${CU}
466|salaire au rendement|performance-related pay|${CU}
467|√™tre employ√© par une entreprise|to be on a company's payroll|${CU}
468|vacances|holiday, vacation (US)|${CU}
469|cong√©s pay√©s|paid holiday|${CU}
470|√™tre en vacances|to be on holiday|${CU}
471|jour f√©ri√©|a bank holiday|${CU}
472|√™tre en cong√© maladie|to be on sick leave|${CU}
473|prendre deux jours de cong√©|to take two days off|${CU}
474|r√©duction du temps de travail, RTT|reduction of working hours|${CU}
475|les 35 heures, la semaine de 35 heures|the 35-hour working week|${CU}
476|supprimer des emplois|to cut jobs|${CU}
477|faire des coupes sombres, claires dans la main d'≈ìuvre|to slash, to axe jobs|${CU}
478|pertes d'emploi, suppressions d'emploi|job losses|${CU}
479|rationaliser|to streamline|${CU}
480|d√©graisser ses effectifs|to downsize|${CU}
481|licencier des salari√©s|to lay off workers, to make workers redundant|${CU}
482|licenciement (√©conomique)|a redundancy|${CU}
483|d√©part volontaire|a voluntary redundancy|${CU}
484|plan social|a redundancy plan|${CU}
485|indemnit√© de licenciement, prime de d√©part|redundancy payment, severance pay, severance package|${CU}
486|parachute dor√©|a golden parachute, a golden handshake|${CU}
487|renvoyer, licencier, cong√©dier qn|to dismiss sb|${CU}
488|mettre √† la porte, renvoyer, virer|to fire, to sack, to give sb the sack|${CU}
489|√™tre renvoy√©|to get the sack|${CU}
490|conflit social|an industrial dispute|${CU}
491|se mettre / √™tre en gr√®ve|to go on strike / be on strike|${CU}
492|gr√©viste|a striker|${CU}
493|direction et les salari√©s|management and workers|${CU}
494|d√©l√©gu√© syndical|a shop steward|${CU}
495|syndicat|a (trade) union|${CU}
496|revendication|a claim|${CU}
497|revendications salariales|wage claims, wage demands|${CU}
498|augmentation de salaire|a payrise (GB), a payraise (US)|${CU}
499|reprendre le travail|to resume work|${CU}
500|prendre sa retraite|to retire|${CU}
501|d√©missionner|to resign, to step down|${CU}
502|retrait√©|a pensioner, an old age pensioner, a retiree (US)|${CU}
503|retraite|retirement|${CU}
504|partir en pr√©-retraite|to take early retirement|${CU}
505|√¢ge de la retraite|retirement age|${CU}
506|bien r√©ussir √† l'√©cole|to do well at school|Education
507|lire l'anglais couramment|to read English fluently|Education
508|√™tre bon en sport|to be good at sports|Education
509|faire l'√©cole buissonni√®re|to play truant|Education
510|absent√©isme|truancy|Education
511|suivre un cours d'anglais|to take a class in English|Education
512|donner du travail √† la maison|to set homework|Education
513|rendre un travail|to hand in a piece of work|Education
514|les subtilit√©s de la langue anglaise|the intricacies of the English language|Education
515|se lancer|to get started|Education
516|se conformer √† une r√®gle|to obey a rule|Education
517|ob√©ir √† (qqn)|to obey (sone)|Education
518|avoir des difficult√©s en maths|to have difficulty with maths|Education
519|donner un coup de main √† (qqn)|to give (sone) a hand|Education
520|obtenir un dipl√¥me|to graduate|Education
521|une salle de classe|a classroom|Education
522|une le√ßon|a class|Education
523|rattraper un cours loup√©|to catch up a missed lesson|Education
524|√©valuer|to assess, appraise|Education
525|le programme scolaire|the school curriculum|Education
526|√©tudiant de premier cycle|undergraduate|Education
527|indisciplin√©|unruly|Education
528|incontr√¥lable|unmanageable|Education
529|b√¢cler ses devoirs|to dash off one's work|Education
530|obtenir une bonne note|to get a good mark|Education
531|tricher sur son voisin|to eye over one's neighbour's work|Education
532|principal, directeur (√©cole)|headmaster|Education
533|√©l√®ve dou√©|gifted pupil|Education
534|r√©ussir un examen haut la main|to pass a test with flying colors|Education
535|une mati√®re (scolaire)|a (school) subject|Education
536|une pause de 20 minutes|a 20-minute break|Education
537|une heure de cours|a teaching-hour|Education
538|passer dans la classe sup√©rieure|to pass the next grade|Education
539|travail de paperasse|paperwork|Education
540|passer un examen|to take an exam|Education
541|examen blanc|mock exam|Education
542|se pr√©parer √† un examen|to prepare for an exam|Education
543|√©chouer √† un examen|to flunk a test|Education
544|recaler (qqn)|to flunk (sone)|Education
545|√™tre re√ßu √† un examen avec mention|to pass a degree with distinction|Education
546|abandonner l'√©cole|to drop out of school|Education
547|un √©l√®ve d√©crocheur|a dropout|Education
548|obtenir une bourse|to get a scholarship|Education
549|entrer en fac de m√©decine|to go to a medical school|Education
550|faire des √©tudes de m√©decine|to study medicine|Education
551|remettre un √©v√®nement √† plus tard|to put off an event|Education
552|sortie scolaire|school trip|Education
553|faire des recherches sur (qqch)|to do research on (sthg)|Education
554|cour d'√©cole|schoolyard|Education
555|un √©l√®ve de terminale|[UK] a sixth-former|Education
556|m√©ticuleux|painstaking|Education
557|s√©cher un cours|to skip a lesson|Education
558|se voir accorder la possibilit√© de [...]|to be provided with an opportunity to [...]|Education
559|tricher|to cheat|Education
560|un tricheur|a cheater|Education
561|√™tre renvoy√©|to be expelled|Education
562|rouler sur un examen|to sail through an exam|Education
563|sauce (tomate)|dressing|Thanksgiving
564|chuckle|laughter|Thanksgiving
565|to gather|to get together|Thanksgiving
566|a feast|a banquet|Thanksgiving
567|to reach accross|to make efforts to join|Thanksgiving
568|one another|each other|Thanksgiving
569|to winnow away|to filter out and remove|Thanksgiving
570|widely viewed as|largely regarded as|Thanksgiving
571|twice|two times|Thanksgiving
572|to provide|to give|Thanksgiving
573|the bulk of|the biggest part of|Thanksgiving
574|to depict|to describe|Thanksgiving
575|to feature|to represent, show|Thanksgiving
576|subservient|submissive, docile|Thanksgiving
577|pilgrims|migrants arriving in America from England in 17th|Thanksgiving
578|to outnumber|to surpass in number|Thanksgiving
579|to crouch|almost to sit on the floor|Thanksgiving
580|a harvest|a crop|Thanksgiving
581|likely|probably|Thanksgiving
582|a deed|an [bad] action|Thanksgiving
583|settlers|colons|Thanksgiving
584|in retaliation for|in revenge for|Thanksgiving
585|to broker|to organize, negotiate|Thanksgiving
586|to grab|to seize|Thanksgiving
587|gauzy|transparent|Thanksgiving
588|willfully|deliberately|Thanksgiving
589|How [s.one] would have it|What [s.one] would like to believe|Thanksgiving
590|druthers|inclination, penchant|Thanksgiving
591|blissfully|ecstatically|Thanksgiving
592|bleached out|washed out|Thanksgiving
593|to abid|to respect|Thanksgiving
594|alt√©rer|alter|Thanksgiving
595|apprentissage en continu|lifelong learning|Thanksgiving
596|malaise|general feeling of discomfort|Business
597|stagflation|period of slow economic growth and high unemployment|Business
598|aftermath|the consequences of a significant unpleasant event|Business
599|hyperinflation|extremely high and accelerating inflation|Business
600|third-world countries|countries with lower economic development|Business
601|martial law|military control over civilian functions of government|Business
602|gleaming|shining brightly, describe something polished or new|Business
603|suburban area|residential area on the outskirts of the a city|Business
604|stagnation|lack of activity, growth, and development|Business
605|dispirited|having lost emthusiasm and hope|Business
606|fatalistic|believing that events are inevitable|Business
607|hollowed out|destroyed or weakened from within|Business
608|brimming|filled to the point of overflowing (with positive emotions and energy)|Business
609|rabais, ristourne|discount|Business
610|cha√Æne de montage|assembly line|Business
611|payer comptant|to pay cash|Business
612|p√©nurie de main d'oeuvre|labor shortage|Business
613|productivit√©|productivity|Business
614|soumettre sa candidature|to apply|Business
615|racheter|to buy out|Business
616|licencier|to lay off|Business
617|se mettre en gr√®ve|to go on strike|Business
618|service client|customer service|Business
619|repr√©sentant syndical|union representative|Business
620|commerƒáant|shopkeeper|Business
621|virer, mettre √† la porte|to fire|Business
622|se mettre √† son compte|to set up one's business|Business
623|d√©missionner|to resign|Business
624|en sureffectif|overstaffed|Business
625|contrat √† dur√©e ind√©termin√©e|permanent contract|Business
626|√©quipe de nuit|night shift|Business
627|service, d√©partement|department|Business
628|refondre, r√©organiser|to revamp|Business
629|concurrent|competitor|Business
630|fusion|merger|Business
631|faire faillite|to go bankrupt, bust|Business
632|embaucher|to hire, take on|Business
633|fiche de paie|pay slip|Business
634|faire des heures suppl√©mentaires|work overtime|Business
635|mettre la cl√© sous la porte|to go out of business, close up shop|Business
636|fait main|handmade|Business
637|artisan|craftsman|Business
638|ouvrier qualifi√©|skilled worker|Business
639|entreprise|business|Business
640|plein emploi|full employment|Business
641|un maire|a mayor|Politique
642|homme politique|politician|Politique
643|s'assurer une majorit√©|to secure a majority|Politique
644|d√©clencher des √©lections anticip√©es|to call an early election|Politique
645|(UK) les √©l√©ctions l√©gislatives|(UK) the general election|Politique
646|(US) les √©l√©ctions pr√©sidentielles|(US) the general election|Politique
647|les grands partis|mainstream parties|Politique
648|premier ministre|Prime Minister|Politique
649|le ministre de l'√©conomie et des finances|(UK) the Chancellor of the Exchequer|Politique
650|remaniement minist√©riel|Cabinet reshuffle|Politique
651|ministre des Affaires √©trang√®res|Foreign minister|Politique
652|pronncer un discours|to deliver a speech|Politique
653|une dictature|a dictatorship|Politique
654|museler, ba√Ælloner|to gag, muzzle|Politique
655|soci√©t√© civile|civil society|Politique
656|(UK) syndicats|(UK) trade unions|Politique
657|(US) syndicats|(US) labor unions|Politique
658|√©lections de mi-mandat|mid-term elections|Politique
659|minisre "frondeur"|rebellious minister|Politique
660|d√©missionner|resign, step down|Politique
661|officier en tant que|to serve as|Politique
662|opposer son veto √† (qqch)|to veto (sthg)|Politique
663|un projet de loi|a bill|Politique
664|un groupe de r√©flexion|a think-tank|Politique
665|(UK) un ministre|(UK) a Cabinet member|Politique
666|un directeur de cabinet|a chief of staff|Politique
667|imp√¥ts locaux|local taxes|Politique
668|cote de popularit√©|approval ratings|Politique
669|se pr√©senter √† une √©l√©ction|to run for election [office]|Politique
670|pr√™ter serment|to take the oath, be sworn in|Politique
671|rendre homage √† (qqn)|to pay tribute to (sone)|Politique
672|dirigeant|political leader|Politique
673|√©lection truqu√©e|rigged election|Politique
674|les allocations|social benefits|Politique
675|revaloriser|to scale up, raise, increase|Politique
676|l'allocation familliale|the family allowance|Politique
677|le gel de la production|the production freeze|Politique
678|un bras de fer|a tug of war|Politique
679|chancelant|teetering, wavering|Politique
680|tailored|customized|Politique
681|rote memorisation|repetition-based learning|Politique
682|impoverished|cash-strapped|Politique
683|unencumbered|unburdened|Politique
684|inquisitiveness|interest, curiosity|Politique
685|substantially|notably, significatly|Politique
686|authoritarian|dictatorial, strict|Politique
687|minimally supervised|lightly monitored|Politique
688|crime, criminality|la criminalit√©|${CR}
689|the crime rate|le taux de criminalit√©|${CR}
690|organized crime|la criminalit√© organis√©e, le grand banditisme|${CR}
691|white-collar crime|la criminalit√© en col blanc|${CR}
692|juvenile delinquency|la d√©linquance juv√©nile|${CR}
693|a juvenile delinquent, a young offender|un d√©linquant juv√©nile|${CR}
694|petty crime|la petite d√©linquance|${CR}
695|a crime, a felony|un crime|${CR}
696|to commit a crime|commettre un crime|${CR}
697|a criminal, a felon|un criminel|${CR}
698|a criminal record|un casier judiciaire|${CR}
699|an offense|un d√©lit, une infraction|${CR}
700|a misdemeanour|une infraction (GB), un d√©lit (US)|${CR}
701|an offender|un d√©linquant, un contrevenant|${CR}
702|a repeat offender, a recidivist|un r√©cidiviste|${CR}
703|murder|le meurtre|${CR}
704|a murderer|un meurtrier|${CR}
705|manslaughter|homicide|${CR}
706|a serial killer|un tueur en s√©rie|${CR}
707|theft|le vol|${CR}
708|a thief, a robber|un voleur|${CR}
709|to steal a watch|voler une montre|${CR}
710|to rob sb of sth|voler qch √† qn|${CR}
711|rape|le viol|${CR}
712|armed robbery|vol √† main arm√©e|${CR}
713|a burglary|un cambriolage|${CR}
714|to mug sb, to attack sb|agresser qn|${CR}
715|money-laundering|le blanchiment d‚Äôargent|${CR}
716|to break a law|enfreindre une loi|${CR}
717|lawful / unlawful|l√©gal / ill√©gal|${CR}
718|a lawbreaker|un d√©linquant, une personne qui enfreint la loi|${CR}
719|wrongdoing|des m√©faits|${CR}
720|a wrongdoer|un malfaiteur|${CR}
721|to flout the law|se moquer de la loi|${CR}
722|a no-go area|une zone de non-droit|${CR}
723|to obey the law|ob√©ir √† la loi|${CR}
724|to abide by the law|respecter la loi|${CR}
725|a law-abiding citizen|un citoyen respectueux des lois|${CR}
726|the justice system|la justice|${CR}
727|a court, a court of law|un tribunal|${CR}
728|a judge|un juge|${CR}
729|a lawyer, a barrister (GB), an attorney (US)|un avocat|${CR}
730|the jury|le jury|${CR}
731|to prosecute sb|poursuivre qn (en justice)|${CR}
732|to bring a lawsuit against sb, sue sb|intenter un proc√®s √† qn, engager des poursuites contre qn|${CR}
733|the prosecutor|le procureur|${CR}
734|a suspect|un suspect|${CR}
735|to charge sb with murder|accuser, inculper qn de meurtre|${CR}
736|a charge|une accusation, un chef d‚Äôinculpation|${CR}
737|to confess to a crime|avouer un crime|${CR}
738|to confess to embezzling money|avouer avoir d√©tourn√© de l‚Äôargent|${CR}
739|confession|un aveu|${CR}
740|a defendant|un accus√©, un pr√©venu|${CR}
741|a witness / an eye witness|un t√©moin / un t√©moin oculaire|${CR}
742|a case|une affaire|${CR}
743|a trial|un proc√®s|${CR}
744|to be tried, stand trial|passer en jugement, √™tre jug√©|${CR}
745|to await trial|√™tre en attente de jugement|${CR}
746|the principle that a defendant is innocent until proven guilty|la pr√©somption d‚Äôinnocence|${CR}
747|forensic evidence|preuves relev√©es lors d‚Äôune expertise|${CR}
748|a culprit|un coupable|${CR}
749|to acquit sb|acquitter qn|${CR}
750|acquittal|acquittement|${CR}
751|to find sb guilty|condamner qn, reconna√Ætre qn coupable|${CR}
752|to convict sb of rape, murder|reconna√Ætre qn coupable de viol, meurtre|${CR}
753|a conviction|une condamnation|${CR}
754|a fine|une amende|${CR}
755|to fine sb for sth|condamner qn √† une amende pour qch|${CR}
756|to be sentenced to five years‚Äô imprisonment, five years in jail|√™tre condamn√© √† cinq ans de prison|${CR}
757|a death sentence|une condamnation √† mort|${CR}
758|a life sentence|une condamnation √† perp√©tuit√©|${CR}
759|a suspended sentence|une condamnation avec sursis|${CR}
760|to be sent to prison|√™tre mis en prison|${CR}
761|to incarcerate, to imprison sb|incarc√©rer qn|${CR}
762|the incarceration rate|le taux d‚Äôincarc√©ration|${CR}
763|a cell|une cellule|${CR}
764|a prisoner, an inmate, a detainee|un d√©tenu, un prisonnier|${CR}
765|a prison officer, a prison warder (GB)|un gardien de prison|${CR}
766|a high-security prison|une prison de haute s√©curit√©|${CR}
767|solitary confinement|l‚Äôisolement carc√©ral|${CR}
768|prison overcrowding|la surpopulation carc√©rale|${CR}
769|a miscarriage of justice|une erreur judiciaire|${CR}
770|to fabricate evidence|fabriquer des preuves|${CR}
771|to be proved innocent, to be exonerated|√™tre innocent√©|${CR}
772|to free, to release a prisoner|lib√©rer, rel√¢cher un prisonnier|${CR}
773|to pardon a convict|gr√¢cier un condamn√©|${CR}
774|to parole sb|mettre qn en libert√© conditionnelle|${CR}
775|to be on parole|√™tre en libert√© conditionnelle|${CR}
776|to report to the police|se pr√©senter √† la police|${CR}
777|an electronic tag|un bracelet de surveillance √©lectronique|${CR}
778|contre la peine de mort|against the death penalty|${PC}
779|le meurtre|murder|${PC}
780|√™tre coupable de meurtre|to be guilty of murder|${PC}
781|un meurtrier|a murderer|${PC}
782|le viol|rape|${PC}
783|un violeur|a rapist|${PC}
784|un d√©linquant sexuel|a sex offender|${PC}
785|un r√©cidiviste|a repeat offender, a recidivist|${PC}
786|la culpabilit√©|guilt|${PC}
787|appliquer la loi du talion|to demand an eye for an eye|${PC}
788|d√©clarer qn coupable, condamner qn|to convict sb, to find sb guilty|${PC}
789|une condamnation|a conviction|${PC}
790|une condamnation √† tort|a wrongful conviction|${PC}
791|condamner qn √† mort|to sentence sb to death|${PC}
792|condamner qn √† 25 ans de prison|to sentence sb to 25 years imprisonment|${PC}
793|un coupable|a culprit|${PC}
794|dissuader qn de faire qch|to deter sb from doing sth|${PC}
795|avoir un effet dissuasif|to act as a deterrent|${PC}
796|une condamnation √† mort|a death sentence|${PC}
797|une condamnation √† perp√©tuit√©|a life sentence|${PC}
798|perp√©tuit√© sans possibilit√© de remise de peine|life without parole|${PC}
799|mettre qn en prison|to jail, imprison sb|${PC}
800|un d√©tenu, un prisonnier|a prisoner, an inmate, a detainee|${PC}
801|√™tre dans les couloirs de la mort|to be on death row|${PC}
802|une cellule|a cell|${PC}
803|un avocat|a lawyer|${PC}
804|un appel|an appeal|${PC}
805|faire appel d‚Äôune d√©cision|to appeal against a decision|${PC}
806|casser une d√©cision (de justice)|to quash, to overturn a decision|${PC}
807|commuer une condamnation √† mort en r√©clusion √† perp√©tuit√©|to commute a death sentence to life|${PC}
808|surseoir √† l‚Äôex√©cution d‚Äôun condamn√©|to grant a convict a stay of execution, a reprieve|${PC}
809|gracier un criminel|to pardon a criminal|${PC}
810|executer un condamn√©|to execute a convict|${PC}
811|mettre qn √† mort|to put sb to death|${PC}
812|un bourreau|an executioner|${PC}
813|une piq√ªre mortelle|a lethal injection|${PC}
814|faire une piq√ªre mortelle √† qn|to inject sb with a lethal substance|${PC}
815|pendre qn|to hang sb|${PC}
816|la guillotine|the guillotine|${PC}
817|guillotiner qn|to guillotine sb|${PC}
818|√©lectrocuter qn|to electrocute sb|${PC}
819|la chaise √©lectrique|the electric chair|${PC}
820|lapider qn, tuer qn √† coups de pierre|to stone sb to death|${PC}
821|abolir|to abolish, to do away with|${PC}
822|r√©tablir la peine de mort|to reinstate, to reintroduce, to restore the death penalty|${PC}
823|appliquer la peine de mort|to apply, to enforce the death penalty|${PC}
824|une erreur judiciaire|a miscarriage of justice|${PC}
825|les tests ADN|DNA analysis, DNA testing|${PC}
826|innocenter qn|to prove sb innocent, to exonerate sb|${PC}
827|√™tre innocent√© gr√¢ce √† l‚ÄôADN|to be cleared by DNA|${PC}
828|un probl√®me controvers√©|a controversial, contentious issue|${PC}
829|un probl√®me sensible, qui suscite de vives r√©actions|a hot-button issue|${PC}
830|partisans de la peine de mort|advocates, supporters, proponents of the death penalty|${PC}
831|opposants √†, adversaires de la peine de mort|critics, opponents of the death penalty|${PC}
832|√™tre contre la peine de mort|to oppose the death penalty, to be opposed to the death penalty|${PC}
833|un abolitionniste|an abolitionist|${PC}
834|du sexe f√©minin|female|${CF}
835|le statut, la position, la place des femmes dans la soci√©t√©|women‚Äôs status in society|${CF}
836|le d√©s√©quilibre entre les sexes|gender imbalance|${CF}
837|les in√©galit√©s entre les hommes et les femmes|gender inequalities|${CF}
838|la guerre entre les sexes|gender war|${CF}
839|un phallocrate, un machiste|a (male) chauvinist|${CF}
840|le machisme|machismo|${CF}
841|la misogynie|misogyny|${CF}
842|un misogyne|a misogynist|${CF}
843|le sexisme|sexism|${CF}
844|des pr√©jug√©s sexistes|sexist prejudices|${CF}
845|le f√©minisme|feminism|${CF}
846|le mouvement des femmes, le mouvement pour les droits de la femme|the Women‚Äôs Movement, the women‚Äôs rights movement|${CF}
847|s‚Äô√©manciper|to become emancipated|${CF}
848|rendre les femmes autonomes|to empower women|${CF}
849|un mariage forc√© / arrang√©|a forced marriage / an arranged marriage|${CF}
850|un mariage blanc|a sham marriage, a marriage of convenience|${CF}
851|une dot|a dowry|${CF}
852|la polygamie|polygamy|${CF}
853|polygame|polygamous|${CF}
854|l‚Äôexcision|female circumcision, female genital mutilation|${CF}
855|une femme battue|a battered wife|${CF}
856|violence conjugale, familiale|domestic violence|${CF}
857|√™tre priv√© du droit de vote|to be disenfranchised|${CF}
858|le droit de vote|the right to vote|${CF}
859|tomber enceinte|to become pregnant|${CF}
860|les femmes en √¢ge d‚Äôavoir des enfants|women of childbearing age|${CF}
861|la pilule (contraceptive)|the (contraceptive) pill|${CF}
862|prendre la pilule|to be on the pill|${CF}
863|partir en cong√© maternit√©|to go on maternity leave|${CF}
864|cong√© parental|parental leave, career break|${CF}
865|s‚Äôoccuper de ses enfants|to look after one‚Äôs children|${CF}
866|√©lever un enfant|to bring up, to raise a child|${CF}
867|l‚Äô√©ducation des enfants|the upbringing of children, child rearing, parenting|${CF}
868|des enfants d‚Äô√¢ge scolaire|school-age children|${CF}
869|une femme au foyer, une m√©nag√®re|a housewife|${CF}
870|faire le m√©nage|to do the housework|${CF}
871|faire la cuisine / la lessive / la vaisselle / les courses|to do the cooking / washing / washing-up / shopping|${CF}
872|passer l‚Äôaspirateur|to do the vacuuming / to vacuum|${CF}
873|les appareils m√©nagers|domestic appliances|${CF}
874|les t√¢ches m√©nag√®res|household chores|${CF}
875|√™tre confront√© √† un dilemme|to be faced with a dilemma|${CF}
876|une cr√®che, une garderie|a nursery, a day-care centre (GB), a child-care center|${CF}
877|une nounou, une nourrice|a nanny|${CF}
878|une assistante maternelle, une nourrice|a childminder|${CF}
879|trouver un √©quilibre entre travail et famille|to balance, combine work and family|${CF}
880|jongler pour concilier carri√®re et famille|to juggle a career and a family|${CF}
881|concilier|to reconcile|${CF}
882|les responsabilit√©s familiales|family responsibilities|${CF}
883|√™tre d√©pendant financi√®rement de qn|to be financially dependent on sb|${CF}
884|gagner sa vie|to earn a living, to make a living|${CF}
885|subvenir aux besoins de sa famille|to support one‚Äôs family|${CF}
886|nourrir ses enfants|to feed one‚Äôs children|${CF}
887|√™tre celui qui fait vivre la famille|to be the breadwinner|${CF}
888|c‚Äôest elle qui fait vivre sa famille|she is the family wage earner|${CF}
889|faire bouillir la marmite|to bring home the bacon|${CF}
890|la main d‚Äô≈ìuvre f√©minine|female labour|${CF}
891|l‚Äôemploi des femmes|female employment|${CF}
892|les femmes repr√©sentent x % de la main d‚Äô≈ìuvre|women make up x% of the workforce|${CF}
893|faire carri√®re|to have a career|${CF}
894|√™tre une femme qui travaille|to be a working woman|${CF}
895|une femme qui fait carri√®re|a career woman|${CF}
896|travailler √† temps partiel OU √† mi-temps|to work part time|${CF}
897|travailler √† plein temps|to work full time|${CF}
898|l‚Äô√©galit√© des salaires|equal pay|${CF}
899|le diff√©rentiel de salaire entre les sexes|the gender pay gap, the gender wage gap|${CF}
900|nommer qn √† un poste|to appoint sb to a post|${CF}
901|√™tre en concurrence avec les hommes|to compete with men|${CF}
902|un poste √† responsabilit√©s|a responsible job|${CF}
903|un poste de haut niveau|a top job|${CF}
904|un emploi subalterne|a menial job|${CF}
905|r√©ussir sa carri√®re|to have a successful career|${CF}
906|les obstacles √† la promotion des femmes|barriers to female advancement|${CF}
907|une chasse gard√©e pour les hommes|a male preserve|${CF}
908|introduire une discrimination contre qn|to discriminate against sb|${CF}
909|√™tre victime de discrimination|to be discriminated against|${CF}
910|le harc√®lement|harassment|${CF}
911|le harc√®lement sexuel|sexual harassment|${CF}
912|la parit√©|parity|${CF}
913|sous-repr√©sent√©|under-represented|${CF}
914|instaurer des quotas|to introduce quotas|${CF}
915|l‚Äôinstauration de quotas|the introduction of quotas|${CF}
916|la discrimination positive|affirmative action|${CF}
917|l‚Äô√©galit√© des chances|equal opportunity|${CF}
918|√©galitaire|egalitarian|${CF}
919|l‚Äô√©galitarisme|egalitarianism|${CF}
920|atteindre l‚Äô√©galit√© avec les hommes|to achieve equality with men|${CF}
921|une maladie|a disease, an illness, a sickness|${HI}
922|souffrir d‚Äôune maladie|to suffer from a disease|${HI}
923|mourir d‚Äôune maladie|to die of, to die from a disease|${HI}
924|une maladie grave|a serious disease|${HI}
925|√™tre dans un √©tat critique|to be critically ill|${HI}
926|un microbe, un germe|a germ|${HI}
927|des bact√©ries|bacteria|${HI}
928|attraper la grippe|to go down with the flu|${HI}
929|un danger pour la sant√©|a health hazard|${HI}
930|un fl√©au|a curse, a plague, a scourge|${HI}
931|le cancer du poumon / du sein / de la peau|lung / breast / skin cancer|${HI}
932|canc√©rig√®ne|carcinogenic|${HI}
933|le diab√®te|diabetes|${HI}
934|l‚Äôh√©patite|hepatitis|${HI}
935|la malaria, le paludisme|malaria|${HI}
936|une maladie sexuellement transmissible (MST)|a sexually transmitted disease (STD), a venereal disease (VD)|${HI}
937|avoir une maladie cardiaque|to have a heart condition|${HI}
938|la maladie d‚ÄôAlzheimer / de Parkison|Alzeihemer‚Äôs / Parkinson‚Äôs disease|${HI}
939|une maladie neurod√©g√©n√©rative|a neurodegenerative disease|${HI}
940|un sympt√¥me|a symptom|${HI}
941|affecter, toucher un pays|to affect a country|${HI}
942|toucher 20 % de la population|to afflict 20% of the population|${HI}
943|la zone la plus durement touch√©e|the hardest-hit area|${HI}
944|√©radiquer|to eradicate|${HI}
945|end√©mique|endemic|${HI}
946|le SIDA|AIDS, acquired immune deficiency syndrome|${HI}
947|contracter le SIDA|to develop AIDS|${HI}
948|un malade du SIDA|an AIDS sufferer, an AIDS patient|${HI}
949|s√©ropositif|HIV-positive|${HI}
950|faire passer un test de d√©pistage du SIDA √† qn|to screen sb for AIDS|${HI}
951|un centre de d√©pistage du SIDA|an HIV screening centre|${HI}
952|un test de d√©pistage|a screening test|${HI}
953|le sperme|sperm, semen|${HI}
954|avoir des rapports non prot√©g√©s|to have unprotected sex|${HI}
955|un pr√©servatif|a condom|${HI}
956|l‚Äôabstinence|abstinence|${HI}
957|la fid√©lit√©|faithfulness|${HI}
958|une aiguille|a needle|${HI}
959|les anti-r√©troviraux|anti-retroviral drugs|${HI}
960|la trith√©rapie|triple therapy, combination therapy|${HI}
961|un traitement m√©dical|medical treatment|${HI}
962|secret m√©dical|medical confidentiality|${HI}
963|une infection nosocomiale|a hospital-acquired infection|${HI}
964|MRSA, un staphylocoque r√©sistant √† la m√©thicilline|MRSA|${HI}
965|une bact√©rie multi-r√©sistante|a superbug|${HI}
966|prescrire|to prescribe|${HI}
967|une ordonnance|a prescription|${HI}
968|un m√©decin g√©n√©raliste|a general practitioner, a GP|${HI}
969|un chirurgien|a surgeon|${HI}
970|se faire op√©rer|to have surgery, go through surgery, have an operation|${HI}
971|diagnostiquer|to diagnose|${HI}
972|un diagnostic|a diagnosis|${HI}
973|gu√©rir un patient|to cure a patient|${HI}
974|un rem√®de|a remedy, a cure|${HI}
975|un m√©dicament|a drug, a medicine, a medication|${HI}
976|un m√©dicament g√©n√©rique|a generic drug|${HI}
977|un antalgique, analg√©sique|a painkiller|${HI}
978|un effet secondaire|a side effect|${HI}
979|une piq√ªre|an injection, a shot|${HI}
980|prendre des antibiotiques|to be on antibiotics|${HI}
981|un laboratoire pharmaceutique|a pharmaceutical laboratory|${HI}
982|des produits pharmaceutiques|pharmaceuticals|${HI}
983|un vaccin|a vaccine|${HI}
984|vacciner|to vaccinate|${HI}
985|une campagne de vaccination|a vaccination campaign|${HI}
986|se r√©tablir, gu√©rir|to recover|${HI}
987|gu√©rison, r√©tablissement|recovery|${HI}
988|rechuter|to relapse|${HI}
989|une alerte √† l‚Äôintoxication alimentaire|a food scare|${HI}
990|un p√©ril sanitaire, une alerte sanitaire|a health scare|${HI}
991|√©pizootie|an epizootic disease|${HI}
992|la fi√®vre aphteuse|food-and-mouth disease|${HI}
993|l‚Äôenc√©phalopathie bovine spongiforme, l‚ÄôESB|bovine spongiform encephalopathy, BSE|${HI}
994|la maladie de la vache folle|mad-cow disease|${HI}
995|la maladie de Creutzfeldt Jacob (MCJ)|Creutzfeldt-Jacob Disease (CJD)|${HI}
996|une maladie √† prions|a prion disease|${HI}
997|la dioxine|dioxin|${HI}
998|le scandale du poulet √† la dioxine|the dioxin chicken scandal|${HI}
999|la tra√ßabilit√©|traceability|${HI}
1000|les soins m√©dicaux / les services de sant√©|health care|${HI}
1001|la sant√© publique|public health|${HI}
1002|les responsables de la sant√© publique|public health officials|${HI}
1003|les autorit√©s sanitaires|the health authorities|${HI}
1004|le syst√®me de sant√©|the health care system, the health system|${HI}
1005|les services de sant√©|health services|${HI}
1006|les d√©penses de sant√©|health expenses|${HI}

// === NOUVEAU CHAPITRE : INDIVIDUAL FREEDOM ===
1007|la libert√© d‚Äôexpression, de parole|freedom of speech, free speech, freedom of expression|${IF}
1008|la libert√© de la presse|freedom of the press|${IF}
1009|une presse libre|a free press|${IF}
1010|la libert√© de culte, la libert√© religieuse|freedom of worship|${IF}
1011|le pouvoir arbitraire|arbitrary power|${IF}
1012|une lettre de cachet|a lettre de cachet|${IF}
1013|empi√©ter sur les droits des gens|to infringe (on) people‚Äôs rights|${IF}
1014|une atteinte, une entorse aux droits de qn|an infringement on sb‚Äôs rights|${IF}
1015|empi√©ter sur les libert√©s fondamentales|to encroach on basic liberties|${IF}
1016|un empi√®tement de l‚Äô√âtat|an encroachment of the state|${IF}
1017|restreindre, limiter la libert√© d‚Äôexpression|to restrict free speech|${IF}
1018|rogner sur les libert√©s individuelles|to erode individual freedoms|${IF}
1019|d√©tenir un suspect sans l‚Äôinculper|to detain a suspect without charge|${IF}
1020|√™tre d√©tenu sans √™tre inculp√©|to be held without charge|${IF}
1021|placer qn en d√©tention provisoire|to remand sb in custody|${IF}
1022|emprisonner qn|to jail sb, to imprison sb|${IF}
1023|le droit de vote|the right to vote|${IF}
1024|les droits fondamentaux|basic rights|${IF}
1025|les libert√©s fondamentales / individuelles|basic / individual liberties|${IF}
1026|√™tre garanti par la constitution|to be enshrined in the constitution|${IF}
1027|les libert√©s civiques|civil liberties|${IF}
1028|censurer|to censor|${IF}
1029|la censure|censorship|${IF}
1030|la surveillance|surveillance|${IF}
1031|une soci√©t√© surveill√©e|a surveillance society|${IF}
1032|un √âtat policier|a police state|${IF}
1033|la police, les forces de l‚Äôordre|the police force|${IF}
1034|interpeller et fouiller|to stop and search|${IF}
1035|arr√™ter qn|to arrest sb|${IF}
1036|(le droit √†) la vie priv√©e, l‚Äôintimit√©|privacy|${IF}
1037|la vie priv√©e de qn|sb‚Äôs private life|${IF}
1038|violer la vie priv√©e de qn|to breach, to violate sb‚Äôs privacy|${IF}
1039|une atteinte √†, une violation de la vie priv√©e|a breach of privacy, an invasion of privacy, a privacy violation|${IF}
1040|porter atteinte √† la vie priv√©e de qn|to intrude upon sb‚Äôs privacy|${IF}
1041|la vid√©osurveillance|video surveillance|${IF}
1042|t√©l√©vision en circuit ferm√©|CCTV, closed circuit television|${IF}
1043|enregistrer|to record|${IF}
1044|suivre de pr√®s les mouvements de qn|to monitor sb‚Äôs movements|${IF}
1045|avoir qn √† l‚Äô≈ìil|to keep tabs on sb, to keep an eye on sb|${IF}
1046|espionner qn|to spy on sb, to snoop on sb|${IF}
1047|suivre la trace de qn|to track sb|${IF}
1048|surveiller une fronti√®re / le courrier de qn|to monitor a border / sb‚Äôs mail|${IF}
1049|un micro cach√©|a bug|${IF}
1050|placer des micros dans une pi√®ce|to bug a room|${IF}
1051|mettre qn sur √©coute t√©l√©phonique|to (wire)tap sb‚Äôs phone|${IF}
1052|les √©coutes t√©l√©phoniques|phone tapping, wiretapping|${IF}
1053|√©couter les conversations t√©l√©phoniques de qn|to eavesdrop on sb‚Äôs phone conversations|${IF}
1054|mettre son nez dans la vie personnelle de qn|to pry into sb‚Äôs personal life|${IF}
1055|des donn√©es, des informations|data|${IF}
1056|des informations personnelles|personal data, personal details|${IF}
1057|les coordonn√©es de qn|sb‚Äôs contact details|${IF}
1058|des donn√©es biom√©triques|biometric data|${IF}
1059|les informations bancaires de qn|sb‚Äôs banking details|${IF}
1060|un dossier m√©dical / scolaire|a medical record / a school record|${IF}
1061|un casier judiciaire|a criminal record|${IF}
1062|un relev√© de t√©l√©phone|a telephone bill|${IF}
1063|un relev√© bancaire|a bank statement|${IF}
1064|rassembler, recueillir des informations|to collect, gather data|${IF}
1065|glaner des informations|to glean infomation|${IF}
1066|enregistrer, conserver des donn√©es|to record, store, retain data|${IF}
1067|rechercher et extraire des donn√©es|to retrieve data|${IF}
1068|ficher un suspect|to put a suspect on file|${IF}
1069|une base de donn√©es|a database|${IF}
1070|une base de donn√©es ADN|a DNA database|${IF}
1071|une empreinte g√©n√©tique|a DNA print, genetic print|${IF}
1072|subir un test ADN|to be DNA-swabbed|${IF}
1073|tirer la sonnette d‚Äôalarme|to sound, to ring the alarm bell|${IF}
1074|d√©noncer qn|to blow the whistle on sb|${IF}
1075|un lanceur d‚Äôalerte|a whistleblower|${IF}
1076|la drogue|drugs|${IDR}
1077|une drogue douce / dure|a soft / hard drug|${IDR}
1078|les stup√©fiants|narcotics|${IDR}
1079|la dope, la came|dope|${IDR}
1080|le cannabis|cannabis|${IDR}
1081|la marijuana|marijuana|${IDR}
1082|les amph√©tamines|amphetamines|${IDR}
1083|l‚Äôh√©ro√Øne|heroin|${IDR}
1084|inhaler, sniffer de la coke|to sniff, snort cocaine|${IDR}
1085|une aiguille|a needle|${IDR}
1086|une seringue|a syringe|${IDR}
1087|une drogue √† usage r√©cr√©atif occasionnel|a recreational drug|${IDR}
1088|une drogue de synth√®se|a designer drug, a synthetic drug|${IDR}
1089|un psychotrope|a psychoactive, psychotropic substance|${IDR}
1090|se banaliser|to become commonplace|${IDR}
1091|la banalisation du crack|the spreading use of crack|${IDR}
1092|un fl√©au|a plague, a curse, a scourge|${IDR}
1093|le trafic de drogue|drug-trafficking|${IDR}
1094|un trafiquant de drogue, un narcotrafiquant|a drug trafficker|${IDR}
1095|un r√©seau de trafiquants|a drug ring, a drug cartel|${IDR}
1096|un baron de la drogue|a drug baron, a drug lord, a drug kingpin|${IDR}
1097|un passeur, une mule|a mule|${IDR}
1098|faire entrer de la drogue dans un pays|to smuggle drugs into a country|${IDR}
1099|un revendeur de drogues|a drug pusher, a drug peddler, a drug dealer|${IDR}
1100|la criminalit√© due √† la drogue|drug-related crime|${IDR}
1101|consommer, prendre de la drogue, se droguer|to use drugs, to take drugs|${IDR}
1102|la consommation de drogue|drug use|${IDR}
1103|la toxicomanie|drug abuse, substance abuse, drug addiction|${IDR}
1104|un usager de drogue, un drogu√©|a drug-user|${IDR}
1105|un consommateur occasionnel / un gros consommateur|a casual / heavy user|${IDR}
1106|un consommateur de cannabis|a cannabis user|${IDR}
1107|√™tre accro √† qch|to be addicted to sth|${IDR}
1108|√™tre accro √† la coca√Øne|to be hooked on cocaine|${IDR}
1109|avoir besoin d‚Äôune dose|to need a fix|${IDR}
1110|avoir un besoin maladif de qch|to crave sth|${IDR}
1111|l‚Äôaccoutumance (√† qch), la d√©pendance|addiction (to sth), dependency (on sth)|${IDR}
1112|qui cr√©e une accoutumance, addictog√®ne|addictive|${IDR}
1113|un drogu√©, un toxicomane|a drug addict, a drug abuser|${IDR}
1114|un drogu√©, un cam√©, un toxico|a junkie, a druggie|${IDR}
1115|faire une overdose, une surdose|to take an overdose, to OD|${IDR}
1116|essayer l‚Äôh√©ro√Øne|to experiment with heroin|${IDR}
1117|un joint|a joint, a reefer|${IDR}
1118|avaler, inhaler la fum√©e|to inhale smoke|${IDR}
1119|planer, √™tre d√©fonc√©|to be high, to be spaced out|${IDR}
1120|la pr√©vention|prevention|${IDR}
1121|sensibiliser le public aux dangers du cannabis|to make people aware of the dangers of cannabis|${IDR}
1122|une campagne de sensibilisation|an awareness(-raising) campaign|${IDR}
1123|l√©galiser la consommation de cannabis|to legalize cannabis use|${IDR}
1124|d√©p√©naliser, d√©criminaliser|to decriminalize|${IDR}
1125|les arguments pour et contre la l√©galisation|the pros and cons of legalization|${IDR}
1126|le traitement|treatment|${IDR}
1127|demander √† √™tre soign√©|to seek treatment|${IDR}
1128|d√©crocher|to kick the habit|${IDR}
1129|un centre de d√©sintoxication|a rehabilitation center|${IDR}
1130|entreprendre une cure de d√©sintoxication|to go into rehab|${IDR}
1131|d√©sintoxication|detoxification, detoxication|${IDR}
1132|un centre de d√©sintoxication|a detoxi(fi)cation centre|${IDR}
1133|une cure de d√©sintoxication|a detoxi(fi)cation programme|${IDR}
1134|√™tre en cure de d√©sintoxication|to be in detox|${IDR}
1135|√©liminer qch progressivement|to phase sth out|${IDR}
1136|les sympt√¥mes de (l‚Äô√©tat de) manque|withdrawal symptoms|${IDR}
1137|la m√©thadone|methadone|${IDR}
1138|rechuter|to relapse|${IDR}
1139|r√©primer la consommation de drogues|to clamp down on, to crack down on drug abuse|${IDR}
1140|la r√©pression|repression|${IDR}
1141|p√©naliser la possession de drogues|to impose penalties for drug possession|${IDR}
1142|une amende|a fine|${IDR}
1143|condamner qn √† une amende|to fine sb|${IDR}
1144|le responsable de la lutte contre la drogue|the drug czar, the drug tsar|${IDR}
`.trim();


    const physicsRawText = `10000|<span style="color: rgb(255, 170, 0);">(Shems)</span> Qu'est-ce qu'un referentiel galil√©en?|Un r√©f√©rentiel galil√©en est un r√©f√©rentiel dans lequel le principe d'inertie est v√©rifi√©e, √† savoir que tout objet isol√© ou pseudiisol√© est soit immobile soit en mouvement rectiligne uniforme dans ce r√©f√©rentiel .&nbsp;&nbsp;|${PM}
10001|<span style="color: rgb(0, 255, 0);">V.Iulian</span> <br>Tout r√©f√©rentiel [...] rapport √† un r√©f√©rentiel galil√©en est galil√©en|<b>en translation rectiligne et uniforme par</b>|${PM}
10002|<span style="color: rgb(0, 255, 0);">V.Iulian</span><br>Si la translation de R' par rapport a R galil√©en n‚Äôest pas rectiligne ou pas uniforme, R‚Ä≤ [...]|<b>n‚Äôest pas galil√©en</b>|${PM}
10003|<span style="color: rgb(0, 255, 0);">V.Iulian</span> <br>Un r√©f√©rentiel en rotation autour d‚Äôun axe fixe d‚Äôun r√©f√©rentiel galil√©en [...]|<b>n‚Äôest jamais galil√©en.</b>|${PM}
10004|<span style="color: rgb(0, 255, 0);"><u><b>(MAG)</b></u></span><img src="images/paste-9cd3560a5f9a5c4100721b04ab4c28ceaaaf93e5.jpg">|<img src="images/paste-5a57528bd9551b29f65139e8d4887065d643d4ac.jpg">|${PM}
10005|<span style="color: rgb(0, 255, 0);"><u><b>(MAG)</b></u></span><img src="images/paste-d77f3722e5a6b97cce4097de2c62d12a8d197b00.jpg">|<img src="images/paste-94c2181742a47574197e38c01becf17fe5e14056.jpg"><br>Avec O' un point fixe de R'|${PM}
10006|<span style="color: rgb(0, 255, 0);"><u><b>(MAG)</b></u></span><img src="images/paste-cb677b12d3a6508a44f3f9b492a67a4a71774fca.jpg">|Cas de R' en translation par rapport √† R: $\\vec{f_{ic}}=\\vec{0}$ donc&nbsp;$P(\\vec{f_{ic}})=0$<br><br>Cas de R' en rotation par rapport √† R: $P(\\vec{f_ic}) = (-2m \\vec{\\Omega}_{R'/R} \\wedge \\vec{v}_{M/R'} ). \\vec{v}_{M/R'}=0$<br><br>TPC:&nbsp;$\\frac{dEc_{/R'}}{dt}=\\sum_i P(\\vec{F_i})/R'+P(\\vec{f_{ie}})/R'$|${PM}
10007|<span style="color: rgb(255, 170, 0);"><u><b>(MAG)</b></u></span>Justifier que fic ne travaille pas et exprimer le TEC dans R' non gal.|$P(\\vec{f_ic}) = 0$<br>En effet lorsque&nbsp;R' est en translation par rapport √† R $\\vec{f_{ic}}=\\vec{0}$ donc&nbsp;$P(\\vec{f_{ic}})=0$<br><br>et lorsque R' en rotation par rapport √† R: $P(\\vec{f_ic}) = (-2m \\vec{\\Omega}_{R'/R} \\wedge \\vec{v}_{M/R'} ). \\vec{v}_{M/R'}=0$<br>csq1:&nbsp;$W(\\vec{f_{ic}})=\\int P(\\vec{f_{ic}}).dt=0$ i.e.&nbsp;$\\vec{f_{ic}}$ ne travaille pas.<br><br>csq2: TEC dans R':&nbsp;$\\Delta Ec_{/R'}=\\sum_i W(\\vec{F_i})/R'+W(\\vec{f_{ie}})/R'$|${PM}
10008|<b><span style="color: rgb(255, 170, 0);">(MAG)</span></b><span style="color: rgb(0, 85, 255);">&nbsp;sur l'expl d'un man√®ge avec si√®ges suspendus √† des cha√Ænes:</span><span style="color: rgb(255, 170, 0);"><u><br></u></span><img src="images/paste-a933d76dcbeef4f62508fa32bd894eade0892cea.jpg"><br><img src="images/paste-162500c424b12166f0f9f7c8345e074e19a42672.jpg">|<img src="images/paste-7d986b294569fcc662beb25c0076c304bcdbb34e.jpg">|${PM}
10009|<span style="color: rgb(255, 170, 0);">(Orlan M) </span>Exprimer la force d'inertie de Coriolis et la force d'inertie d'entrainement dans le cas d'une rotation de R' par rapport √† R|$\\vec{f_ic} = -2m \\vec{\\Omega}_{R'/R} \\wedge \\vec{v}_{M/R'}&nbsp;$<br>et<br>$\\vec{f_ie} = m \\Omega^2 \\overrightarrow{HM}&nbsp;$|${PM}
10010|<span style="color: rgb(0, 255, 0);">(INC)</span> TEM dans R' rep√®re non galil√©en|<br>[latex] Si $\\vec{f_{ie}} $ est conservative, $\\vec{f_{ie}}$ d√©rive d'une √©nergie potentielle $E_{p,f_{ie}}$ qui est contenue dans $E_m$ et qui est tq: $W(\\vec{f_{ie}})=-\\Delta E_{p,f_{ie}}$ \\newline<br><br>Alors TEM: $\\Delta Em_{/R'}=\\sum_i W(\\vec{F}_{iNC/R'}) $ \\newline<br><br>Si $\\vec{f}_{ie}$ est non conservative \\newline<br>TEM: $\\Delta Em_{/R'}=\\sum_i W(\\vec{F}_{iNC/R'})+W(\\vec{f_{ie/R'}}) $[/latex]<br>|${PM}
10011|<span style="color: rgb(255, 170, 0);">(Orlan M) </span>En partant du PFD √©crit dans un r√©f√©rentiel galil√©en R, √©tablir l'expression du PFD dans un r√©frentiel R' non galileen.|On part de la loi de composition des vitesses $m \\vec{a}_{M/R} = m \\vec{a}_{M/R'} + \\vec{a_c} + \\vec{a_e}&nbsp;&nbsp;$<br>de plus $m \\vec{a}_{M/R} = \\sum_i \\vec{F_i} $<br>En r√©arrangant les termes on a $m \\vec{a}_{M/R'} = \\sum_i \\vec{F_i} -m \\vec{a_c} - m \\vec{a_e} $<br>avec $ - m \\vec{a_e} $ qui est la force d'inertie d'entrainement et $&nbsp;- m \\vec{a_c} $ qui est la force d'inertie de coriolis|${PM}
10012|<span style="color: rgb(255, 170, 0);">(Orlan M)</span> Exprimer $ \\vec{f_{ic}} $ et $ \\vec{f_{ie}} $ dans le cas d'une translation de R' par rapport √† R|&nbsp;$ \\vec{f_{ic}} = \\vec{0} $ et&nbsp;&nbsp;$ \\vec{a_c} = \\vec{0} $ dans ce cas<br>et<br>$ \\vec{f_{ie}} = -m(\\frac{d^2 \\vec{OO'}}{dt^2})_R $|${PM}
10013|<span style="color: rgb(255, 170, 0);">(LPB)</span><span style="color: rgb(0, 255, 0);"> </span>Comment est d√©fini r√©ellement le poids?|On def le poids d'un corps M de masse m de mani√®re exp√©rimentale: C'est la force oppos√©e √† la tension d'un fil au bout duquel est accroch√© le corps, ce dernier √©tant en √©quilibre dans le r√©f√©rentiel terrestre (\\(\\vec{P} = \\vec{F_G}+\\vec{f_{ie}}\\)&nbsp;)|${PM3}
10014|<span style="color: rgb(0, 255, 0);">(LPB)</span>Donner un exemple de manifestation du caract√®re non galil√©en du r√©f√©rentiel g√©ocentrique|L'existence de deux mar√©es hautes et deux mar√©es basses par jour sur Terre<br>&nbsp;<img src="images/Capture d‚Äô√©cran 2023-10-07 161935.png">|${PM3}
10015|<span style="color: rgb(0, 255, 0);">(TS) </span>Donner des exemples qui mettent en √©vidence le caract√®re non galil√©en du r√©f√©rentiel terrestre.|La d√©viation vers l'est,<br>Le sens de rotation des cyclones,<br>Le pendule de Foucault|${PM3}
10016|<span style="color: rgb(255, 170, 0);">(TS)</span> Donner la vitesse angulaire de rotation du r√©f√©rentiel terrestre par rapport au r√©f√©rentiel g√©ocentrique|\\(\\omega\\)= \\(\\frac{2\\pi}{24√ó3600}\\)rad/s=7.3√ó10\\(^{-5}\\) rad/s|${PM3}
10017|<span style="color: rgb(255, 170, 0);">(TS)</span> Donner la vitesse angulaire caract√©risant la translation elliptique du r√©f√©rentiel g√©ocentrique par rapport au r√©f√©rentiel de Copernic|\\(\\Omega\\)=\\(\\frac{2\\pi}{365√ó24√ó3600}\\)rad/s=2.0√ó10\\(^{-7}\\) rad/s|${PM3}
10018|<span style="color: rgb(255, 170, 0);">(TS) </span>Quelles forces fera apparaitre le PFD dans R<sub>T</sub> non galil√©en|Le poids (qui contient [$] \\overrightarrow {f_{ie}}[/$])<br>La force d'inertie de Cariolis [$] \\overrightarrow {f_{ic}}[/$]<br>D'√©ventuelles autres forces|${PM3}
10019|(B.K.)<img src="images/paste-1baa446cfecd2e569059adbdf3a1b56a2baa1f9d.jpg"><br>Qu'est-ce qui est √† l'origine de cette d√©viation vers l'Est?<br>Dans l'h√©misph√®re Sud, cette d√©viation se ferait-elle √©galement vers l'Est?|C'est la force d'inertie de Coriolis qui est responsable de cette d√©viation vers l'Est.<br>La d√©viation se ferait √©galement vers l'Est dans l'h√©misph√®re sud.|${PM3}
10020|<span style="color: rgb(0, 255, 0);">(enzo m) </span><u>Contexte : Appli 3 Pendule de Foucault</u><br><br>On a les deux √©quations suivantes :<br>&nbsp;&nbsp;\\(\\begin{cases} \\ddot x +\\omega_0^2 x \\approx 2\\Omega sin(\\lambda)\\dot y \\space\\space\\space\\space\\space\\space\\space\\space(1)\\\\  \\ddot y +\\omega_0^2 y \\approx  -2\\Omega sin(\\lambda)\\dot x\\space\\space\\space\\space\\space(2)  \\end{cases}\\)<br><br>Quelle est la <b>m√©thode </b>afin d'obtenir une √©quation diff√©rentielle selon&nbsp;<u>Z</u>&nbsp;= x+jy o√π j<sup>2&nbsp;</sup>= -1 ?|<u>M√©thode</u> : il faut faire (1)+j(2)&nbsp;<br><br>Ce qui nous donne&nbsp;\\(\\underline {\\ddot Z} + \\omega_0^2\\underline{Z} = -2j\\Omega sin(\\lambda)\\underline{\\dot Z}\\)<br><br>Apr√®s avoir r√©solu cette √©quation diff√©rentielle, on peut trouver x et y avec x=Re(<u>Z</u>) et y=Im(<u>Z</u>).|${PM3}
10021|<span style="color: rgb(0, 255, 0);">(enzo m)</span>&nbsp;<u>Contexte : Appli 3 Pendule de Foucault</u>&nbsp;<br><br><img src="images/paste-bbc6e2689d77ff19edb0d95f4b86e2d6c46539ea.jpg" width="495"><br><br>On obtient pour les √©quations du mouvement du pendule de Foucault :<br><br>\\(\\begin{cases} x(t) = x_0cos(\\omega_0t)cos(-\\Omega sin\\lambda t)\\\\  y(t) = x_0cos(\\omega_0t)sin(-\\Omega sin\\lambda t)\\end{cases}\\)<br><br>Quelle est alors l'expression de la p√©riode T de rotation du plan d'oscillation du pendule? et la p√©riode T<sub>0 </sub>propre des oscillations ?|On a&nbsp;\\(T = \\left|\\frac{2\\pi}{\\Omega sin\\lambda}\\right|\\)&nbsp;&lt;-- p√©riode de rotation du plan d'oscillation<br><br>et&nbsp;\\(T = \\frac{2\\pi}{\\omega_0}\\)&nbsp;&lt;-- p√©riode propre des oscillations.|${PM3}
10022|<img src="images/anki appli 2.png"><span style="color: rgb(255, 170, 0);">Ziad&nbsp;SABRI<br></span><img src="images/paste-bf200bd2295b0763724fe5a90ee2df44dbf94cbc.jpg" style="float: left;">Donner en fonction de&nbsp;\\(\\lambda \\)&nbsp;l'expression de l'intensit√© de pesanteur (\\(\\vec{g}\\)) en un point √† la surface de la Terre situ√© √† la latitude&nbsp;\\(\\lambda\\). A quel endroit&nbsp;\\(g\\)&nbsp;est-elle max? min?<br><br>R√©f√©rentiel terrestre: non gal<br>R√©f√©rentiel g√©ocentrique: gal<br>Vitesse angulaire de rotation de la Terre autour de l'axe des p√¥le:&nbsp;&nbsp;\\(\\Omega\\)<br>Masse et rayon de la Terre:&nbsp;\\(m_T\\)&nbsp;et&nbsp;\\(R_T\\)|Poids d'un objet de masse&nbsp;\\(m\\)&nbsp;√† la surface de la Terre:<br>Donc&nbsp;\\(\\vec{g}=-G \\frac{ m_T}{R_T^2} \\vec{e_{z_{P}}}-\\vec{a_e}=-G \\frac{ m_T}{R_T^2} \\vec{e_{z_{P}}}+\\Omega^2\\overrightarrow{HM}\\)<br>Or&nbsp;\\(HM=R_T \\ cos(\\lambda)\\)&nbsp;et&nbsp;\\(\\frac {\\overrightarrow{HM}}{HM}=cos(\\lambda)\\overrightarrow{e_{z_{P}}}-sin(\\lambda)\\overrightarrow{e_{y_{P}}}\\)<br>Donc&nbsp;\\(\\vec{g}=-G \\frac{ m_T}{R_T^2} \\vec{e_{z_{P}}}+\\Omega^2 \\ R_T \\ cos(\\lambda) (cos(\\lambda)\\overrightarrow{e_{z_{P}}}-sin(\\lambda)\\overrightarrow{e_{y_{P}}})\\)<br><br>\\(g\\)&nbsp;est max au p√¥le sud et min √† l'√©quateur.|${PM3}
10023|(B.K.) Quelle force d'inertie permet d'expliquer l'existence de deux mar√©es oc√©aniques hautes par jour sur Terre?|C'est la force d'inertie d'entrainement due au fait que le r√©f√©rentiel g√©ocentrique (en translation elliptique dans le r√©f. H√©liocentrique) est consid√©r√© comme non galil√©en (en consid√©rant le r√©f. H√©liocentrique galil√©en).|${PM3}
10024|(B.K.) Quelle force d'inertie permet d'expliquer le sens de rotation des cyclones?<br>Dans quel sens tourne les cyclones dans l'h√©misph√®re Nord? Sud? Expliquer par un sch√©ma.|C'est la force d'inertie de Coriolis (en consid√©rant le ref. Terrestre non galil√©en et le r√©f g√©ocentrique galil√©en).<br>Dans le Nord: rotation dans le sens trigo.<br>Dans le Sud: Rotation dans le sens horaire<br><img src="images/paste-71cc5358ce5c51ce02d2e63300dba80598.jpg">|${PM3}
10025|<br>Valeur de \\(\\vec{v}_{gs_2/s_1}\\) dans le cas de non glissement (i.e. cas de l'adh√©rence) :<br>|On a : \\(\\vec{v}_{gs_2/s_1} = \\vec{0}\\)|${PM4}
10026|<span style="color: rgb(0, 255, 0);">(FH) </span>Loi de Coulomb dans le cas d'un non-glissement :|\\[\\|\\vec{T}\\| \\le f_s \\|\\vec{N}\\|\\] avec \\(f_s\\) le coefficient de frottement statique.|${PM4}
10027|<span style="color: rgb(0, 255, 0);">(FH) </span>Loi de Coulomb pour le cas d'un glissement :|\\[\\|\\vec{T}\\| = f_d \\|\\vec{N}\\|\\] avec \\(f_d\\) le coefficient de frottement dynamique.<br>|${PM4}
10028|<span style="color: rgb(0, 255, 0);">(Yannick) </span>Les forces de frottement sont elles conservatives ?|Non, elles ne sont en g√©n√©ral pas conservatives.|${PM4}
10029|<span style="color: rgb(255, 170, 0);">(Yannick) </span>Quel peut-√™tre le signe de la puissance d'une force de contact ?|G√©n√©ralement n√©gatif : cas o√π la r√©action tangentielle / force de frottement est une force de freinage.<br>Parfois positif : cas o√π la force de frottement est motrice. Par exemple, cas d'un solide S2 fixe par rapport √† un solide S1 (adh√©rence) et que S1, mis en mouvement, met S2 en mouvement.<br><img src="images/paste-4636b8c49be9f7c06e3c704079ee7d896489694e.jpg" width="265">|${PM4}
10030|Que dire sur la puissance totale \\(P(\\vec{R}_{1\\rightarrow 2})_{/R}+P(\\vec{R}_{2\\rightarrow 1})_{/R}\\) des forces mises en jeu dans un contact entre 2 solides ?|<br>\\(P(\\vec{R}_{1\\rightarrow 2})_{/R}+P(\\vec{R}_{2\\rightarrow 1})_{/R})=\\vec{T}_{1 \\rightarrow 2} . \\vec{v_g}_{2/1} \\leq 0\\)<br>Elle est nulle s'il y a adh√©rence des 2 solides (\\(\\vec{v_g}_{2/1}=0\\)) ou si le glissement se fait sans frottement (\\(\\vec{T}_{1 \\rightarrow 2}=0\\)).<br>Elle est n√©gative s'il y a glissement avec frottement.|${PM4}
10031|<span style="color: rgb(255, 170, 0);">(Yannick) </span>On mod√©lise l'action de contact de S1 sur S2 par une force \\(\\overrightarrow{R_{1->2}}\\) appliqu√©e en un point I de la r√©gion de contact, comment se d√©compose \\(\\overrightarrow{R_{1->2}}\\) ?|<div>\\(\\overrightarrow{R_{1->2}}\\) se d√©compose en :</div><ul><li>Une composante orthogonale au plan tangent œÄ commun aux 2 solides, dirig√©e de <strong>S1</strong> vers <strong>S2</strong>, not√©e \\(\\overrightarrow{N}\\) et appel√©e r√©action normale.</li><li>Une composante appartenant au plan œÄ, not√©e \\(\\overrightarrow{T}\\) et appel√©e r√©action tangentielle ou force de frottement. En absence de frottements: \\(\\overrightarrow{T}=\\overrightarrow{0}\\)</li></ul>|${PM4}
10032|<span style="color: rgb(255, 170, 0);">(INC)</span> Qu‚Äôest-ce que <b>la vitesse de glissement</b> ?|La vitesse de glissement de \\(S_2 / S_1\\) s'√©crit : \\(\\vec{v_g}_{S_2/S_1} = \\vec{v_{I_2}} - \\vec{v_{I_1}} \\)<br><br>(avec \\(I\\) le point de contact entre les deux solides et \\(I_1\\) (resp. \\(I_2\\)) le point de \\(S_1\\) (resp. \\(S_2\\)) confondu avec \\(I\\) √† l'instant \\(t\\) )<br><br>Remarque: Elle ne d√©pend pas du r√©f√©rentiel du moment que \\(\\vec{v_{I_2}}\\) et \\(\\vec{v_{I_1}}\\) sont exprim√©s dans le m√™me r√©f√©rentiel.|${PM4}
10033|<span style="color: rgb(0, 255, 0);">(Ali H.)</span><br> <img src="images/paste-15e45e099744e7f013048018acad29cb70089200.jpg">|<img src="images/paste-df8555d46ddffcf14f908e9ecc0196305be18f9e.jpg"><br><img src="images/paste-f7648fa01530ee8a53f75a02aa6d59e2d1197dcc.jpg">|${PM4}
10034|<span style="color: rgb(0, 255, 0);">(Ali H.)</span><br><img src="images/paste-82a4bf897e6c97251d4e1891621f532604b33fce.jpg">|<img src="images/paste-2381b673878f19aca319c7abd804505aff2d4a55.jpg">|${PM4}
10035|(INC)<br>√ânoncer le principe de Curie|Les √©l√©ments d'invariance et de sym√©trie des causes doivent se retrouver dans les effets produits.|${PEM1}
10036|(INC)<br>Quelles sont les dimensions de la densit√© volumique/surfacique/lin√©ique de charge ?|densit√© volumique de charge œÅ homog√®ne √† une charge divis√©e par un volume<br>unit√©:&nbsp;\\(C.m^{-3}\\)<br>densit√© surfacique de charge&nbsp;\\(\\sigma\\)&nbsp;homog√®ne √† une charge divis√©e par une surface<br>unit√©:&nbsp;\\(C.m^{-2}\\)<br>densit√© lin√©ique de charge&nbsp;\\(\\lambda\\)&nbsp;homog√®ne √† une charge divis√©e par une longueur<br>unit√©:&nbsp;\\(C.m^{-1}\\)|${PEM1}
10037|<span style="color: rgb(0, 255, 0);">(INC)</span><br>Quelle est la charge d'un volume √©l√©mentaire dV? d'une surface √©l√©mentaire dS? d'une longueur √©l√©mentaire dl?|La charge d'un volume √©l√©mentaire est&nbsp;\\[dq = \\rho.dV\\]<br>La charge d'une surface √©l√©mentaire est&nbsp;\\[dq = \\sigma.dS\\]<br>La charge d'une longueur √©l√©mentaire est&nbsp;\\[dq = \\lambda.dl\\]|${PEM1}
10038|<span style="color: rgb(255, 170, 0);">(INC)</span><br>Quelle condition est n√©cessaire pour qu'une distribution de charges&nbsp;soit invariante par rotation autour d'un axe Œî ?|Il faut que pour tout point M appartenant √† cette distribution, sa densit√© de charge v√©rifie œÅ(M‚Ä≤) = œÅ(M) (cas volumique) avec M‚Ä≤ l'image de M par rotation d'un angle quelconque autour de Œî.|${PEM1}
10039|<span style="color: rgb(255, 170, 0);">(INC)</span><br>Quelle condition est n√©cessaire pour qu'une distribution de charges illimit√©e dans la direction d'un axe Œî soit invariante par translation suivant Œî ?|Il faut que pour tout point M appartenant √† cette distribution et son translat√© M', sa densit√© de charge v√©rifie : œÅ(M') = œÅ(M) (cas volumique)|${PEM1}
10040|<span style="color: rgb(0, 255, 0);">(INC)</span><br>Quel choix de coordonn√©es est adapt√© √† une invariance par translation ? Puis par rotation ?|‚Ä¢&nbsp;Invariances par translation ‚Üí coordonn√©es cart√©siennes ou cylindriques.<br>‚Ä¢ Invariances par rotation ‚Üí coordonn√©es cylindriques ou sph√©riques.|${PEM1}
10041|<span style="color: rgb(255, 170, 0);">(INC)</span><br>Que dire du champ √©lectrostatique en un point P' sym√©trique de P par rapport √† un plan d‚Äôantisym√©trie<br>d‚Äôune distribution de charges ? (n‚Äôappartenant pas forc√©ment √† cette distribution de charges)|Le champ √©lectrostatique en P' est l‚Äôoppos√© du sym√©trique de celui en P par rapport au<br>plan d‚Äôantisym√©trie de la distribution de charges.|${PEM1}
10042|(INC)<br>Que dire du champ √©lectrostatique en P', point sym√©trique de P par rapport √† un plan de sym√©trie<br>d‚Äôune distribution de charges ?|Le champ √©lectrostatique en P' est le sym√©trique de celui en P par rapport au plan de sym√©trie de la distribution de charge.|${PEM1}
10043|(INC)<br>Que dire du champ √©lectrostatique d'un point M d'un plan de sym√©trie d‚Äôune distribution de charges ?&nbsp;|Le champ √©lectrostatique cr√©√© en un point M d‚Äôun plan de sym√©trie d‚Äôune distribution de charges appartient √† ce plan.|${PEM1}
10044|<span style="color: rgb(255, 170, 0);">(INC)</span><br>Que dire d'un champ&nbsp;\\(\\vec{E}\\) cr√©√© par une distribution volumique de charge ?&nbsp;&nbsp;(Domaine de d√©finition et continuit√©?)|Le champ \\(\\vec{E}\\)&nbsp;cr√©√© par une distribution volumique de charge est d√©fini et continu en tout point de l‚Äôespace.|${PEM1}
10045|<span style="color: rgb(255, 170, 0);">(INC)</span><br>Que dire d'un champ&nbsp;\\(\\vec{E}\\) cr√©√© par une distribution surfacique de charge ?&nbsp;&nbsp;(Domaine de d√©finition et continuit√©?)|Le champ \\(\\vec{E}\\) cr√©√© par une distribution surfacique de charge est d√©fini et continu en tout point de l‚Äôespace, sauf au niveau des points de la distribution. Il est donc discontinu √† la travers√©e de la surface charg√©e.|${PEM1}
10046|(INC)<br>Que dire d'un champ \\(\\vec{E}\\) cr√©√© par un ensemble de charges ponctuelles ? (Domaine de d√©finition et continuit√©?)|Le champ \\(\\vec{E}\\)&nbsp;cr√©√© par un ensemble de charges ponctuelles est d√©fini et continu en tout point de<br>l‚Äôespace, sauf sur les charges.|${PEM1}
10047|<span style="color: rgb(0, 255, 0);">(INC)</span><br>Qu'est-ce qu'un plan de sym√©trie d'une distribution de charges ?|Un plan de sym√©trie d'une distribution de charges est un plan tel que la distribution de charges obtenue en d√©pla√ßant les charges selon une sym√©trie par rapport √† ce plan est identique √† la<br>distribution initiale.|${PEM1}
10048|<span style="color: rgb(0, 255, 0);">(INC)</span><br>Qu'est-ce qu'un plan d'antisym√©trie d'une distribution de charges ?|On appelle plan d‚Äôantisym√©trie d'une distribution de charges un plan tel que la distribution de charges obtenue en d√©pla√ßant les charges selon une sym√©trie par rapport √† ce plan est oppos√©e (changement de signe) √† la distribution initiale.|${PEM1}
10049|<span style="color: rgb(255, 170, 0);">(INC)</span><br>Donner la loi de Coulomb qui s'exerce entre deux charges ponctuelles q1 et q2 s√©par√©es d'une distance r.|\\(\\vec{F}_{2 \\rightarrow 1} = - \\vec{F}_{1 \\rightarrow 2} = \\frac{1}{4 \\pi \\epsilon _0} \\frac{q_1 q_2}{r^2} \\vec{u}_{2 \\rightarrow 1}\\)|${PEM1}
10050|<span style="color: rgb(0, 255, 0);">(INC)</span><br>Comment est d√©crite la r√©partition de la charge d'une distribution volumique/ surfacique/ lin√©ique de charges ?|Elle est d√©crite par une fonction scalaire appel√©e densit√© volumique/ surfacique/ lin√©ique de charge&nbsp; \\(\\rho\\)/ \\(\\sigma\\)/\\(\\lambda\\), qui d√©pend des coordonn√©es (x', y', z') des points de la distribution de charges.|${PEM1}
10051|<span style="color: rgb(255, 170, 0);">(INC)</span><br>Comment calcule-t-on le champ √©lectrique total en un point en utilisant le principe de superposition ?|Le champ √©lectrique total en un point est calcul√© en faisant la somme vectorielle des champs √©lectriques cr√©√©s par chaque charge prise individuellement.|${PEM1}
10052|(INC)<br>Comment calcule-t-on la force totale exerc√©e sur une charge de la part d'un ensemble de charges ponctuelles?|On utilise le th√©or√®me de superposition en sommant la contribution de chaque charge ponctuelle prise s√©par√©ment.|${PEM1}
10053|<span style="color: rgb(0, 255, 0);">(INC)</span><br>Donner le champ √©lectrostatique cr√©e en un point P par une charge ponctuelle q situ√©e en S|\\(\\vec{E} (P) = \\frac{q}{4 \\pi \\epsilon _0} \\frac{\\vec{u}_r}{r^2} = \\frac{q}{4 \\pi \\epsilon _0}&nbsp;&nbsp;\\frac{\\vec{SP}}{SP^3}\\)|${PEM1}
10054|<span style="color: rgb(255, 170, 0);">(INC)</span><br>Donner la direction de \\(\\vec{E}\\) dans le cas o√π \\(q >0\\)|Le champ \\(\\vec{E}\\) cr√©√© par une charge ponctuelle positive part de la charge. Il diverge √† partir de la charge<img src="images/paste-c1726407b90adfa409f559a158eb8b1a740d476c.jpg">|${PEM1}
10055|<span style="color: rgb(255, 170, 0);">(INC)</span><br>Donner la direction de \\(\\vec{E}\\) dans le cas o√π \\(q <0\\)|Le champ \\(\\vec{E}\\) cr√©√© par une charge ponctuelle n√©gative se dirige vers la charge. Il converge vers la charge<img src="images/paste-001a83783b8dd4b04bb9bb0d44ca862c9303f523.jpg">|${PEM1}
10056|<span style="color: rgb(0, 255, 0);">(INC)</span><br>Deux charges \\(q_1, q_2\\) qui sont de signe diff√©rent interagissent entre elles. S'attirent-elles ou se repoussent-elles ? Pourquoi ?|Elles s'attirent. En effet, \\(q_1 q_2 < 0\\), donc la force d'interaction √©lectrostatique est attractive.|${PEM1}
10057|<span style="color: rgb(0, 255, 0);">(INC)</span><br>Deux charges \\(q_1, q_2\\) qui sont de m√™me signe interagissent entre elles. S'attirent-elles ou se repoussent-elles ? Pourquoi ?|Elles se repoussent. En effet, \\(q_1 q_2 > 0\\), donc la force d'interaction √©lectrostatique est r√©pulsive.|${PEM1}
10058|<span style="color: rgb(0, 255, 0);">(INC)</span><br>Comment s'appelle la constante \\(\\epsilon_0\\) dans la loi de Coulomb ?|C'est la permittivit√© du vide&nbsp;|${PEM1}
10059|<span style="color: rgb(0, 255, 0);">(INC)</span><br>Quand peut-on consid√©rer une distribution de charges comme surfacique ?|Une distribution de charges peut √™tre consid√©r√©e comme surfacique lorsque l'une de ses dimensions spatiales est beaucoup plus petite que les deux autres dimensions.|${PEM1}
10060|<span style="color: rgb(0, 255, 0);">(INC)</span><br>Quand peut-on consid√©rer une distribution de charges comme lin√©ique ?|Une distribution de charges peut √™tre consid√©r√©e comme lin√©ique lorsque deux de ses dimensions spatiales sont beaucoup plus petites que la troisi√®me dimension.|${PEM1}
10061|<img src="images/paste-de3005b71b3b26e6cbfb7bc7e487288057e44965.jpg">|<img src="images/paste-4e5b864acd14971b75ee4cfa20de066c86177c58.jpg">|${PEM1}
10062|<img src="images/paste-036e005e8785d46a0d662e7e88fa5533bfe23c98.jpg">|<img src="images/paste-75d5efd4f249c0e30de16f6754802351a3a09811.jpg">|${PEM1}
10063|<span style="color: rgb(0, 255, 0);">(A.R)</span> Quelle est la d√©finition de la circulation du champ √©lectrostatique \\(\\vec E\\) de \\(A\\) √† \\(B\\) le long de \\((\\Gamma)\\) ?<br>D√©pend-elle du chemin suivi \\((\\Gamma)\\) pour aller de A √† B?|\\[C_{A \\to B(\\Gamma)}=\\int_{A(\\Gamma)}^{B}{\\vec E \\cdot \\vec{dl} }\\]Cette circulation est ind√©pendante du chemin suivi car elle peut s'√©crire sous la forme de la variation d'une fonction qui est le potentiel √©lectrostatique :<br>\\(C_{A \\to B}=\\int_{A}^{B}{\\vec E \\cdot \\vec{dl} }=-(V_B-V_A) = V_A - V_B\\)|${PEM2}
10064|<span style="color: rgb(0, 255, 0);">(A.R)</span> Que vaut la circulation du champ √©lectrostatique le long d'un contour ferm√©? Justifier.|La <b>circulation</b> du champ √©lectrostatique entre un point \\(A\\) et \\(B\\) est <i>ind√©pendante du chemin parcouru</i>.<br>Si le chemin est ferm√©, B et A sont confondus donc \\(V_A=V_B\\) et la circulation du champ est <b>nulle</b> : \\[C_{A \\to A} = \\oint \\vec E \\cdot \\vec{dl} =-(V_A -V_A ) = 0\\]|${PEM2}
10065|<span style="color: rgb(255, 170, 0);">(A.R)</span> Quelle est la formule donnant le potentiel √©lectrostatique cr√©√© en un point \\(P\\) par une charge source \\(q\\) ?|Potentiel √©lectrostatique :<br>\\[V(P) = \\frac{1}{4\\pi \\varepsilon_0}\\frac{q}{r} + K\\]\\(r\\) : distance du point \\(P\\) par rapport √† la charge source<br>\\(q\\) : charge source<br>K : une constante d'int√©gration (souvent choisie nulle √† l'infini)|${PEM2}
10066|<span style="color: rgb(0, 255, 0);">(A.R)</span> Quelle est la forme des surfaces √©quipotentielles d'une charge ponctuelle ?|Ce sont des sph√®res dont le centre est la position de la charge ponctuelle.|${PEM2}
10067|<span style="color: rgb(255, 170, 0);">(A.R)</span> Comment √©volue le potentiel √©lectrostatique √† mesure que l'on s'√©loigne d'une charge ponctuelle ? Comment oriente-t-on les fl√®ches du champ √©lectrostatique sur un sch√©ma ?|Selon le signe de \\(q\\):<br><ul><li>Si \\(q > 0\\), le potentiel <b>d√©cro√Æt</b> lorsque l'on s'√©loigne de la charge.</li><li>Si \\(q < 0\\), le potentiel <b>cro√Æt</b> lorsque l'on s'√©loigne de la charge.</li></ul><br>Le champ √©lectrostatique est toujours orient√© dans le sens des <b>potentiels d√©croissants</b>.|${PEM2}
10068|<span style="color: rgb(255, 170, 0);">(A.R)</span> Quelle formule donne le potentiel √©lectrostatique cr√©√© par plusieurs charges ponctuelles en un point \\(P\\) ?|\\[V(P) = \\frac{1}{4 \\pi \\varepsilon_0}\\sum_i \\frac{q_i}{r_i}\\]<br>\\(q_i\\) : charge en Coulomb (C) de la \\(i\\)-√®me particule<br>\\(r_i\\) : distance entre la \\(i\\)-√®me particule et le point \\(P\\)<br><br>On choisit g√©n√©ralement la constante nulle, de sorte que \\(V \\to 0\\) lorsque \\(r_i \\to \\infty\\).|${PEM2}
10069|<span style="color: rgb(0, 255, 0);">(L.L)</span> Dans le rep√®re orthonorm√© \\((O, \\vec{u}_x, \\vec{u}_y, \\vec{u}_z)\\), donnez \\(df\\), puis \\(\\vec{grad}f\\) et enfin la relation entre les deux.|Diff√©rentielle : \\[df = \\frac{\\partial f}{\\partial x}dx + \\frac{\\partial f}{\\partial y}dy + \\frac{\\partial f}{\\partial z}dz\\]<br>Gradient : \\[\\vec{grad}f=\\frac{\\partial f}{\\partial x}\\vec{u}_x + \\frac{\\partial f}{\\partial y}\\vec{u}_y + \\frac{\\partial f}{\\partial z}\\vec{u}_z\\]<br>Relation : \\(df=\\vec{grad}f \\cdot d\\vec{l}\\)|${PEM2}
10070|<span style="color: rgb(0, 255, 0);">(L.L)</span> \\(\\vec{grad}f\\) est normal √† quelle surface ?|\\(\\vec{grad}f\\) est normal √† la surface d'√©quation \\(f(x,y,z) = cste\\).|${PEM2}
10071|<span style="color: rgb(255, 170, 0);">(L.L)</span> Quelle est la relation int√©grale liant le champ √©lectrostatique et le potentiel √©lectrostatique ?|\\[\\int_{A}^{B} \\vec{E} \\cdot d\\vec{l} = V_A - V_B\\]|${PEM2}
10072|<span style="color: rgb(255, 170, 0);">(L.L)</span> Quelle est la relation locale liant le champ √©lectrostatique et le potentiel √©lectrostatique ?|\\[\\vec{E} = -\\vec{grad} V\\]|${PEM2}
10073|<span style="color: rgb(255, 170, 0);">(L.L)</span> Comment retrouver la relation locale \\(\\vec{E} = -\\vec{grad}V\\) √† l'aide de la relation int√©grale associ√©e ?|La relation int√©grale \\(\\int_{A}^{B} \\vec{E} \\cdot d\\vec{l} = - (V_B - V_A)\\) est vraie pour un d√©placement √©l√©mentaire \\(d\\vec{l}\\) : \\(\\vec{E} \\cdot d\\vec{l} = -dV\\).<br>Par d√©finition du gradient, on a aussi \\(dV = \\vec{grad}V \\cdot d\\vec{l}\\).<br>En comparant les deux expressions, on obtient \\(\\vec{E} = -\\vec{grad}V\\).|${PEM2}
10074|<span style="color: rgb(255, 170, 0);">(C.J)</span> L'√©nergie potentielle √©lectrostatique \\(E_p\\) d'une charge \\(q_0\\) plac√©e dans un champ ext√©rieur \\(\\vec{E}\\) (qui d√©rive d'un potentiel \\(V\\)) v√©rifie la relation :|\\[E_p = q_0V\\]|${PEM2}
10075|<span style="color: rgb(255, 170, 0);">(C.J)</span> Comment passer de la relation \\(\\vec{E} = -\\vec{grad}V\\) √† la relation \\(\\vec{F} = -\\vec{grad}E_p\\) ?|On multiplie par la charge \\(q_0\\) :<br>\\(q_0\\vec{E} = -q_0\\vec{grad}V\\)<br>Comme \\(\\vec{F} = q_0\\vec{E}\\) et \\(E_p = q_0V\\), on obtient :<br>\\(\\vec{F} = -\\vec{grad}(E_p)\\)|${PEM2}
10076|<span style="color: rgb(0, 255, 0);">(C.J)</span> Quelle est l'unit√© du potentiel √©lectrostatique ?|Le volt (V).|${PEM2}
10077|<span style="color: rgb(0, 255, 0);">(C.J)</span> Quelle est l'unit√© du champ \\(\\vec{E}\\) ?|Le volt par m√®tre (\\(V \\cdot m^{-1}\\)).|${PEM2}
10078|<span style="color: rgb(0, 255, 0);">(C.J)</span> Dans quel sens sont orient√©es les lignes du champ √©lectrostatique ?|Dans le sens des potentiels d√©croissants.|${PEM2}
10079|<span style="color: rgb(0, 255, 0);">(C.J)</span> Comment sont orient√©es les lignes du champ √©lectrostatique par rapport aux surfaces √©quipotentielles ?|Elles sont orthogonales (perpendiculaires) aux surfaces √©quipotentielles.|${PEM2}
10080|<span style="color: rgb(0, 255, 0);">(T.B.)</span> Quelles sont les 5 √©tapes pour appliquer le th√©or√®me de Gauss ?|1. <b>Invariances et Sym√©tries</b> :<br>&nbsp;&nbsp;&nbsp;&nbsp;- Invariances ‚Üí choix des coordonn√©es et variables dont d√©pend \\(|\\vec{E}|\\).<br>&nbsp;&nbsp;&nbsp;&nbsp;- Sym√©tries ‚Üí direction de \\(\\vec{E}\\).<br>2. <b>Choix de la surface de Gauss (Sg)</b> :<br>&nbsp;&nbsp;&nbsp;&nbsp;- Doit √™tre ferm√©e.<br>&nbsp;&nbsp;&nbsp;&nbsp;- Id√©alement, \\(|\\vec{E}|\\) = cste sur une partie de Sg, et \\(\\vec{E} \\perp d\\vec{S}\\) sur le reste.<br>3. <b>Calcul du flux de \\(\\vec{E}\\)</b> √† travers Sg.<br>4. <b>Calcul de la charge int√©rieure \\(Q_{int}\\)</b> √† Sg.<br>5. <b>Application du th√©or√®me</b> : \\(\\Phi = Q_{int} / \\varepsilon_0\\).|${PE345}
10081|<span style="color: rgb(255, 170, 0);">Ylan</span><br>Soit une charge ponctuelle \\(q\\), et une surface ferm√©e \\(S\\) (Sph√®re de rayon \\(R\\), centr√©e sur \\(q\\)).<br>D√©terminer le flux du champ \\(\\vec{E}\\) cr√©√© par \\(q\\) √† travers \\(S\\).|\\[\\vec{E}(M \\in S) = \\frac{q}{4\\pi\\varepsilon_0R^2}\\vec{u_r}\\]Le flux est donn√© par :<br>\\[\\phi = \\unicode{x222F}_{S} \\vec{E} \\cdot d\\vec{S} = \\unicode{x222F}_{S} \\frac{q}{4\\pi\\varepsilon_0R^2}\\vec{u_r} \\cdot (dS \\cdot \\vec{u_r})\\] \\[= \\frac{q}{4\\pi\\varepsilon_0R^2} \\iint_S dS = \\frac{q}{4\\pi\\varepsilon_0R^2} (4\\pi R^2) = \\frac{q}{\\varepsilon_0}\\]|${PE345}
10082|<span style="color: rgb(255, 170, 0);">Ylan</span><br>√âtablir l‚Äôexpression du champ \\(\\vec{E}\\) cr√©√© en un point M par une distribution lin√©ique de charge \\(\\lambda\\) uniforme sur un fil rectiligne infini.|1. <b>Invariances & Sym√©tries</b> : \\(\\vec{E}(M) = E(r)\\vec{u_r}\\)<br>2. <b>Surface de Gauss</b> : Cylindre de rayon r et de hauteur h, ferm√© par deux disques.<br><img src="images/Capture d‚Äô√©cran 2023-11-12 172335.png"><br>3. <b>Calcul du flux</b> : \\(\\Phi = \\unicode{x222F}_{S_g} \\vec{E} \\cdot d\\vec{S} = E(r) \\cdot (2\\pi rh)\\)<br>4. <b>Charge int√©rieure</b> : \\(Q_{int} = \\lambda h\\)<br>5. <b>Th. de Gauss</b> : \\(E(r) \\cdot 2\\pi rh = \\frac{\\lambda h}{\\varepsilon_0}\\)<br><b>R√©sultat</b> : \\(\\vec{E}(M) = \\frac{\\lambda}{2\\pi r\\varepsilon_0} \\vec{u_r}\\|${PE345}
10083|<span style="color: rgb(255, 170, 0);">(Yuye)</span> Comment d√©finir le vecteur surface √©l√©mentaire \\(d\\vec{S}_M\\) ?|\\(d\\vec{S}_M\\) est un vecteur <b>normal</b> (perpendiculaire) √† la surface √©l√©mentaire \\(dS_M\\) au point M.<br><img src="images/IMG_20231115_205047.jpg"><br>Son orientation d√©pend du type de surface :<br>1. <b>Surface ouverte</b> : le sens est choisi arbitrairement (changer le sens change le signe du flux).<br>2. <b>Surface ferm√©e</b> : \\(d\\vec{S}_M\\) est toujours orient√© <b>vers l'ext√©rieur</b>.|${PE345}
10084|<span style="color: rgb(255, 170, 0);">(Yuye)</span> √ânoncer le th√©or√®me de Gauss pour une surface ferm√©e quelconque.|Le flux du champ √©lectrostatique \\(\\vec{E}\\) √† travers une surface ferm√©e \\(S_g\\) est √©gal √† la charge totale \\(Q_{int}\\) contenue √† l'int√©rieur de cette surface, divis√©e par la permittivit√© du vide \\(\\varepsilon_0\\) :<br>\\[\\Phi = \\unicode{x222F}_{S_g} \\vec{E}(M) \\cdot d\\vec{S}_M = \\frac{Q_{int}}{\\varepsilon_0}\\]|${PE345}
10085|<span style="color: rgb(255, 170, 0);">(Yuye)</span> √âtablir le champ cr√©√© par un cylindre infini de rayon \\(R\\), uniform√©ment charg√© en volume avec une densit√© \\(\\rho\\).|<img src="images/IMG_20231115_205047-9a9355bb58d3059ca8f62b4d7ffd956dab49ccab.jpg"><br>Par sym√©trie, \\(\\vec{E}(M) = E_r(r)\\vec{u_r}\\). On utilise une surface de Gauss cylindrique de rayon \\(r\\) et de hauteur \\(h\\).<br>Le flux vaut \\(\\Phi = E_r(r) \\cdot 2\\pi rh\\).<br><b>1er cas : \\(r < R\\)</b><br>\\(Q_{int} = \\rho (\\pi r^2 h)\\) \\(\\Rightarrow E_r(r) = \\frac{\\rho r}{2\\varepsilon_0}\\)<br><b>2√®me cas : \\(r > R\\)</b><br>\\(Q_{int} = \\rho (\\pi R^2 h)\\) \\(\\Rightarrow E_r(r) = \\frac{\\rho R^2}{2\\varepsilon_0 r}\\)<br><b>Graphe de \\(E_r(r)\\) :</b><br><img src="images/IMG_20231115_221031.jpg">|${PE345}
10086|<span style="color: rgb(255, 170, 0);">(Arthur)</span> Quel est le champ √©lectrostatique √† l'ext√©rieur d'un condensateur plan id√©al ?|Il est nul : \\(\\vec{E} = \\vec{0}\\).|${PE345}
10087|<span style="color: rgb(255, 170, 0);">(Manuel)</span> Quelle est la norme du champ √©lectrostatique entre les deux armatures d'un condensateur plan id√©al ?|\\[|\\vec{E}| = \\frac{\\sigma}{\\varepsilon_0} = \\frac{Q}{S\\varepsilon_0}\\]Avec :<br>‚Ä¢ \\(\\sigma\\) la valeur absolue de la densit√© surfacique de charge des armatures.<br>‚Ä¢ \\(Q\\) la valeur absolue de leur charge et \\(S\\) leur surface.<br>‚Ä¢ \\(\\varepsilon_0\\) la permittivit√© du vide.|${PE345}
10088|<span style="color: rgb(0, 255, 0);">Victor</span> D√©terminer le champ √©lectrostatique cr√©√© par un plan infini, de densit√© surfacique de charge \\(\\sigma\\) uniforme.<br><img src="images/plan-b84c87801652a62f616c58fbe3773f90809cb387.png">|Par sym√©trie, \\(\\vec{E}(M) = E_z(z)\\vec{u_z}\\).<br>On utilise une surface de Gauss en forme de cylindre (ou pav√©) traversant le plan.<br><img src="images/plan-e73174d5f9184eeeafc3dd30474a2ce6087c52f2.png"><br>Le flux ne traverse que les bases (surface \\(A\\)) : \\(\\Phi = 2 \\cdot E_z(z) \\cdot A\\).<br>La charge int√©rieure est \\(Q_{int} = \\sigma A\\).<br>Le th√©or√®me de Gauss donne \\(2 E_z(z) A = \\frac{\\sigma A}{\\varepsilon_0}\\), soit \\(E_z(z) = \\frac{\\sigma}{2\\varepsilon_0}\\).<br>Finalement :<br>‚Ä¢ Pour \\(z > 0\\) : \\(\\vec{E}(M) = \\frac{\\sigma}{2\\varepsilon_0} \\vec{u_z}\\)<br>‚Ä¢ Pour \\(z < 0\\) : \\(\\vec{E}(M) = -\\frac{\\sigma}{2\\varepsilon_0} \\vec{u_z}\\)|${PE345}
10089|<span style="color: rgb(255, 170, 0);">(Ilyass)</span> On consid√®re un condensateur cylindrique. Montrer que le champ √©lectrostatique en tout point est de la forme \\(\\vec{E}(M) = E(r)\\vec{u_r}\\).|1. <b>Invariance par rotation</b> autour de l'axe Oz.<br>2. <b>Invariance par translation</b> le long de l'axe Oz (si le condensateur est consid√©r√© comme infini).<br>Ces invariances impliquent que la norme de \\(\\vec{E}\\) ne d√©pend que de la distance radiale \\(r\\) : \\(|\\vec{E}| = E(r)\\).<br>3. <b>Sym√©trie</b> : Tout plan contenant l'axe Oz est un plan de sym√©trie, donc \\(\\vec{E}\\) est radial.<br><b>Bilan :</b> \\(\\vec{E}(M) = E(r)\\vec{u_r}\\).|${PE345}
10090|<span style="color: rgb(255, 170, 0);">Victor</span> D√©terminer le champ \\(\\vec{E}(M)\\) cr√©√© par un condensateur plan id√©al.<br><img src="images/Capture d‚Äô√©cran 2023-11-16 225353.jpg">|On utilise le <b>th√©or√®me de superposition</b> : \\(\\vec{E}(M) = \\vec{E}_{haut}(M) + \\vec{E}_{bas}(M)\\).<br>Le champ d'un plan infini est \\(|\\vec{E}_{plan}| = \\frac{|\\sigma|}{2\\varepsilon_0}\\).<br>‚Ä¢ <b>Entre les armatures (0 < z < e) :</b> Les deux champs s'additionnent :<br>\\(\\vec{E}(M) = -\\frac{\\sigma}{2\\varepsilon_0}\\vec{u_z} - \\frac{\\sigma}{2\\varepsilon_0}\\vec{u_z} = -\\frac{\\sigma}{\\varepsilon_0}\\vec{u_z}\\)<br>‚Ä¢ <b>√Ä l'ext√©rieur (z > e ou z < 0) :</b> Les deux champs se compensent :<br>\\(\\vec{E}(M) = \\vec{0}\\)|${PE345}
10091|<span style="color: rgb(255, 170, 0);">Victor</span> D√©terminer le potentiel √©lectrostatique \\(V(M)\\) pour un condensateur plan id√©al, avec \\(V=0\\) sur l'armature √† \\(z=0\\).<br><img src="images/Capture d‚Äô√©cran 2023-11-16 225353.jpg">|On utilise \\(\\vec{E} = -\\vec{grad}(V)\\). Comme \\(\\vec{E}\\) ne d√©pend que de z, \\(V\\) ne d√©pend que de z et \\(E_z = -\\frac{dV}{dz}\\).<br>‚Ä¢ <b>Pour \\(z < 0\\)</b> : \\(E_z=0 \\Rightarrow V(z) = C_1\\). Comme \\(V(0)=0\\), alors \\(C_1=0\\). \\(V=0\\).<br>‚Ä¢ <b>Pour \\(0 < z < e\\)</b> : \\(E_z=-\\frac{\\sigma}{\\varepsilon_0} \\Rightarrow \\frac{dV}{dz} = \\frac{\\sigma}{\\varepsilon_0}\\). En int√©grant, \\(V(z) = \\frac{\\sigma}{\\varepsilon_0}z + C_2\\). Avec \\(V(0)=0\\), on a \\(C_2=0\\). Soit \\(V(z) = \\frac{\\sigma}{\\varepsilon_0}z\\).<br>‚Ä¢ <b>Pour \\(z > e\\)</b> : \\(E_z=0 \\Rightarrow V(z) = C_3\\). Par continuit√© en \\(z=e\\), \\(C_3 = V(e) = \\frac{\\sigma e}{\\varepsilon_0}\\).<br><b>Bilan :</b> \\(V(z) = 0\\) si \\(z<0\\), \\(\\frac{\\sigma z}{\\varepsilon_0}\\) si \\(0<z<e\\), et \\(\\frac{\\sigma e}{\\varepsilon_0}\\) si \\(z>e\\).|${PE345}
10092|<span style="color: rgb(0, 255, 0);">(Oc√©ane)</span> Cette figure repr√©sente les lignes √©quipotentielles. Donner l'allure des lignes de champ.<br><img src="images/im3.jpg">|<img src="images/im1.jpg">|${PE345}
10093|<span style="color: rgb(255, 170, 0);">(Daouda)</span> Dans un tube de champ vide de charge, d√©montrer l'√©galit√© \\(E_1 S_1 = E_2 S_2\\). En d√©duire que l√† o√π les lignes de champ se resserrent, le champ est plus intense.|<img src="images/paste-c8c9585695c583cd76823e76b283fed4d0b34b2c.jpg"><br>On applique le th√©or√®me de Gauss √† la surface ferm√©e du tube. Le flux √† travers la surface lat√©rale est nul. Le flux total est \\(\\Phi = -E_1 S_1 + E_2 S_2\\).<br>Comme il n'y a pas de charge √† l'int√©rieur (\\(Q_{int}=0\\)), le flux total est nul.<br>Donc \\(-E_1 S_1 + E_2 S_2 = 0 \\Rightarrow E_1 S_1 = E_2 S_2\\).<br>Cette relation de conservation du flux montre que si la section \\(S\\) diminue (les lignes se resserrent), le champ \\(E\\) doit augmenter.|${PE345}
10094|<span style="color: rgb(255, 170, 0);">(Vincent)</span> Tableau des analogies entre gravitation et √©lectrostatique.|<img src="images/paste-8274af54e4ef8158c9147e47a8c1d6073f3a1f0a.jpg">|${PE345}
10095|<span style="color: rgb(255, 170, 0);">V.Iulian</span><br>Calculer la circulation de \\(\\vec{B}\\) le long du contour (E,F,G,H) pour un sol√©no√Øde infini.<br><img src="images/img7045909058837530815.jpg">|La circulation est \\(\\oint \\vec{B}\\cdot d\\vec{l} = \\int_E^F + \\int_F^G + \\int_G^H + \\int_H^E\\).<br>‚Ä¢ \\(\\int_F^G \\vec{B}\\cdot d\\vec{l} = 0\\) et \\(\\int_H^E \\vec{B}\\cdot d\\vec{l} = 0\\) car \\(\\vec{B} \\perp d\\vec{l}\\).<br>‚Ä¢ \\(\\int_G^H \\vec{B}\\cdot d\\vec{l} = 0\\) car \\(\\vec{B} = \\vec{0}\\) √† l'ext√©rieur.<br>‚Ä¢ Il ne reste que le segment (E,F) :<br>\\(\\oint \\vec{B}\\cdot d\\vec{l} = \\int_E^F B(r) \\vec{u_z} \\cdot (dz \\vec{u_z}) = B(r) \\cdot h\\)<br>En appliquant le th√©or√®me d'Amp√®re (voir image), on trouve le champ √† l'int√©rieur du sol√©no√Øde.<br><img src="images/paste-e349a260a12b99bdc732b3868f7f557cb6dda0ea.jpg">|${PEM6}
10096|<span style="color: rgb(255, 170, 0);">V.Iulian</span><br>Pour deux spires identiques parcourues par le m√™me courant (bobines de Helmholtz), r√©pondre aux questions.<br><img src="images/img2498669175369567868.jpg">|1) <b>Allure des lignes de champ :</b><br><img src="images/paste-ee06f45381f644b5348501214aa8bf553c0ae70b.jpg"><br>2) <b>Sym√©trie (m√™me sens de courant) :</b> Le plan m√©dian est un plan de <b>sym√©trie</b> pour les courants, donc un plan d'<b>antisym√©trie</b> pour \\(\\vec{B}\\). Les lignes de champ coupent ce plan orthogonalement.<br>3) <b>Int√©r√™t :</b> Obtenir une zone o√π le champ magn√©tique est quasi <b>uniforme</b>.<br>4) <b>Sym√©trie (sens oppos√©s) :</b> Le plan m√©dian devient un plan d'<b>antisym√©trie</b> pour les courants, donc un plan de <b>sym√©trie</b> pour \\(\\vec{B}\\). Les lignes de champ sont contenues dans ce plan.<br><img src="images/paste-911334ecc07bc5a2c3f229921025f3087e0a090f.jpg">|${PEM6}
10097|<span style="color: rgb(255, 170, 0);">(A.P)</span> Analyser la carte de champ magn√©tique de deux fils parall√®les.<br><img src="images/20231127_205031.jpg">|1) <b>Lignes de champ :</b> Ce sont des cercles concentriques autour des fils.<br>2) <b>Position des fils :</b> Au centre des plus petits cercles.<br>3) <b>Intensit√© :</b> Le champ est le plus intense l√† o√π les lignes sont les plus resserr√©es (entre les deux fils).<br>4) <b>Signe des courants :</b> Le plan m√©dian est un plan de sym√©trie pour \\(\\vec{B}\\) (les lignes y sont contenues), donc un plan d'antisym√©trie pour les courants. Les courants sont donc de <b>signes oppos√©s</b>.<br>5) <b>Autre possibilit√© :</b> Inverser les deux courants ET le sens des lignes de champ.<br>6) <b>Cas de courants de m√™me signe :</b><br><img src="images/paste-8c5f8f95d90ce3a0ee2536285b9588e66db63e68.jpg">|${PEM6}
10098|<span style="color: #cccc00;">(M.W)</span> Commenter les sym√©tries pour une distribution de courant et le champ magn√©tique \\(\\vec{B}\\) qu'elle cr√©e.|Les r√®gles de sym√©trie sont invers√©es entre les courants (causes) et le champ \\(\\vec{B}\\) (effet) :<br>‚Ä¢ Un <b>plan de sym√©trie</b> des courants est un <b>plan d'antisym√©trie</b> pour \\(\\vec{B}\\). En un point M de ce plan, \\(\\vec{B}\\) est <b>orthogonal</b> au plan.<br>‚Ä¢ Un <b>plan d'antisym√©trie</b> des courants est un <b>plan de sym√©trie</b> pour \\(\\vec{B}\\). En un point M de ce plan, \\(\\vec{B}\\) est <b>contenu</b> dans le plan.|${PEM6}
10099|<span style="color: #cccc00;">(M.W)</span> Interpr√©ter le cas o√π les lignes d'un champ magn√©tique se resserrent.|L√† o√π les lignes de champ se resserrent, le champ magn√©tique est plus intense.|${PEM6}
10100|<span style="color: rgb(255, 170, 0);">(BM)</span> Donner l'expression de la circulation du champ \\(\\vec{B}\\) le long d'un contour ferm√© \\(\\Gamma\\).|La circulation C est l'int√©grale curviligne de \\(\\vec{B}\\) le long du contour ferm√© \\(\\Gamma\\) :<br>\\[C = \\oint_{\\Gamma}\\vec{B}\\cdot d\\vec{l}\\]|${PEM6}
10101|<span style="color: rgb(255, 170, 0);">(BM)</span> √ânonc√© du th√©or√®me d'Amp√®re.|La circulation du champ magn√©tique \\(\\vec{B}\\) le long d'un <b>contour ferm√© et orient√©</b> \\(\\Gamma\\) (contour d'Amp√®re) est √©gale au produit de \\(\\mu_0\\) par l'intensit√© alg√©brique totale \\(I_{enlac√©e}\\) qui traverse n'importe quelle surface s'appuyant sur ce contour.<br>\\[\\oint_{\\Gamma}\\vec{B}\\cdot d\\vec{l} = \\mu_0 I_{enlac√©e}\\]|${PEM6}
10102|<span style="color: rgb(255, 170, 0);">(BM)</span> Quelle est l'expression de l'intensit√© enlac√©e pour une distribution <b>volumique</b> de courant ?|Elle est donn√©e par le flux du vecteur densit√© de courant \\(\\vec{j}\\) √† travers une surface S s'appuyant sur le contour \\(\\Gamma\\).<br>\\[I_{enlac√©e} = \\iint_{S}\\vec{j}\\cdot d\\vec{S}\\]L'orientation de \\(d\\vec{S}\\) est li√©e √† celle du contour \\(\\Gamma\\) par la r√®gle de la main droite.|${PEM6}
10103|<span style="color: rgb(255, 170, 0);">(BM)</span> Quelle est l'expression de l'intensit√© enlac√©e pour des courants <b>filiformes</b> ?|C'est la somme alg√©brique des intensit√©s \\(I_k\\) des courants qui traversent le contour.<br>\\[I_{enlac√©e} = \\sum_{k} \\epsilon_k I_k\\]o√π \\(\\epsilon_k = +1\\) si le courant traverse la surface dans le m√™me sens que la normale \\(\\vec{n}\\) (d√©finie par la main droite), et \\(\\epsilon_k = -1\\) sinon.|${PEM6}
10104|<span style="color: rgb(255, 170, 0);">(BM)</span> √âtapes de la m√©thode de calcul de \\(\\vec{B}(M)\\) par le th√©or√®me d'Amp√®re.|1. √âtude des <b>invariances et sym√©tries</b> de \\(\\vec{B}\\) pour d√©terminer sa direction et ses d√©pendances.<br>2. Choix d'un <b>contour d'Amp√®re</b> \\(\\Gamma\\) adapt√© : une ligne de champ o√π \\(|\\vec{B}|\\) est constant.<br>3. Si n√©cessaire, compl√©ter \\(\\Gamma\\) avec des segments o√π \\(\\vec{B} \\perp d\\vec{l}\\) ou \\(\\vec{B} = \\vec{0}\\).<br>4. <b>Orienter</b> le contour sur le sch√©ma.<br>5. Calculer la <b>circulation</b> \\(\\oint \\vec{B} \\cdot d\\vec{l}\\).<br>6. Calculer l'<b>intensit√© enlac√©e</b> \\(I_{enlac√©e}\\).<br>7. Appliquer le th√©or√®me pour trouver \\(\\vec{B}\\).|${PEM6}
10105|<span style="color: rgb(255, 170, 0);">(BM)</span> Que vaut le flux du champ magn√©tique √† travers une surface <b>ferm√©e</b> ?|Il est toujours <b>nul</b>. C'est une des √©quations de Maxwell.<br>\\[\\Phi = \\unicode{x222F}_{S_{ferm√©e}} \\vec{B} \\cdot d\\vec{S} = 0\\]On dit que le champ \\(\\vec{B}\\) est √† flux conservatif.|${PEM6}
10106|<span style="color: rgb(255, 170, 0);">(BM)</span> Ordre de grandeur du champ magn√©tique terrestre.|Environ \\(5 \\times 10^{-5} \\; T\\) (ou 50 ¬µT).|${PEM6}
10107|<span style="color: rgb(255, 170, 0);">(BM)</span> Ordre de grandeur du champ √† 1 cm d‚Äôun fil rectiligne parcouru par 10 A.|Environ \\(2 \\times 10^{-4} \\; T\\) (ou 200 ¬µT).|${PEM6}
10108|<span style="color: rgb(0, 255, 0);">(BM)</span> Ordre de grandeur du champ √† 1 mm d‚Äôun aimant permanent au n√©odyme.|De 0,1 T √† 1 T.|${PEM6}
10109|<span style="color: rgb(0, 255, 0);">(BM)</span> Ordre de grandeur du champ magn√©tique d'un √©lectroaimant de laboratoire.|De 1 T √† 10 T (voire plus pour les √©lectroaimants supraconducteurs).|${PEM6}
10110|<span style="color: rgb(255, 170, 0);">(S.E)</span> Appliquer le th√©or√®me d'Amp√®re pour un fil infini.<br><img src="images/paste-214e83666ae763236aea7c77a43581a64232fe68.jpg">|<img src="images/paste-7edb2b9f50f23eac4176399c3ea5d9a799a4afd8.jpg">|${PEM6}
10111|<span style="color: rgb(255, 170, 0);">(S.E)</span> Appliquer le th√©or√®me d'Amp√®re pour un sol√©no√Øde infini.<br><img src="images/paste-fa84d71882fccd01306a9563169c424e60dbdf56.jpg">|<img src="images/paste-ed68266b1711dc9559d0ae00bb0133c98c544ddd.jpg">|${PEM6}
10112|<span style="color: rgb(0, 255, 0);">(M.B.T.)</span> Exprimer la formule du moment magn√©tique d'un circuit filiforme plan, parcouru par un courant d'intensit√© \\(I\\). Pr√©ciser les termes et l'unit√©.|Le moment magn√©tique \\(\\vec{\\mathcal{M}}\\) est d√©fini par :<br>\\[\\vec{\\mathcal{M}} = I\\vec{S} = IS\\vec{n}\\]o√π :<br>‚Ä¢ \\(I\\) est l'intensit√© du courant.<br>‚Ä¢ \\(S\\) est l'aire de la surface d√©limit√©e par la boucle de courant.<br>‚Ä¢ \\(\\vec{n}\\) est le vecteur unitaire normal √† la surface, orient√© selon la r√®gle de la main droite.<br><img src="images/IMG_825B15755F55-1.jpeg" width="433"><br>L'unit√© du moment magn√©tique est l'<b>amp√®re-m√®tre carr√©</b> (\\(A \\cdot m^2\\)).|${PEM8}
10113|<span style="color: rgb(0, 255, 0);">(M.B.T)</span> Dans quelles conditions peut-on parler d'un dip√¥le magn√©tique pour une source de champ magn√©tique ?|Une source de champ magn√©tique est un <u>dip√¥le magn√©tique</u> si :<br>1. Elle peut √™tre mod√©lis√©e par une boucle de courant de moment magn√©tique non nul \\(\\vec{\\mathcal{M}}\\).<br>2. On observe le champ √† une distance \\(r\\) tr√®s grande devant la taille caract√©ristique \\(a\\) de la source (<b>approximation dipolaire</b> : \\(r \\gg a\\)).|${PEM8}
10114|<span style="color: rgb(0, 255, 0);">(A.R.)</span> Repr√©senter les lignes de champ d'un dip√¥le magn√©tique.|Les lignes de champ d'un dip√¥le magn√©tique ressemblent √† celles d'un petit aimant droit.<br><img src="images/cartechamps-1.png">|${PEM8}
10115|<span style="color: rgb(255, 170, 0);">(A.R)</span> D√©crire qualitativement l'action d'un champ magn√©tique ext√©rieur sur un dip√¥le magn√©tique.|‚Ä¢ <b>Champ magn√©tique uniforme :</b> Le dip√¥le subit un couple qui tend √† l'<b>orienter</b> parall√®lement aux lignes de champ (comme l'aiguille d'une boussole). La force r√©sultante est nulle.<br>‚Ä¢ <b>Champ magn√©tique non uniforme :</b> Le dip√¥le subit un couple d'orientation ET une force nette qui l'<b>attire</b> vers les zones de champ magn√©tique <b>intense</b>.|${PEM8}
10116|Quelle est l'expression de l'√©nergie potentielle d'un dip√¥le de moment magn√©tique \\(\\vec{m}\\) plac√© dans un champ magn√©tique ext√©rieur \\(\\vec{B}_{ext}\\) ?|L'√©nergie potentielle d'interaction est :<br>\\[E_p = -\\vec{m} \\cdot \\vec{B}_{ext}\\]Cette √©nergie est minimale (position stable) lorsque \\(\\vec{m}\\) est align√© avec \\(\\vec{B}_{ext}\\).|${PEM8}
10117|Si l'on assimile la Terre √† un dip√¥le magn√©tique situ√© en son centre, quelle est l'orientation de son moment magn√©tique ? Et celle des lignes de champ aux p√¥les ?|Le moment magn√©tique terrestre \\(\\vec{m}_T\\) est dirig√© approximativement du p√¥le <b>Nord g√©ographique</b> vers le p√¥le <b>Sud g√©ographique</b>.<br>Par cons√©quent, les lignes de champ magn√©tique terrestre "sortent" du p√¥le Sud g√©ographique pour "entrer" au p√¥le Nord g√©ographique (car le p√¥le Nord g√©ographique est un p√¥le sud magn√©tique).|${PEM8}
10118|<span style="color: rgb(255, 170, 0);">Ylan</span> Qu'est-ce qu'un doublet de charges ?|Un doublet de charges est un ensemble de deux charges oppos√©es, \\(+q\\) en un point P et \\(-q\\) en un point N, s√©par√©es par une distance \\(a = PN\\).<br>Il est caract√©ris√© par son <b>moment dipolaire</b> : \\(\\vec{p}=q\\overrightarrow{NP}\\).|${PEM9}
10119|<span style="color: rgb(255, 170, 0);">Ylan</span> D√©finition du moment dipolaire et unit√© ?|Le moment dipolaire \\(\\vec{p}\\) d'une distribution de charges est d√©fini par \\(\\vec{p} = q\\overrightarrow{NP}\\), o√π :<br>‚Ä¢ N est le barycentre des charges n√©gatives.<br>‚Ä¢ P est le barycentre des charges positives.<br>‚Ä¢ \\(q\\) est la somme des charges positives.<br>Ce vecteur est dirig√© de la charge n√©gative vers la positive. Son unit√© est le <b>Coulomb-m√®tre (C¬∑m)</b> ou le <b>Debye (D)</b>.|${PEM9}
10120|<span style="color: rgb(255, 170, 0);">Ylan</span> Quel est le cadre de l'approximation dipolaire ?|<img src="images/Capture d'√©cran 2024-01-01 182539.png"><br>L'approximation dipolaire consiste √† √©tudier les propri√©t√©s d'un dip√¥le √©lectrostatique "loin" de celui-ci, c'est-√†-dire √† une distance \\(r = OM\\) tr√®s grande devant la taille \\(a\\) du dip√¥le : \\(r \\gg a\\).|${PEM9}
10121|<span style="color: rgb(255, 170, 0);">Victor</span> Quelle est l'√©nergie potentielle \\(E_p\\) d'un dip√¥le √©lectrique <u>rigide</u> de moment dipolaire \\(\\vec{p}\\), plac√© dans un champ ext√©rieur \\(\\vec{E}_{ext}\\) ?|L'√©nergie potentielle d'interaction est : \\(E_p = -\\vec{p} \\cdot \\vec{E}_{ext}\\)|${PEM9}
10122|<span style="color: rgb(0, 255, 0);">Ylan</span> Le potentiel et le champ √©lectrostatique d√©croissent-ils plus ou moins vite avec la distance pour un dip√¥le que pour une charge ponctuelle ?|Pour les deux, la d√©croissance est <b>plus rapide</b> pour un dip√¥le :<br>‚Ä¢ <b>Potentiel (V) :</b> varie en \\(1/r^2\\) pour un dip√¥le, contre \\(1/r\\) pour une charge ponctuelle.<br>‚Ä¢ <b>Champ (E) :</b> varie en \\(1/r^3\\) pour un dip√¥le, contre \\(1/r^2\\) pour une charge ponctuelle.|${PEM9}
10123|<span style="color: rgb(255, 170, 0);">Ylan</span> Retrouver l'expression du potentiel cr√©√© par un dip√¥le (doublet de charges).|\(V(M) = V_P(M) + V_N(M) = \\frac{q}{4\\pi\\epsilon_0}(\\frac{1}{PM} - \\frac{1}{NM})\\)<br>Dans l'approximation dipolaire (\\(r \\gg a\\)), on effectue un d√©veloppement limit√© de \\(1/PM\\) et \\(1/NM\\) :<br>\\(\\frac{1}{PM} \\approx \\frac{1}{r}(1 + \\frac{a}{2r}\\cos\\theta)\\) et \\(\\frac{1}{NM} \\approx \\frac{1}{r}(1 - \\frac{a}{2r}\\cos\\theta)\\)<br>En injectant ces expressions, on obtient :<br>\\[V(M) = \\frac{qa\\cos\\theta}{4\\pi\\epsilon_0 r^2} = \\frac{p\\cos\\theta}{4\\pi\\epsilon_0 r^2}\\]o√π \\(p = qa\\).<br>Avec la notation vectorielle : \\(V(M) = \\frac{\\vec{p} \\cdot \\vec{u_r}}{4\\pi\\epsilon_0 r^2}\\).<br><img src="images/Capture d'√©cran 2024-01-01 182539.png">|${PEM9}
10124|<span style="color: rgb(0, 255, 0);">Victor</span> Qu'est-ce qu'un dip√¥le √©lectrostatique <u>rigide</u> ?|C'est un dip√¥le dont la norme de son moment dipolaire \\(|\\vec{p}|\\) est constante. La distance entre les charges ne varie pas.|${PEM9}
10125|<span style="color: rgb(255, 170, 0);">Victor</span> Que vaut la r√©sultante des forces subies par un dip√¥le dans un champ √©lectrostatique ext√©rieur \\(\\vec{E}_{ext}\\) <b>uniforme</b> ?|La r√©sultante des forces est <b>nulle</b>. Le dip√¥le ne subit qu'un couple qui tend √† l'orienter.|${PEM9}
10126|<span style="color: rgb(255, 170, 0);">Ylan</span> √âtablir le champ √©lectrostatique cr√©√© par un dip√¥le, connaissant son potentiel \\(V(M) = \\frac{p\\cos\\theta}{4\\pi\\epsilon_0 r^2}\\).|On utilise la relation \\(\\vec{E} = -\\vec{grad}(V)\\). En coordonn√©es sph√©riques :<br>\\(E_r = -\\frac{\\partial V}{\\partial r} = \\frac{2p\\cos\\theta}{4\\pi\\epsilon_0 r^3}\\)<br>\\(E_\\theta = -\\frac{1}{r}\\frac{\\partial V}{\\partial \\theta} = \\frac{p\\sin\\theta}{4\\pi\\epsilon_0 r^3}\\)<br>\\(E_\\varphi = 0\\)<br>Le champ total est : \\(\\vec{E} = \\frac{p}{4\\pi\\epsilon_0 r^3} (2\\cos\\theta \\vec{u_r} + \\sin\\theta \\vec{u_\\theta})\\)|${PEM9}
10127|<span style="color: rgb(255, 170, 0);">Victor</span> Comment agit un champ √©lectrostatique ext√©rieur <b>uniforme</b> sur un dip√¥le √©lectrostatique ?|Le dip√¥le subit un couple qui tend √† l'<b>orienter</b> parall√®lement aux lignes de champ de \\(\\vec{E}_{ext}\\). Il n'y a pas de d√©placement net.|${PEM9}
10128|<span style="color: rgb(0, 255, 0);">Ylan</span> Repr√©senter les lignes de champ et les courbes √©quipotentielles du champ cr√©√© par un dip√¥le √©lectrostatique.|<div style="text-align: center;"><img src="images/paste-f94a6b6040693dd84af9aa136b7c19529ad0bf87.jpg"></div><div style="text-align: center;">Les courbes non orient√©es sont les √©quipotentielles.<br>Les courbes orient√©es sont les lignes de champ (du + vers le -).</div>|${PEM9}
10129|<span style="color: rgb(0, 255, 0);">(Yuye)</span> Qu'est-ce qu'un moment dipolaire mol√©culaire ?|Bien que globalement neutres, certaines mol√©cules (dites "polaires") sont dissym√©triques. Le barycentre de leurs charges positives n'est pas confondu avec celui de leurs charges n√©gatives. Cette s√©paration permanente des charges cr√©e un <b>moment dipolaire permanent</b>.<br><img src="images/0.png">|${PEM9}
10130|<span style="color: rgb(255, 170, 0);">Victor</span> Comment agit un champ √©lectrostatique <b>non uniforme</b> sur un dip√¥le √©lectrostatique ?|Le dip√¥le subit deux effets :<br>1. <b>Effet d'orientation :</b> Un couple qui tend √† l'aligner avec le champ \\(\\vec{E}_{ext}\\).<br>2. <b>Effet de d√©placement :</b> Une force nette qui l'attire vers les zones o√π le champ \\(\\vec{E}_{ext}\\) est le plus <b>intense</b>.|${PEM9}
10131|<span style="color: rgb(255, 170, 0);">(Yuye)</span> Quelle est la force exerc√©e par un ion \\(Na^+\\) sur une mol√©cule d'eau (dip√¥le) situ√©e √† une distance z ?|L'ion \\(Na^+\\) cr√©e un champ \\(\\vec{E}_{ext} = \\frac{e}{4\\pi\\epsilon_0 z^2}\\vec{u_z}\\).<br>1. <b>Orientation :</b> Le dip√¥le de la mol√©cule d'eau s'oriente selon \\(\\vec{u_z}\\) (\\(\\vec{p} = p\\vec{u_z}\\)).<br>2. <b>Force :</b> La force subie par le dip√¥le dans ce champ non uniforme est \\(\\vec{F} = \\vec{grad}(\\vec{p} \\cdot \\vec{E}_{ext}) = p \\frac{dE_{ext}}{dz}\\vec{u_z}\\).<br>\\[\\vec{F} = -\\frac{2pe}{4\\pi\\epsilon_0 z^3}\\vec{u_z}\\]La force est attractive : la mol√©cule d'eau est attir√©e par l'ion.<br><img src="images/0-067d29de6397b7932ac10e579ca73727b1f13e21.png">|${PEM9}
10132|<span style="color: rgb(0, 255, 0);">(Yuye)</span> Qu'est-ce qu'un dip√¥le induit ?|Lorsqu'un atome ou une mol√©cule (m√™me non polaire) est plac√© dans un champ √©lectrique ext√©rieur, les charges positives et n√©gatives sont d√©plac√©es en sens oppos√©s. Cette s√©paration des barycentres des charges cr√©e un <b>moment dipolaire "induit"</b>, qui n'existe qu'en pr√©sence du champ.|${PEM9}
10133|√âtablir l'expression du moment r√©sultant \\(\\vec{\\Gamma}\\) (couple) subi par un doublet de charges dans un champ \\(\\vec{E}_{ext}\\) uniforme.|\\[\\vec{\\Gamma} = \\vec{M}_O(\\vec{F}_P) + \\vec{M}_O(\\vec{F}_N)\\]\\[= \\vec{OP} \\wedge (q\\vec{E}_{ext}) + \\vec{ON} \\wedge (-q\\vec{E}_{ext})\\]\\[= q(\\vec{OP} - \\vec{ON}) \\wedge \\vec{E}_{ext}\\]\\[= q\\overrightarrow{NP} \\wedge \\vec{E}_{ext}\\]\\[\\vec{\\Gamma} = \\vec{p} \\wedge \\vec{E}_{ext}\\]|${PEM9}
10134|<span style="color: rgb(0, 255, 0);">(Daouda Cisse)</span> Quelle est la forme g√©n√©rale (locale) des √©quations de Maxwell ?|Les quatre √©quations de Maxwell sont :<br><img src="images/e1.PNG">|${PEM10}
10135|<span style="color: rgb(0, 255, 0);">(Daouda Cisse)</span> Rappeler l'expression, dans le cas g√©n√©ral, de l'√©quation de conservation de la charge.|L'√©quation locale de conservation de la charge √©lectrique s'√©crit :<br><img src="images/e2.PNG">|${PEM10}
10136|<span style="color: rgb(0, 255, 0);">(Daouda Cisse)</span> D√©montrer, dans le cas unidimensionnel, l'√©quation de conservation de la charge.<br><img src="images/e3.PNG">|<img src="images/e4.PNG"><br><img src="images/e5.PNG"><br>On obtient finalement :<br><img src="images/e6.PNG">|${PEM10}
10137|<span style="color: rgb(0, 255, 0);">(Oceane Arabi)</span> Quelle est la relation entre la permittivit√© di√©lectrique du vide (\\(\\varepsilon_0\\)), la perm√©abilit√© magn√©tique du vide (\\(\\mu_0\\)) et la c√©l√©rit√© de la lumi√®re (c) ?|Ces trois constantes fondamentales sont li√©es par la relation :<br><img src="images/e7.PNG">|${PEM10}
10138|<span style="color: rgb(255, 170, 0);">(Daouda Cisse)</span> Quelle est la forme int√©grale de l'√©quation de Maxwell-Gauss ?|C'est le <b>th√©or√®me de Gauss</b> pour le champ √©lectrique : le flux de \\(\\vec{E}\\) √† travers une surface ferm√©e \\(S_g\\) est proportionnel √† la charge \\(Q_{int}\\) qu'elle contient.<br>\\[\\Phi_E = \\unicode{x222F}_{S_g} \\vec{E} \\cdot d\\vec{S} = \\frac{Q_{int}}{\\varepsilon_0}\\]|${PEM10}
10139|<span style="color: rgb(255, 170, 0);">(Marion Vincent)</span> Quelle est la relation int√©grale associ√©e √† l'√©quation de Maxwell-Flux ?|C'est la conservation du flux magn√©tique : le flux du champ \\(\\vec{B}\\) √† travers <b>toute surface ferm√©e</b> est nul.<br>\\[\\unicode{x222F}_{S_{ferm√©e}} \\vec{B} \\cdot d\\vec{S} = 0\\]<br><img src="images/e9.PNG">|${PEM10}
10140|<span style="color: rgb(255, 170, 0);">(Marion Vincent)</span> Quelle est la relation int√©grale de l'√©quation de Maxwell-Faraday ?|C'est la <b>loi de Faraday</b> sur l'induction : la circulation de \\(\\vec{E}\\) le long d'un contour ferm√© \\(\\Gamma\\) est √©gale √† l'oppos√© de la d√©riv√©e temporelle du flux magn√©tique \\(\\Phi_B\\) √† travers une surface s'appuyant sur ce contour.<br>\\[\\oint_{\\Gamma} \\vec{E} \\cdot d\\vec{l} = -\\frac{d\\Phi_B}{dt}\\]|${PEM10}
10141|<span style="color: rgb(255, 170, 0);">(Oceane Arabi)</span> Quelle est la relation int√©grale de l'√©quation de Maxwell-Amp√®re ?|C'est le <b>th√©or√®me d'Amp√®re g√©n√©ralis√©</b> : la circulation de \\(\\vec{B}\\) le long d'un contour ferm√© \\(\\Gamma\\) est √©gale √† la somme du courant enlac√© et du courant de d√©placement.<br>\\[\\oint_{\\Gamma} \\vec{B} \\cdot d\\vec{l} = \\mu_0 I_{enlac√©} + \\varepsilon_0 \\mu_0 \\frac{d}{dt} \\iint_{S} \\vec{E} \\cdot d\\vec{S}\\]|${PEM10}
10142|<span style="color: rgb(0, 255, 0);">(Oceane Arabi)</span> Dans une r√©gion vide de charge (\\(\\rho=0\\)) et de courant (\\(\\vec{j}=\\vec{0}\\)), que deviennent les √©quations de Maxwell ?|Les √©quations de Maxwell dans le vide s'√©crivent :<br><img src="images/e12.PNG">|${PEM10}
10143|<span style="color: rgb(0, 255, 0);">(Marion Vincent)</span> Dans le cas du r√©gime stationnaire (d√©riv√©es temporelles nulles), que deviennent les √©quations de Maxwell ?|Les √©quations de l'√©lectrostatique et de la magn√©tostatique sont d√©coupl√©es :<br><img src="images/e13.PNG">|${PEM10}
10144|<span style="color: rgb(255, 170, 0);">(Daouda Cisse)</span> Comment retrouve-t-on l'√©quation de d'Alembert pour \\(\\vec{E}\\) dans une r√©gion vide de charge et de courant ?|On applique le rotationnel √† l'√©quation de Maxwell-Faraday : \\(\\vec{rot}(\\vec{rot} \\vec{E}) = -\\frac{\\partial}{\\partial t}(\\vec{rot} \\vec{B})\\).<br>On utilise l'identit√© \\(\\vec{rot}(\\vec{rot} \\vec{E}) = \\vec{grad}(div \\vec{E}) - \\Delta \\vec{E}\\).<br>Dans le vide, \\(div \\vec{E} = 0\\) et \\(\\vec{rot} \\vec{B} = \\varepsilon_0 \\mu_0 \\frac{\\partial \\vec{E}}{\\partial t}\\).<br>On obtient : \\(-\\Delta \\vec{E} = -\\varepsilon_0 \\mu_0 \\frac{\\partial^2 \\vec{E}}{\\partial t^2}\\).<br>Soit l'√©quation d'onde : \\(\\Delta \\vec{E} - \\frac{1}{c^2} \\frac{\\partial^2 \\vec{E}}{\\partial t^2} = \\vec{0}\\).|${PEM10}
10145|<span style="color: rgb(0, 255, 0);">(Oceane Arabi)</span> Qu'est-ce que l'√©quation de Poisson (r√©gime stationnaire) et comment la retrouve-t-on ?|L'√©quation de Poisson relie le potentiel V √† la densit√© de charge \\(\\rho\\).<br>On part de Maxwell-Gauss : \\(div \\vec{E} = \\frac{\\rho}{\\varepsilon_0}\\).<br>On utilise la relation \\(\\vec{E} = -\\vec{grad}V\\).<br>On obtient \\(div(-\\vec{grad}V) = \\frac{\\rho}{\\varepsilon_0}\\).<br>Comme \\(div(\\vec{grad}V) = \\Delta V\\), on a :<br>\\[\\Delta V = -\\frac{\\rho}{\\varepsilon_0}\\]<img src="images/e18.PNG">|${PEM10}
10146|<span style="color: rgb(255, 170, 0);">(Vincent Marion)</span> Que devient l'√©quation de Poisson dans une zone vide de charge (en r√©gime stationnaire) ?|Si \\(\\rho = 0\\), l'√©quation de Poisson devient l'<b>√©quation de Laplace</b> :<br>\\[\\Delta V = 0\\]<img src="images/e19.PNG">|${PEM10}
10147|Qu'est-ce que le vecteur densit√© volumique de courant de d√©placement ? Et le courant de d√©placement ?|<img src="images/paste-7efdc90615fbdb5476fdd210e9e5635b9591785b.jpg">|${PEM10}
10148|1. Comment s'√©crit la loi de conservation de la charge en r√©gime stationnaire ?<br>2. Quelle est la relation int√©grale associ√©e et quelle loi d'√©lectrocin√©tique traduit-elle ?|1. En r√©gime stationnaire, la densit√© de charge ne varie pas, donc \\(div(\\vec{j}) = 0\\).<br>2. La relation int√©grale est \\(\\unicode{x222F}_{S_{ferm√©e}} \\vec{j} \\cdot d\\vec{S} = 0\\). C'est la <b>loi des n≈ìuds</b> : l'intensit√© totale qui sort d'un volume ferm√© est nulle.|${PEM10}
10149|<span style="color: rgb(255, 170, 0);">(M.A)</span> Quelles sont les correspondances pour les op√©rateurs \\(\\vec{\\nabla}\\) et \\(\\frac{\\partial}{\\partial t}\\) lorsqu'on passe en notation complexe pour une onde de la forme \\(\\vec{\\underline{E}}=\\vec{\\underline{E_0}}exp(j(\\omega t-\\vec{k}\\cdot\\vec{r}))\\) ?|En notation complexe, pour une onde progressive, les op√©rateurs deviennent de simples multiplications :<br>‚Ä¢ D√©riv√©e spatiale : \\(\\vec{\\nabla} \\longleftrightarrow -j\\vec{k}\\)<br>‚Ä¢ D√©riv√©e temporelle : \\(\\frac{\\partial}{\\partial t} \\longleftrightarrow j\\omega\\)|${PEM11}
10150|<span style="color: rgb(255, 170, 0);">(M.A)</span> Quelle est la solution g√©n√©rale de l'√©quation de d'Alembert unidimensionnelle (√©quation d'onde) : \\(\\frac{\\partial^2 f}{\\partial x^2} - \\frac{1}{c^2}\\frac{\\partial^2 f}{\\partial t^2} = 0\\) ?|La solution g√©n√©rale est la superposition de deux ondes se propageant en sens oppos√©s :<br>\\[f(x,t) = g(t - x/c) + h(t + x/c)\\]ou de mani√®re √©quivalente :<br>\\[f(x,t) = G(x - ct) + H(x + ct)\\]|${PEM11}
10151|<span style="color: rgb(255, 170, 0);">(M.A)</span> Que repr√©sentent les fonctions \\(g(t - x/c)\\) et \\(h(t + x/c)\\) ?|‚Ä¢ \\(g(t - x/c)\\) repr√©sente une onde qui se propage <b>sans d√©formation</b> √† la vitesse \\(c\\) dans le sens des <b>x croissants</b> (onde progressive).<br>‚Ä¢ \\(h(t + x/c)\\) repr√©sente une onde qui se propage <b>sans d√©formation</b> √† la vitesse \\(c\\) dans le sens des <b>x d√©croissants</b> (onde r√©gressive).|${PEM11}
10152|<span style="color: rgb(255, 170, 0);">M.W</span><br>Soit \\(\\vec{E}(x,t) = E_{0y}\\cos(\\omega t-kx)\\vec{e_y}+E_{0z}\\cos(\\omega t-kx-\\phi)\\vec{e_z}\\).<br>1. Direction de propagation ?<br>2. Vecteur d'onde \\(\\vec{k}\\) ?<br>3. Pourquoi \\(E_x=0\\) ?<br>4. Champ \\(\\vec{B}\\) correspondant ?|1. La phase \\((\\omega t - kx)\\) indique une propagation dans la direction des <b>x croissants</b>.<br>2. \\(\\vec{k} = k\\vec{e_x} = \\frac{\\omega}{c}\\vec{e_x}\\).<br>3. Pour une onde plane dans le vide, le champ \\(\\vec{E}\\) est <b>transverse</b>, c'est-√†-dire orthogonal √† la direction de propagation.<br>4. \\(\\vec{B} = \\frac{\\vec{k} \\wedge \\vec{E}}{\\omega} = \\frac{1}{c}\\vec{e_x} \\wedge \\vec{E} = \\frac{1}{c}(-E_z\\vec{e_y} + E_y\\vec{e_z})\\).|${PEM11}
10153|<span style="color: rgb(255, 170, 0);">(M.A)</span> Que dire des champs \\(\\vec{E}\\) et \\(\\vec{B}\\) d'une Onde Plane Progressive (OPP) dans le vide ?|Pour une OPP dans le vide :<br>1. \\((\\vec{E}, \\vec{B}, \\vec{k})\\) forment un <b>tri√®dre direct</b>.<br>2. \\(\\vec{E}\\) et \\(\\vec{B}\\) sont <b>orthogonaux</b> entre eux.<br>3. \\(\\vec{E}\\) et \\(\\vec{B}\\) sont <b>orthogonaux</b> √† la direction de propagation \\(\\vec{k}\\) (onde transverse).<br>4. Leurs normes sont li√©es par \\(E = cB\\).|${PEM11}
10154|<span style="color: rgb(255, 170, 0);">(M.A)</span> Si \\(\\vec{u}\\) est le vecteur unitaire de la direction de propagation, quelle relation permet de trouver \\(\\vec{B}\\) √† partir de \\(\\vec{E}\\) pour une OPP dans le vide ?|\\[\\vec{B} = \\frac{1}{c} \\vec{u} \\wedge \\vec{E}\\]|${PEM11}
10155|<span style="color: rgb(255, 170, 0);">(M.A)</span> Qu'est-ce qu'une Onde Plane Progressive Monochromatique (OPPM) ?|Une OPPM est une Onde Plane Progressive dont la d√©pendance temporelle et spatiale est <b>sinuso√Ødale</b>, avec une seule pulsation \\(\\omega\\) (ou fr√©quence \\(f\\)).|${PEM11}
10156|<span style="color: rgb(255, 170, 0);">M.W</span><br>Proposer l'expression d'un champ \\(\\vec{E}\\) se propageant suivant \\(+\\vec{u_x}\\) avec une polarisation <b>circulaire gauche</b>, puis <b>circulaire droite</b>.|‚Ä¢ <b>Circulaire gauche (sens trigonom√©trique) :</b><br>\\(\\vec{E}(x,t) = E_0[\\cos(\\omega t-kx)\\vec{e_y} + \\sin(\\omega t-kx)\\vec{e_z}]\\](Les composantes en y et z sont en quadrature de phase).<br>‚Ä¢ <b>Circulaire droite (sens horaire) :</b><br>\\(\\vec{E}(x,t) = E_0[\\cos(\\omega t-kx)\\vec{e_y} - \\sin(\\omega t-kx)\\vec{e_z}]\\]|${PEM11}
10157|<span style="color: rgb(255, 170, 0);">M.W</span><br>Proposer une expression pour un champ \\(\\vec{E}\\) se propageant suivant \\(+\\vec{u_x}\\) et polaris√© <b>rectilignement</b>.|La direction du vecteur \\(\\vec{E}\\) reste fixe au cours du temps. Par exemple :<br>\\(\\vec{E}(x,t) = E_0 \\cos(\\omega t - kx - \\phi) \\vec{u}\\)<br>o√π \\(\\vec{u}\\) est un vecteur constant dans le plan \\((y,z)\\), par exemple \\(\\vec{u}=\\vec{e_y}\\) ou \\(\\vec{u} = \\frac{1}{\\sqrt{2}}(\\vec{e_y} + \\vec{e_z})\\).|${PEM11}
10158|<span style="color: rgb(255, 170, 0);">(M.A)</span> Expression g√©n√©rale du champ \\(\\vec{E}\\) d'une OPPM se propageant dans le vide selon les x croissants ?|Le champ est transverse (composante en x nulle) :<br>\\(\\vec{E}(x,t) = E_{0y}\\cos(\\omega t - kx + \\phi_y)\\vec{e_y} + E_{0z}\\cos(\\omega t - kx + \\phi_z)\\vec{e_z}\\)<br>o√π \\(k = \\omega/c\\) est le nombre d'onde.|${PEM11}
10159|<span style="color: rgb(255, 170, 0);">(M.A)</span> Quelle est l'expression du vecteur d'onde \\(\\vec{k}\\) d'une OPPM se propageant dans le vide dans la direction du vecteur unitaire \\(\\vec{u}\\) ?|\\[\\vec{k} = \\frac{\\omega}{c}\\vec{u} = \\frac{2\\pi}{\\lambda}\\vec{u}\\]|${PEM11}
10160|<span style="color: rgb(0, 255, 0);">(BM)</span> Donner l'√©quation de d'Alembert tridimensionnelle pour \\(\\vec{E}\\).|\\[\\Delta\\vec{E} - \\frac{1}{c^2}\\frac{\\partial^2\\vec{E}}{\\partial t^2} = \\vec{0}\\]o√π \\(c = 1/\\sqrt{\\varepsilon_0 \\mu_0}\\) est la c√©l√©rit√© de la lumi√®re dans le vide.|${PEM11}
10161|<span style="color: rgb(0, 255, 0);">(A.P)</span> Donner l'expression, l'unit√© et le sens physique du vecteur de Poynting.|<img src="images/20240125_203524.jpg">|${PEM12}
10162|<span style="color: rgb(0, 255, 0);">(A.P)</span> Que dire du vecteur de Poynting d'une OPP dans le vide ?|<img src="images/img3435061267687801303.jpg">|${PEM12}
10163|(V.I) Donner la densit√© volumique d‚Äô√©nergie magn√©tique et son unit√©.|\\[u_M = \\frac{1}{2\\mu_0} B^2\\]Elle s'exprime en Joules par m√®tre cube (\\(J \\cdot m^{-3}\\)).|${PEM12}
10164|(V.I) Donner la densit√© volumique d‚Äô√©nergie √©lectromagn√©tique en un point de l‚Äôespace o√π r√®gne un champ \\((\\vec{E}, \\vec{B})\\).|\\[u_{em} = u_E + u_M = \\frac{1}{2}\\varepsilon_0 E^2 + \\frac{1}{2\\mu_0} B^2\\]Son unit√© est le Joule par m√®tre cube (\\(J \\cdot m^{-3}\\)).|${PEM12}
10165|(V.I) Quelles sont les conditions de validit√© de l'Approximation des R√©gimes Quasi-Stationnaires (ARQS) ?|L'ARQS est valide si le temps de propagation \\(\\tau\\) de l'information dans le circuit de taille L est tr√®s inf√©rieur √† la p√©riode T du signal.<br>‚Ä¢ Condition sur les temps : \\(\\tau \\ll T\\)<br>‚Ä¢ Condition sur les longueurs : \\(L \\ll \\lambda\\), o√π \\(\\lambda\\) est la longueur d'onde.|${PEM12}
10166|(V.I) Donner les √âquations de Maxwell dans l‚ÄôARQS "magn√©tique".|Dans l'ARQS magn√©tique, on n√©glige le courant de d√©placement dans l'√©quation de Maxwell-Amp√®re :<br>‚Ä¢ \\(div \\vec{E} = \\frac{\\rho}{\\varepsilon_0}\\)<br>‚Ä¢ \\(\\vec{rot} \\vec{E} = -\\frac{\\partial \\vec{B}}{\\partial t}\\)<br>‚Ä¢ \\(div \\vec{B} = 0\\)<br>‚Ä¢ \\(\\vec{rot} \\vec{B} = \\mu_0 \\vec{j}\\) (terme de Maxwell n√©glig√©)|${PEM12}
10167|(V.I) Donner les densit√©s volumiques d'√©nergies √©lectrique \\(u_E\\), magn√©tique \\(u_M\\) et √©lectromagn√©tique \\(u_{em}\\) pour une OPP dans le vide.|Pour une OPP dans le vide, les densit√©s d'√©nergie √©lectrique et magn√©tique sont √©gales :<br>\\(u_E = u_M = \\frac{1}{2}\\varepsilon_0 E^2\\)<br>La densit√© d'√©nergie √©lectromagn√©tique totale est donc :<br>\\(u_{em} = u_E + u_M = \\varepsilon_0 E^2\\)|${PEM12}
10168|<span style="color: rgb(0, 255, 0);">(E-S)</span> Puissance fournie par le champ √©lectromagn√©tique √† une charge q de vitesse v.|<img src="images/IMG_6162.jpg"><br>La puissance est le produit scalaire de la force de Lorentz \\(\\vec{F}\\) par la vitesse \\(\\vec{v}\\).|${PEM12}
10169|<span style="color: rgb(255, 170, 0);">(V.I)</span> Donner la loi d‚ÄôOhm "int√©grale" puis la loi d‚ÄôOhm "locale".|‚Ä¢ <b>Loi d'Ohm int√©grale</b> (pour un dip√¥le) : \\(u = Ri\\)<br>‚Ä¢ <b>Loi d'Ohm locale</b> (dans un mat√©riau) : \\(\\vec{j} = \\gamma \\vec{E}\\)<br>o√π \\(\\gamma\\) est la conductivit√© du mat√©riau en Siemens par m√®tre (\\(S \\cdot m^{-1}\\)).|${PEM12}
10170|(V.I) D√©finir un conducteur et un conducteur ohmique.|1. <b>Conducteur :</b> Milieu poss√©dant des porteurs de charges mobiles (ex: √©lectrons dans un m√©tal, ions dans un √©lectrolyte).<br>2. <b>Conducteur ohmique :</b> C'est un conducteur o√π il existe une relation de proportionnalit√© entre la densit√© de courant \\(\\vec{j}\\) et le champ √©lectrique \\(\\vec{E}\\) : \\(\\vec{j} = \\gamma \\vec{E}\\).|${PEM12}
10171|(V.I) Retrouver l'expression de la densit√© volumique d'√©nergie √©lectrique \\(u_E\\) dans le cas d'un condensateur plan.|L'√©nergie stock√©e dans un condensateur est \\(U_C = \\frac{1}{2}CU^2\\).<br>Pour un condensateur plan, \\(C = \\frac{\\varepsilon_0 S}{e}\\) et \\(U = E \\cdot e\\).<br>Donc \\(U_C = \\frac{1}{2} (\\frac{\\varepsilon_0 S}{e}) (Ee)^2 = \\frac{1}{2}\\varepsilon_0 E^2 (S \\cdot e)\\).<br>Le volume est \\(V_{ol} = S \\cdot e\\), donc la densit√© volumique d'√©nergie est :<br>\\(u_E = \\frac{U_C}{V_{ol}} = \\frac{1}{2}\\varepsilon_0 E^2\\)|${PEM12}
10172|<span style="color: rgb(0, 255, 0);">(E-S)</span> Conna√Ætre et d√©terminer la puissance volumique fournie par le champ √©lectromagn√©tique aux porteurs de charges.|<div><img src="images/IMG_6164.jpg"></div>|${PEM12}
10173|<span style="color: rgb(0, 255, 0);">(E-S)</span> Bilan d'√©nergie sous forme int√©grale.|<div><img src="images/IMG_6166.jpg"></div>|${PEM12}
10174|<span style="color: rgb(255, 170, 0);">(E-S)</span> Bilan d'√©nergie sous forme locale.|<img src="images/paste-99d771ded1438c4d97b496e50d4f1c3d318344c6.jpg">|${PEM12}
10175|<span style="color: rgb(255, 170, 0);">(O.M)</span> Dans une cavit√© conductrice parfaite de longueur \\(a\\), quelles sont les deux conditions que doit v√©rifier le champ \\(\\vec{E}\\) ?<br><img src="images/paste-d13b668f511ce3dc30a786d7467c62ae5210dd48.jpg">|1. <b>Conditions aux limites :</b> La composante tangentielle de \\(\\vec{E}\\) est nulle √† la surface d'un conducteur parfait. Ici, \\(\\vec{E}\\) est tangent aux parois, donc :<br>\\(E(x=0, t) = 0\\) et \\(E(x=a, t) = 0\\) pour tout \\(t\\).<br>2. <b>√âquation de propagation :</b> Le champ \\(\\vec{E}\\) doit √™tre une solution de l'√©quation de d'Alembert dans le vide :<br>\\(\\Delta\\vec{E} - \\frac{1}{c^2}\\frac{\\partial^2\\vec{E}}{\\partial t^2} = \\vec{0}\\).|${PEM13}
10176|<span style="color: rgb(255, 170, 0);">(O.M)</span> Quelle est la forme math√©matique g√©n√©rale du champ \\(\\vec{E}(x,t)=f(x)g(t)\\vec{u_z}\\) (onde stationnaire) dans la cavit√© ?<br><img src="images/paste-d13b668f511ce3dc30a786d7467c62ae5210dd48.jpg">|On cherche une solution √† variables s√©par√©es de l'√©quation de d'Alembert. Cela conduit √† deux √©quations diff√©rentielles :<br>\\(\\frac{d^2f}{dx^2} + k^2 f(x) = 0\\)<br>\\(\\frac{d^2g}{dt^2} + \\omega^2 g(t) = 0\\)<br>avec la relation de dispersion \\(k = \\omega/c\\).<br>Les solutions sont sinuso√Ødales :<br>\\(f(x) = A\\cos(kx) + B\\sin(kx)\\)<br>\\(g(t) = C\\cos(\\omega t) + D\\sin(\\omega t)\\)<br>Soit \\(\\vec{E}(x,t) = [A\\cos(kx) + B\\sin(kx)] \\cdot [C\\cos(\\omega t) + D\\sin(\\omega t)] \\vec{u_z}\\).|${PEM13}
10177|<span style="color: rgb(255, 170, 0);">(O.M)</span> En appliquant les conditions aux limites √† \\(\\vec{E}(x,t) = (A\\cos(kx)+B\\sin(kx))g(t)\\vec{u_z}\\) dans la cavit√©, que trouve-t-on ?|‚Ä¢ <b>En x=0 :</b> \\(E(0,t)=0 \\Rightarrow A \\cdot g(t) = 0 \\Rightarrow A=0\\). La solution est donc en \\(\\sin(kx)\\).<br>‚Ä¢ <b>En x=a :</b> \\(E(a,t)=0 \\Rightarrow B\\sin(ka)g(t)=0 \\Rightarrow \\sin(ka)=0\\).<br>Ceci impose une quantification du nombre d'onde \\(k\\) :<br>\\(ka = p\\pi\\), o√π \\(p\\) est un entier non nul.<br>Soit \\(k_p = \\frac{p\\pi}{a}\\).<br>Les pulsations possibles (modes propres) sont donc \\(\\omega_p = c k_p = \\frac{p\\pi c}{a}\\).|${PEM13}
10178|<span style="color: rgb(255, 170, 0);">(O.M)</span> Le champ dans une cavit√© est \\(\\vec{E} = E_0 \\sin(\\frac{p\\pi x}{a})\\cos(\\omega_p t + \\phi)\\vec{u_z}\\). Que signifie \\(p\\) ?<br><img src="images/paste-d13b668f511ce3dc30a786d7467c62ae5210dd48.jpg">|Chaque entier \\(p \\ge 1\\) d√©finit un <b>mode propre</b> de vibration de la cavit√©, caract√©ris√© par :<br>‚Ä¢ Une fr√©quence propre : \\(f_p = \\frac{\\omega_p}{2\\pi} = p \\frac{c}{2a}\\)<br>‚Ä¢ Une longueur d'onde : \\(\\lambda_p = \\frac{c}{f_p} = \\frac{2a}{p}\\)<br>Le mode \\(p\\) correspond √† une onde stationnaire ayant \\(p\\) fuseaux (ventres d'amplitude).<br><img src="images/paste-dee508805d69e2a4da947748c97fedcf4ae7a97d.jpg">|${PEM13}
10179|(L.S) Localiser les ventres et les n≈ìuds de \\(\\vec{E}\\) et \\(\\vec{B}\\) pour l'onde stationnaire \\(\\vec{E} = 2E_{0i}\\sin(kz)\\sin(\\omega t)\\vec{u_x}\\).<br><img src="images/bleh.PNG">|Les n≈ìuds de \\(\\vec{E}\\) (amplitude nulle) sont o√π \\(\\sin(kz)=0 \\Rightarrow kz=n\\pi\\).<br>Les ventres de \\(\\vec{E}\\) (amplitude max) sont o√π \\(|\\sin(kz)|=1 \\Rightarrow kz=(n+1/2)\\pi\\).<br>Pour \\(\\vec{B}\\), c'est l'inverse (car il est en \\(\\cos(kz)\\)). Les n≈ìuds de \\(\\vec{E}\\) sont les ventres de \\(\\vec{B}\\) et vice-versa.<br><img src="images/Ajouter des lignes dans le corps du texte.png">|${PEM13}
10180|(L.S) Une onde \\(\\underline{\\vec{E}_i} = E_{0i}e^{j(kz-\\omega t)}\\vec{u_x}\\) se r√©fl√©chit sur un conducteur parfait en z=0 (incidence normale). Donner \\(\\underline{\\vec{E}_r}\\).<br><img src="images/paste-19049a52659cbc68fe9fc14d3fdba63fb6d0d43f.jpg">|L'onde r√©fl√©chie se propage en \\(-z\\) : \\(\\underline{\\vec{E}_r} = \\underline{\\vec{E}_{0r}}e^{j(-kz-\\omega t)}\\).<br>La condition aux limites en z=0 est que le champ total tangentiel est nul : \\(\\vec{E}_i(0,t) + \\vec{E}_r(0,t) = \\vec{0}\\).<br>\\(E_{0i}e^{-j\\omega t}\\vec{u_x} + \\underline{\\vec{E}_{0r}}e^{-j\\omega t} = \\vec{0}\\).<br>Ceci impose \\(\\underline{\\vec{E}_{0r}} = -E_{0i}\\vec{u_x}\\).<br>L'onde r√©fl√©chie est donc : \\(\\underline{\\vec{E}_r} = -E_{0i}e^{j(-kz-\\omega t)}\\vec{u_x}\\).<br>Il y a un d√©phasage de \\(\\pi\\) pour \\(\\vec{E}\\) √† la r√©flexion.|${PEM13}
10181|(L.S) Pour une r√©flexion sur un conducteur parfait, on a \\(\\vec{E}_i = E_{0i}\\cos(kz-\\omega t)\\vec{u_x}\\) et \\(\\vec{E}_r = -E_{0i}\\cos(kz+\\omega t)\\vec{u_x}\\). D√©terminer \\(\\vec{B}_i\\) et \\(\\vec{B}_r\\).|On utilise \\(\\vec{B} = \\frac{\\vec{k} \\wedge \\vec{E}}{\\omega}\\).<br>Pour l'onde incidente, \\(\\vec{k}_i=k\\vec{u_z}\\) :<br>\\(\\vec{B}_i = \\frac{k\\vec{u_z} \\wedge E_{0i}\\cos(...)\\vec{u_x}}{\\omega} = \\frac{E_{0i}}{c}\\cos(kz-\\omega t)\\vec{u_y}\\).<br>Pour l'onde r√©fl√©chie, \\(\\vec{k}_r=-k\\vec{u_z}\\) :<br>\\(\\vec{B}_r = \\frac{-k\\vec{u_z} \\wedge (-E_{0i}\\cos(...))\\vec{u_x}}{\\omega} = \\frac{E_{0i}}{c}\\cos(kz+\\omega t)\\vec{u_y}\\).<br>Note : Il n'y a pas de d√©phasage pour \\(\\vec{B}\\) √† la r√©flexion.|${PEM13}
10182|Le champ \\(\\vec{E}\\) dans une cavit√© est de la forme \\(\\vec{E}(x,t) = f(x)g(t)\\vec{u_z}\\). Quelle est la nature de cette onde ?|C'est une <b>onde stationnaire</b> : elle n'est pas de la forme \\(F(t-x/c)\\) ou \\(G(t+x/c)\\). Les variables d'espace et de temps sont s√©par√©es.\\nElle r√©sulte de la superposition de deux ondes progressives se propageant en sens oppos√©s, cr√©√©es par les r√©flexions successives sur les parois de la cavit√©.|${PEM13}
10183|(MAG) √âquation de propagation du champ E dans un conducteur ohmique.<br><img src="images/paste-51401275d15bbf37d7e168a56c64ee7635c23923.jpg">|<img src="images/paste-b1d8356e3e5a085afb59e2d76355ab2195bb7a80.jpg">|${PEM13}
10184|(MAG) Relation de dispersion pour une OPPM dans un conducteur ohmique.<br>Rappel : \\(\\Delta\\vec{E} - \\mu_0\\gamma\\frac{\\partial\\vec{E}}{\\partial t} - \\varepsilon_0\\mu_0\\frac{\\partial^2\\vec{E}}{\\partial t^2} = \\vec{0}\\).<br><img src="images/paste-8e1bfb99783c1fd684cd404ef15d5918094dfd01.jpg">|<img src="images/paste-354ec4f941ffbcf92ed82f4736d592d5dc834cd0.jpg">|${PEM13}
10185|(MAG) √âpaisseur de peau (ou profondeur de p√©n√©tration) \\(\\delta\\).<br><img src="images/paste-273417994be21d50ab9ebc2db9a945b92cd6125d.jpg">|<img src="images/paste-09120748084d1ae45fcad52f4c680d5acf2fcae0.jpg">|${PEM13}
10186|(MAG) Vitesse de phase \\(v_\\phi\\) dans un bon conducteur.<br><img src="images/paste-c9b6cc0e85a1d927c0f8736cd0a0e5f9c82b0c6e.jpg">|<img src="images/paste-712a3d4adda06ec3afbc29daa1e49fb999781d0c.jpg">|${PEM13}
10187|(MAG) Caract√©ristiques de l'onde dans un bon conducteur.<br><img src="images/paste-b3926ac7c755977d76ea5d1125d4e30871c32236.jpg">|<img src="images/paste-56a8e1c02a5f64fb84e5a49278d65bf0cae2dd88.jpg">|${PEM13}
10188|(MAG) Les champs \\(\\vec{E}\\) et \\(\\vec{B}\\) sont-ils en phase dans un conducteur ohmique ?<br><img src="images/paste-e82daa53e473b6987630d3777e94cee8955f83b5.jpg">|<img src="images/paste-ac3a319a2a2e4552da79e1368bf7fffa02f18347.jpg"><br>Donc<br><img src="images/paste-c565a9ffdc44c1ff22e571ff9f17419b38d4a93f.jpg"><br>et<br><img src="images/paste-d7d1a56baa7de129a328e8758b53bbd357ba7b7a.jpg"><br>Non, \\(\\vec{B}\\) est en retard de phase de \\(\\pi/4\\) par rapport √† \\(\\vec{E}\\).|${PEM13}
10189|<span style="color: rgb(0, 0, 255);">(MAG)</span> Qu'est-ce qu'un conducteur parfait ? En d√©duire qualitativement les valeurs de E, B, j √† l'int√©rieur.|Un conducteur parfait est un mod√®le o√π la conductivit√© \\(\\gamma\\) tend vers l'infini (\\(\\gamma \\to +\\infty\\)).<br>Dans ce cas, l'√©paisseur de peau \\(\\delta\\) tend vers z√©ro. L'onde √©lectromagn√©tique ne peut pas p√©n√©trer dans le mat√©riau.<br>On en d√©duit que les champs \\(\\vec{E}\\), \\(\\vec{B}\\) et la densit√© de courant \\(\\vec{j}\\) sont nuls √† l'int√©rieur d'un conducteur parfait.|${PEM13}
10190|Cas d'une r√©flexion sur un conducteur parfait. Si \\(\\vec{E}_i(z=0,t) = E_{0i}\\cos(-\\omega t)\\vec{u_x}\\), que vaut \\(\\vec{E}_r(z=0,t)\\) ?<br><img src="images/paste-19049a52659cbc68fe9fc14d3fdba63fb6d0d43f.jpg">|√Ä l'interface (z=0), le champ tangentiel total doit √™tre nul. Donc le champ r√©fl√©chi doit √™tre l'oppos√© de l'incident :<br>\\(\\vec{E}_r(0,t) = -\\vec{E}_i(0,t) = -E_{0i}\\cos(-\\omega t)\\vec{u_x}\\)|${PEM13}
10191|R√©flexion sur un conducteur parfait. D√©terminer \\(\\vec{E}_{total}\\) et \\(\\vec{B}_{total}\\). Quelle est la nature de l'onde r√©sultante ? Et la moyenne temporelle de son vecteur de Poynting ?|\\(\\vec{E}_{total} = \\vec{E}_i + \\vec{E}_r = 2E_{0i}\\sin(kz)\\sin(\\omega t)\\vec{u_x}\\)<br>\\(\\vec{B}_{total} = \\vec{B}_i + \\vec{B}_r = 2\\frac{E_{0i}}{c}\\cos(kz)\\cos(\\omega t)\\vec{u_y}\\)<br>L'onde r√©sultante est une <b>onde stationnaire</b> (les n≈ìuds et les ventres sont fixes).<br>Pour une onde stationnaire, il n'y a pas de propagation d'√©nergie en moyenne. La valeur moyenne temporelle du vecteur de Poynting est <b>nulle</b>.|${PEM13}
10192|Que vaut la densit√© surfacique de charge \\(\\sigma\\) √† la surface d'un conducteur parfait o√π arrive une onde EM ?|Elle est nulle (r√©sultat admis, li√© √† la tr√®s grande mobilit√© des charges qui emp√™che toute accumulation nette).|${PEM13}
10193|D√©terminer la densit√© de courant surfacique \\(\\vec{j}_s\\) √† la surface du conducteur parfait.\\nRappel : \\(\\vec{B}_{total}(z=0,t) = 2\\frac{E_{0i}}{c}\\cos(\\omega t)\\vec{u_y}\\).<br>Relation de passage : \\(\\vec{n} \\wedge (\\vec{B}_2 - \\vec{B}_1) = \\mu_0\\vec{j}_s\\).<br><img src="images/paste-19049a52659cbc68fe9fc14d3fdba63fb6d0d43f.jpg">|Ici, \\(\\vec{B}_2 = \\vec{0}\\) (dans le conducteur), \\(\\vec{B}_1 = \\vec{B}_{total}(0,t)\\) et \\(\\vec{n}=\\vec{u_z}\\).<br>\\(\\vec{u_z} \\wedge (\\vec{0} - 2\\frac{E_{0i}}{c}\\cos(\\omega t)\\vec{u_y}) = \\mu_0\\vec{j}_s\\)<br>\\(-2\\frac{E_{0i}}{c}\\cos(\\omega t)(\\vec{u_z} \\wedge \\vec{u_y}) = \\mu_0\\vec{j}_s\\)<br>\\(2\\frac{E_{0i}}{c}\\cos(\\omega t)\\vec{u_x} = \\mu_0\\vec{j}_s\\)<br>Soit \\(\\vec{j}_s = \\frac{2E_{0i}}{\\mu_0 c}\\cos(\\omega t)\\vec{u_x}\\).|${PEM13}
10194|Quelle explication qualitative peut-on donner √† l'existence d'un champ r√©fl√©chi sur un conducteur parfait ?|Le champ √©lectrique \\(\\vec{E}_i\\) de l'onde incidente met en mouvement les √©lectrons libres √† la surface du conducteur. Ce mouvement cr√©e un courant surfacique \\(\\vec{j}_s\\).<br>Ce courant variable est √† son tour une source de champ √©lectromagn√©tique, qui n'est autre que le champ r√©fl√©chi \\((\\vec{E}_r, \\vec{B}_r)\\).|${PEM13}
10195|<span style="color: rgb(255, 170, 0);">(LPB)</span> D√©terminer la relation de dispersion d'une OPPM dans un plasma de conductivit√© complexe \\(\\underline{\\gamma}=-i \\frac{n_0 e^2}{\\omega m_e}\\).|On part de l'√©quation de propagation dans le plasma :<br>\\(\\Delta\\underline{\\vec{E}} - \\frac{1}{c^2}\\frac{\\partial^2\\underline{\\vec{E}}}{\\partial t^2} = \\mu_0\\underline{\\gamma}\\frac{\\partial\\underline{\\vec{E}}}{\\partial t}\\)<br>En notation complexe (\\(\\vec{\\nabla} \\to -i\\vec{\\underline{k}}\\), \\(\\partial_t \\to i\\omega\\)), on obtient :<br>\\(-(\\underline{k})^2 \\underline{\\vec{E}} + \\frac{\\omega^2}{c^2}\\underline{\\vec{E}} = i\\omega\\mu_0\\underline{\\gamma}\\underline{\\vec{E}}\\)<br>En rempla√ßant \\(\\underline{\\gamma}\\) par son expression, et avec \\(\\varepsilon_0\\mu_0 = 1/c^2\\), on arrive √† :<br>\\(\\underline{k}^2 = \\frac{\\omega^2 - \\omega_p^2}{c^2}\\), avec \\(\\omega_p = \\sqrt{\\frac{n_0 e^2}{\\varepsilon_0 m_e}}\\) (pulsation plasma).|${PEM14}
10196|<span style="color: rgb(0, 255, 0);">(TS)</span> Qu'est-ce qu'un plasma ? Donner un exemple.|Un plasma est un milieu gazeux partiellement ou totalement ionis√©, mais globalement neutre. Il est constitu√© d'ions, d'√©lectrons libres et d'atomes ou mol√©cules neutres.<br><b>Exemple :</b> L'ionosph√®re terrestre, couche de la haute atmosph√®re ionis√©e par le rayonnement solaire.|${PEM14}
10197|<span style="color: rgb(255, 170, 0);">(LPB)</span> Donner les √©quations de Maxwell dans le plasma et leurs cons√©quences pour une onde transverse.|‚Ä¢ \\(div(\\vec{E}) = 0\\) (transverse √©lectrique) \\(\\Rightarrow \\rho = 0\\) (neutralit√© locale non perturb√©e).<br>‚Ä¢ \\(div(\\vec{B}) = 0\\) \\(\\Rightarrow\\) L'onde est aussi transverse magn√©tique.<br>‚Ä¢ \\(\\vec{rot}(\\vec{E}) = -\\frac{\\partial\\vec{B}}{\\partial t}\\) \\(\\Rightarrow\\) Relation de structure : \\(\\underline{\\vec{B}} = \\frac{\\underline{\\vec{k}} \\wedge \\underline{\\vec{E}}}{\\omega}\\).<br>‚Ä¢ \\(\\vec{rot}(\\vec{B}) = \\mu_0\\vec{j} + \\varepsilon_0\\mu_0\\frac{\\partial\\vec{E}}{\\partial t}\\) avec \\(\\underline{\\vec{j}} = \\underline{\\gamma}\\underline{\\vec{E}}\\).|${PEM14}
10198|<span style="color: rgb(255, 170, 0);">(TS)</span> Appliquer le PFD √† un √©lectron du plasma pour trouver sa vitesse \\(\\vec{v}\\) en r√©ponse √† une OPPM \\(\\underline{\\vec{E}}\\).|Le PFD s'√©crit \\(m_e\\frac{d\\vec{v}}{dt} = \\vec{F}_{Lorentz}\\).<br>La force de Lorentz est \\(\\vec{F} = -e(\\vec{E} + \\vec{v} \\wedge \\vec{B})\\). Le terme magn√©tique est n√©gligeable car \\(v \\ll c\\).<br>En r√©gime sinuso√Ødal forc√©, \\(m_e(i\\omega\\underline{\\vec{v}}) = -e\\underline{\\vec{E}}\\).<br>On en d√©duit la vitesse de l'√©lectron : \\(\\underline{\\vec{v}} = \\frac{ie}{\\omega m_e}\\underline{\\vec{E}}\\).|${PEM14}
10199|<span style="color: rgb(255, 170, 0);">(TS)</span> Exprimer le vecteur densit√© de courant \\(\\underline{\\vec{j}}\\) dans un plasma et en d√©duire sa conductivit√© complexe \\(\\underline{\\gamma}\\).|La densit√© de courant est \\(\\vec{j} = n_0 (-e) \\vec{v}\\), o√π \\(n_0\\) est la densit√© d'√©lectrons.<br>En rempla√ßant \\(\\underline{\\vec{v}}\\) par son expression :<br>\\(\\underline{\\vec{j}} = -n_0 e (\\frac{ie}{\\omega m_e}\\underline{\\vec{E}}) = -i\\frac{n_0 e^2}{\\omega m_e}\\underline{\\vec{E}}\\).<br>Par analogie avec la loi d'Ohm locale (\\(\\underline{\\vec{j}}=\\underline{\\gamma}\\underline{\\vec{E}}\\)), on identifie la conductivit√© complexe du plasma :<br>\\(\\underline{\\gamma} = -i\\frac{n_0 e^2}{\\omega m_e}\\).|${PEM14}
10200|<span style="color: rgb(0, 255, 0);">(TS)</span> Donner la puissance volumique moyenne c√©d√©e par le champ EM √† un plasma de conductivit√© complexe \\(\\underline{\\gamma} = -i\\frac{n_0 e^2}{\\omega m_e}\\).|La puissance volumique moyenne est \\(\\langle \\mathcal{P}_v \\rangle = \\langle \\vec{j} \\cdot \\vec{E} \\rangle = \\frac{1}{2}Re(\\underline{\\vec{j}} \\cdot \\underline{\\vec{E}}^*)\\).<br>\\(\\langle \\mathcal{P}_v \\rangle = \\frac{1}{2}Re(\\underline{\\gamma} \\underline{\\vec{E}} \\cdot \\underline{\\vec{E}}^*) = \\frac{1}{2}Re(\\underline{\\gamma} |\\underline{\\vec{E}}|^2)\\).<br>Comme \\(\\underline{\\gamma}\\) est un imaginaire pur, sa partie r√©elle est nulle, donc \\(\\langle \\mathcal{P}_v \\rangle = 0\\). Le plasma (mod√®le sans collisions) n'absorbe pas d'√©nergie en moyenne.|${PEM14}
10201|<span style="color: rgb(255, 170, 0);">(B.R.)</span> Donner l'√©quation de propagation d'une OPPM dans un plasma.|En partant de \\(\\vec{rot}(\\vec{rot}\\vec{E}) = -\\Delta\\vec{E}\\) (car \\(div \\vec{E}=0\\)), et des √©quations de Maxwell, on obtient :<br>\\(-\\Delta\\vec{E} = -\\frac{\\partial}{\\partial t}(\\vec{rot}\\vec{B}) = -\\mu_0\\frac{\\partial\\vec{j}}{\\partial t} - \\varepsilon_0\\mu_0\\frac{\\partial^2\\vec{E}}{\\partial t^2}\\).<br>En notation complexe, cela donne l'√©quation de propagation :<br>\\(\\Delta\\underline{\\vec{E}} - \\frac{1}{c^2}\\frac{\\partial^2\\underline{\\vec{E}}}{\\partial t^2} = \\mu_0\\underline{\\gamma}\\frac{\\partial\\underline{\\vec{E}}}{\\partial t}\\).|${PEM14}
10202|<span style="color: rgb(255, 170, 0);">(B.R.)</span> Bilan pour une OPPM dans un plasma lorsque sa pulsation \\(\\omega > \\omega_p\\) :|‚Ä¢ Le nombre d'onde \\(k = \\frac{\\sqrt{\\omega^2 - \\omega_p^2}}{c}\\) est <b>r√©el</b> : l'onde <b>se propage sans att√©nuation</b>.<br>‚Ä¢ La vitesse de phase \\(v_\\phi = \\frac{\\omega}{k} = \\frac{c}{\\sqrt{1-(\\omega_p/\\omega)^2}} > c\\).<br>‚Ä¢ Comme \\(v_\\phi\\) d√©pend de \\(\\omega\\), le plasma est un milieu <b>dispersif</b>.<br>‚Ä¢ \\(B = E/v_\\phi\\).<br>‚Ä¢ \\(\\vec{E}\\) et \\(\\vec{B}\\) sont en phase.|${PEM14}
10203|<span style="color: rgb(255, 170, 0);">(B.R.)</span> Bilan pour une OPPM dans un plasma lorsque sa pulsation \\(\\omega < \\omega_p\\) :|‚Ä¢ Le nombre d'onde \\(\\underline{k}\\) est <b>imaginaire pur</b> (\\(\\underline{k}^2 < 0\\)).<br>‚Ä¢ Il n'y a pas de propagation : l'onde est <b>totalement r√©fl√©chie</b> par le plasma.<br>‚Ä¢ Dans le plasma, l'onde s'att√©nue exponentiellement : c'est une <b>onde √©vanescente</b>.<br>‚Ä¢ La distance de p√©n√©tration est \\(\\delta = 1/|Im(\\underline{k})| = \\frac{c}{\\sqrt{\\omega_p^2 - \\omega^2}}\\).<br>‚Ä¢ \\(\\vec{E}\\) et \\(\\vec{B}\\) sont en <b>quadrature de phase</b> (d√©phasage de \\(\\pi/2\\)).|${PEM14}
10204|D√©finir le dip√¥le oscillant.|<img src="images/paste-eb2c6fd00e3b25d364dc61ba7017cf4dd65d9990.jpg">|${PEM15}
10205|<span style="color: rgb(255, 170, 0);">(F.H)</span> Repr√©senter l'indicatrice de rayonnement.|L'indicatrice de rayonnement repr√©sente la r√©partition spatiale de la puissance rayonn√©e. Pour le dip√¥le oscillant, elle a la forme d'un tore (un "donut") align√© avec l'axe du dip√¥le, montrant que le rayonnement est maximal dans le plan √©quatorial (\\(\\theta = \\pi/2\\)) and nul le long de l'axe (\\(\\theta=0\\) ou \\(\\pi\\)).<br><img src="images/paste-4916eec46c60d4430b71a9afe98595aa130044bd.jpg"><br><img src="images/paste-63b4fdc36be49d8390c5adc4e721a62990b428b7.jpg">|${PEM15}
10206|<span style="color: rgb(255, 170, 0);">(F.H)</span> D√©finir la zone de rayonnement (ou zone lointaine) d'un dip√¥le.|<img src="images/paste-39f01c3e9e7291d506d17d40165d29f2b130efc6.jpg">|${PEM15}
10207|Donner la signification de l'approximation \\(a \\ll \\lambda\\) pour un dip√¥le rayonnant.|Cette approximation (taille du dip√¥le \\(a\\) tr√®s petite devant la longueur d'onde \\(\\lambda\\)) signifie qu'on n√©glige le retard de propagation au sein m√™me de la source. On consid√®re que les informations √©mises par les diff√©rents points du dip√¥le √† un instant \\(t_{emis}\\) arrivent toutes en m√™me temps \\(t_{obs} = t_{emis} + r/c\\) en un point d'observation lointain M. Cela correspond √† un r√©gime non relativiste pour les charges.|${PEM15}
10208|Donner la signification de l'approximation \\(a \\ll r\\).|C'est l'<b>approximation dipolaire</b> classique : on observe le champ √† une distance \\(r\\) tr√®s grande par rapport √† la taille \\(a\\) de la source.|${PEM15}
10209|<span style="color: rgb(0, 255, 0);">(Y.Z)</span> Dans la zone de rayonnement, quelle est la structure du champ √©lectromagn√©tique ?|Dans la zone de rayonnement, le champ √©lectromagn√©tique rayonn√© par le dip√¥le a localement la structure d'une <b>Onde Plane Progressive (OPP) sph√©rique</b>, se propageant radialement selon le vecteur \\(\\vec{u}_r\\).|${PEM15}
10210|(Y.Z) La puissance moyenne rayonn√©e \\(\\langle \\vec{\\pi} \\rangle\\) est proportionnelle √† \\(\\sin^2\\theta\\). Que peut-on dire de l'√©mission dipolaire ?|L'√©mission est <b>anisotrope</b> : elle n'est pas la m√™me dans toutes les directions.<br>‚Ä¢ Elle est maximale dans le plan √©quatorial (\\(\\theta = \\pi/2\\)).<br>‚Ä¢ Elle est nulle le long de l'axe du dip√¥le (\\(\\theta = 0\\) ou \\(\\pi\\)).<br><img src="images/paste-18fee75962840b4f99af169dc2f01ec022847b92.jpg">|${PEM15}
10211|<span style="color: rgb(255, 170, 0);">(Y.Z.)</span> Comment interpr√©ter le fait que la puissance moyenne totale rayonn√©e \\(\\langle P_{ray} \\rangle\\) √† travers une sph√®re de rayon R est ind√©pendante de R ?|<img src="images/paste-c72c9182f9f87b963549dd7649a13753d092847d.jpg">|${PEM15}
10212|<span style="color: rgb(255, 170, 0);">(O.M)</span> Quel est le domaine des longueurs d'onde du visible ?|Le domaine visible s'√©tend d'environ <b>400 nm</b> (violet/bleu) √† <b>800 nm</b> (rouge).<br>‚Ä¢ En dessous de 400 nm : ultraviolets (UV).<br>‚Ä¢ Au-dessus de 800 nm : infrarouges (IR).|${PO1}
10213|<span style="color: rgb(255, 170, 0);">(O.M)</span> Rappeler les lois de Snell-Descartes pour la r√©fraction.<br><img alt="Loi de Snell-Descartes de la r√©fraction" src="images/paste-c7bf83916ccaa57839ec7f7820070209eeb04b43.png">|1. Le rayon r√©fract√©, le rayon incident et la normale √† la surface sont dans le m√™me plan (le <b>plan d'incidence</b>).<br>2. La relation entre les angles d'incidence \\(i_1\\) et de r√©fraction \\(i_2\\) est : \\(n_1 \\sin(i_1) = n_2 \\sin(i_2)\\).|${PO1}
10214|<span style="color: rgb(255, 170, 0);">(O.M)</span> D√©finir les notions de surface d'onde, onde sph√©rique et onde plane.|‚Ä¢ <b>Surface d'onde :</b> Ensemble des points M de l'espace atteints par l'onde √† un m√™me instant t, donc ayant la m√™me phase \\(\\phi(M,t) = cste\\).<br>‚Ä¢ <b>Onde sph√©rique :</b> Onde dont les surfaces d'onde sont des sph√®res concentriques (√©mise par une source ponctuelle).<br>‚Ä¢ <b>Onde plane :</b> Onde dont les surfaces d'onde sont des plans parall√®les entre eux.|${PO1}
10215|<span style="color: rgb(0, 255, 0);">(O.M)</span> √ânoncer le th√©or√®me de Malus.|Dans un milieu isotrope, les rayons lumineux sont orthogonaux aux surfaces d'onde.|${PO1}
10216|<span style="color: rgb(255, 170, 0);">(O.M)</span> Comment cr√©er une onde plane √† l'aide d'une lentille convergente ?|Il faut placer une source ponctuelle dans le <b>plan focal objet</b> de la lentille convergente.<br><img src="images/paste-48a3478626e3577356a1c4dabb89e948360635df.jpg">|${PO1}
10217|<span style="color: rgb(255, 170, 0);">(O.M)</span> Calculer la diff√©rence de marche \\(\\delta\\) entre les deux rayons r√©fl√©chis par une lame d'air ou de verre.<br><img src="images/paste-6880d97333b2c73cc8f6a00f175f3edd591b0df6.jpg">|Il y a deux contributions √† la diff√©rence de marche \\(\\delta = (chemin_2) - (chemin_1)\\) :<br>1. <b>Diff√©rence de chemin g√©om√©trique :</b> Le rayon 2 parcourt une distance suppl√©mentaire de \\(2e\\) dans le milieu d'indice \\(n_v\\). Cela donne une diff√©rence de marche de \\(\\delta_g = 2n_v e\\).<br>2. <b>D√©phasage √† la r√©flexion :</b> Si la r√©flexion se fait d'un milieu moins r√©fringent vers un milieu plus r√©fringent (ex: Air/Verre, \\(n_{air} < n_{verre}\\)), un d√©phasage de \\(\\pi\\) est ajout√©. Cela correspond √† une diff√©rence de marche additionnelle de \\(\\lambda_0/2\\).<br><b>Bilan :</b> \\(\\delta = 2n_v e + \\lambda_0/2\\) (si r√©flexion \\(n_1 < n_2\\)) ou \\(\\delta = 2n_v e\\) (si r√©flexion \\(n_1 > n_2\\)).|${PO1}
10218|<span style="color: rgb(255, 170, 0);">(L.S)</span> Formule du chemin optique (SM) dans un milieu homog√®ne d'indice n.|Dans un milieu homog√®ne d'indice \\(n\\) constant, la lumi√®re se propage en ligne droite. Le chemin optique entre S et M est simplement :<br>\\[(SM) = n \\times SM\\]o√π SM est la distance g√©om√©trique entre S et M.|${PO1}
10219|<span style="color: rgb(255, 170, 0);">(O.M)</span> Retrouver la loi de Snell-Descartes √† l'aide du th√©or√®me de Malus.<br><img src="images/paste-0f0c81aa98bc40398c2ebf1c0d23fc8fc47630bb.jpg">|On consid√®re deux surfaces d'onde, l'une avant (contenant A et H) et l'autre apr√®s le dioptre (contenant J et B). Par d√©finition, tous les chemins optiques entre ces deux surfaces sont √©gaux : \\((HB) = (AJ)\\).<br>Dans les triangles rectangles, on a \\(HB = AB \\sin\\theta\\) et \\(AJ = AB \\sin\\theta'\\).<br>Comme les milieux sont homog√®nes, \\((HB) = n \\cdot HB\\) et \\((AJ) = n' \\cdot AJ\\).<br>L'√©galit√© des chemins optiques donne donc \\(n \\cdot AB \\sin\\theta = n' \\cdot AB \\sin\\theta'\\), ce qui simplifie en \\(n\\sin\\theta = n'\\sin\\theta'\\).|${PO1}
10220|<span style="color: rgb(0, 255, 0);"><b>(MAG)</b></span><br><img src="images/paste-238a7158d0fbb60d39022fd285b56f918dd29e0d.jpg">|<img src="images/paste-1a5c9e434fc7fba5cee47a88b0c5589fdd2023f6.jpg">|${PO1}
10221|<span style="color: rgb(0, 255, 0);"><b>(MAG)</b></span><br><img src="images/paste-1fbffd340ad708be06cde27faac42463c5d01824.jpg">|<img src="images/paste-f34dd382a3eb1540065c45ad246b2e942af5a970.jpg">|${PO1}
10222|<span style="color: rgb(255, 170, 0);"><b>(MAG)</b></span> D√©finir l'indice optique \\(n\\). Que vaut-il pour le vide ? Et pour un autre milieu ?<br><img src="images/paste-abf29704c23478669ebd5039478a6523c111b79c.jpg">|L'indice optique \\(n\\) en un point P est le rapport entre la c√©l√©rit√© de la lumi√®re dans le vide (c) et la vitesse de la lumi√®re \\(v(P)\\) en ce point : \\(n(P) = \\frac{c}{v(P)}\\).<br>‚Ä¢ Pour le vide, \\(v=c\\), donc \\(n=1\\).<br>‚Ä¢ Pour tout autre milieu mat√©riel, \\(v<c\\), donc \\(n>1\\).|${PO1}
10223|<span style="color: rgb(255, 170, 0);"><b>(MAG)</b></span> Exprimer le chemin optique (SM) et donner sa signification physique.<br><img src="images/paste-4a3b3502893e774b283a2676369d0093cb0e0f86.jpg">|Le temps de parcours de S √† M est \\(t_{SM} = \\int_S^M \\frac{dl}{v(P)} = \\int_S^M \\frac{n(P)}{c}dl\\).<br>Le chemin optique est d√©fini par \\((SM) = c \\cdot t_{SM}\\), soit :<br>\\[(SM) = \\int_S^M n(P)dl\\]<b>Signification :</b> Le chemin optique est la distance qu'aurait parcourue la lumi√®re dans le vide pendant la m√™me dur√©e \\(t_{SM}\\).|${PO1}
10224|<span style="color: rgb(255, 170, 0);"><b>(MAG)</b></span> √ânoncer le principe de Fermat.<br><img src="images/paste-6873a781cb1192efdf16baf4eec431a40cb2af19.jpg">|Le principe de Fermat stipule que le chemin optique suivi par la lumi√®re pour aller d'un point A √† un point B est extr√©mal (minimal, maximal ou stationnaire) par rapport aux chemins optiques voisins.<br>Une cons√©quence est que tous les rayons issus d'un point source A et arrivant en un point image A' ont le m√™me chemin optique : \\((AA') = cste\\). C'est la condition de stigmatisme rigoureux.|${PO1}
10225|<span style="color: rgb(255, 170, 0);"><b>(MAG)</b></span> Pour chaque cas, indiquer le sens de propagation de l'onde.<br><img src="images/paste-8fd2d6224be55d861eaf41b65cd9d79c32b0f366.jpg">|1. \\((\\omega t - kx)\\) : sens des x croissants.<br>2. \\((\\omega t + kx)\\) : sens des x d√©croissants.<br>3. \\((kx + \\omega t)\\) : sens des x d√©croissants.<br>4. \\((kx - \\omega t)\\) : revient √† \\(-(\\omega t - kx)\\), le signe de la phase n'importe pas, donc sens des x croissants.|${PO1}
10226|<span style="color: rgb(0, 255, 0);"><b>(MAG)</b></span><br><img src="images/paste-390cb59c26a1294587ee88e68cae62913c043f95.jpg">|<img src="images/paste-ec7e86b684f990ff7afa6167e99cfbfdfaffdee8.jpg">|${PO1}
10227|<span style="color: rgb(255, 170, 0);">(L.S)</span> Exercice 6.1 : Construire l'image A' de A et tracer l'allure des surfaces d'onde.<br><img src="images/6.1.PNG">|<img src="images/paste-73a055b197e1d292b6d4db07cc3d139ebebc4320.jpg">|${PO1}
10228|<span style="color: rgb(255, 170, 0);">(L.S)</span> Exercice 6.2 : Construire l'image A' de A et tracer l'allure des surfaces d'onde.<br><img src="images/6.2.PNG">|<img src="images/paste-f063776cbb7c0576250e5ab8e21e2b6f3d706359.jpg">|${PO1}
10229|<span style="color: rgb(255, 170, 0);">(L.S)</span> Exercice 6.3 : Construire l'image A' de A et tracer l'allure des surfaces d'onde.<br><img src="images/6.3.PNG">|<img src="images/paste-3574f56ff02dc7444f84ead0c013a0c3870f9199.jpg">|${PO1}
10230|<span style="color: rgb(255, 170, 0);">(L.S)</span> Exercice 6.4 : Construire l'image A' de A et tracer l'allure des surfaces d'onde.<br><img src="images/6.4.PNG">|<img src="images/paste-1f7e79eb3eae3a9f6fa526e2156258251e313b9b.jpg">|${PO1}
10231|<span style="color: rgb(255, 170, 0);">(S.D.S)</span> Une onde plane arrive √† incidence normale sur une lame de verre avec un d√©faut. Quelle est l'allure des rayons et des surfaces d'onde ?<br><img src="images/paste-61357fd753bc69fb69b279a50ab605b2256f24f74.jpg" width="500px">|‚Ä¢ <b>Rayons :</b> En incidence normale (\\(i_1=0\\)), les rayons ne sont pas d√©vi√©s (\\(i_2=0\\)). Ils traversent la lame en ligne droite.<br>‚Ä¢ <b>Surfaces d'onde :</b> Elles restent des plans perpendiculaires aux rayons. Cependant, le rayon passant par le d√©faut (sur√©paisseur \\(\\Delta e\\)) accumule un chemin optique plus long. La surface d'onde correspondante est donc "en retard" par rapport au reste du front d'onde.<br><img src="images/WhatsApp Image 2023-12-10 √† 15.48.49_ce6bc42e.jpg" width="500px">|${PO1}
10232|<span style="color: rgb(255, 170, 0);">(S.D.S)</span> Calculer la diff√©rence de phase entre A' et B'.<br><img src="images/paste-59542684149954daa7ee8ef603ab41b7d315ff58.jpg">|Les points A et B sont sur la m√™me surface d'onde, donc \\(\\phi(A) = \\phi(B)\\).<br>Le chemin optique de A √† A' est \\((AA') = n_v e + n_{air}(x-e)\\).<br>Le chemin optique de B √† B' est \\((BB') = n_v(e+\\Delta e) + n_{air}(x-e-\\Delta e)\\).<br>La diff√©rence de phase est \\(\\phi(B') - \\phi(A') = -\\frac{2\\pi}{\\lambda_0}((BB') - (AA'))\\).<br>Apr√®s calcul, \\((BB') - (AA') = \\Delta e(n_v - n_{air})\\).<br>Donc, \\(\\phi(B') - \\phi(A') = -\\frac{2\\pi}{\\lambda_0}\\Delta e(n_v - n_{air})\\).|${PO1}
10233|<span style="color: rgb(0, 255, 0);">(B.R.)</span> Ordre de grandeur de la p√©riode temporelle d'une onde lumineuse visible ?|\\[T = \\frac{\\lambda}{c} \\approx \\frac{500 \\times 10^{-9}}{3 \\times 10^8} \\approx 1.7 \\times 10^{-15} \\; s\\]C'est de l'ordre de la <b>femtoseconde</b> (\\(10^{-15} s\\)).|${PO2}
10234|<span style="color: rgb(255, 170, 0);">(B.R.)</span> Quel est le temps de r√©ponse typique des d√©tecteurs de lumi√®re (≈ìil, capteur) ?|Les d√©tecteurs sont beaucoup trop lents pour suivre les oscillations du champ √©lectromagn√©tique :<br>‚Ä¢ ≈íil humain : \\(\\tau_r \\approx 0.1 \\; s\\)<br>‚Ä¢ Capteur CCD (cam√©ra) : \\(\\tau_r \\approx 10^{-4} \\; s\\)<br>Ils mesurent donc une valeur moyenne temporelle, proportionnelle √† l'intensit√© lumineuse \\(\\langle E^2 \\rangle\\).|${PO2}
10235|<span style="color: rgb(255, 170, 0);">(T.S)</span> D√©crire le mod√®le des trains d'onde.|Une source r√©elle n'√©met pas une onde sinuso√Ødale parfaite et infinie. On la mod√©lise comme une succession de "trains d'onde".<br>‚Ä¢ Chaque train est une sinuso√Øde de dur√©e finie \\(\\tau_c\\) (le <b>temps de coh√©rence</b>).<br>‚Ä¢ La phase de chaque nouveau train est al√©atoire et d√©corr√©l√©e de la pr√©c√©dente.<br>Le temps de coh√©rence est li√© √† la largeur spectrale \\(\\Delta f\\) de la source par \\(\\tau_c \\approx 1/\\Delta f\\).|${PO2}
10236|<span style="color: rgb(0, 255, 0);">(T.S)</span> Quelle relation lie la largeur spectrale \\(\\Delta f\\) d'un signal √† sa dur√©e \\(\\Delta t\\) ?|C'est une relation de type "incertitude" : un signal plus court dans le temps est plus √©tal√© en fr√©quence, et vice-versa.<br>\\[\\Delta f \\cdot \\Delta t \\approx 1\\]|${PO2}
10237|<span style="color: rgb(255, 170, 0);">(T.S)</span> D√©finir la longueur de coh√©rence temporelle \\(L_c\\) et sa relation avec la diff√©rence de marche \\(\\delta\\) pour observer des interf√©rences.|La longueur de coh√©rence est la distance parcourue par la lumi√®re pendant le temps de coh√©rence : \\(L_c = c \\cdot \\tau_c\\).<br>Pour que deux ondes puissent interf√©rer, il faut que la diff√©rence de marche \\(\\delta(M)\\) entre elles soit inf√©rieure √† la longueur de coh√©rence de la source :<br>\\[\\delta(M) < L_c\\]|${PO2}
10238|<span style="color: rgb(255, 170, 0);">(T.S)</span> Donner les ordres de grandeur de \\(L_c\\) pour :<br>- Lumi√®re blanche<br>- Lampe √† vapeur de mercure<br>- Laser He-Ne|‚Ä¢ <b>Lumi√®re blanche</b> (tr√®s large spectre) : \\(L_c \\approx 1 \\; \\mu m\\)<br>‚Ä¢ <b>Lampe spectrale</b> (raie fine) : \\(L_c \\approx 0.1 - 1 \\; mm\\)<br>‚Ä¢ <b>Laser He-Ne</b> (tr√®s monochromatique) : \\(L_c \\approx 100 \\; m\\) (voire km)|${PO2}
10239|<span style="color: rgb(255, 170, 0);">(T.S)</span> Citer les deux grands types de syst√®mes interf√©rentiels et donner un exemple pour chacun.|1. <b>Interf√©rom√®tres par division du front d'onde :</b> On s√©lectionne deux parties spatialement distinctes d'un m√™me front d'onde pour cr√©er deux sources secondaires coh√©rentes.<br> &nbsp;&nbsp;&nbsp;<i>Exemple : Trous d'Young, miroirs de Fresnel.</i><br>2. <b>Interf√©rom√®tres par division d'amplitude :</b> L'onde incidente est s√©par√©e en deux ondes (une r√©fl√©chie, une transmise) par un composant semi-r√©fl√©chissant.<br> &nbsp;&nbsp;&nbsp;<i>Exemple : Interf√©rom√®tre de Michelson, lame de verre.</i>|${PO2}
10240|<span style="color: rgb(255, 170, 0);">(LPB)</span> Pour une frange brillante et une frange sombre, quelles valeurs prennent la diff√©rence de marche \\(\\delta\\), le d√©phasage \\(\\Delta\\phi\\) et l'ordre d'interf√©rence \\(p\\) ?|‚Ä¢ <b>Frange brillante (interf√©rences constructives) :</b><br>\\(\\delta = m \\lambda_0\\)<br>\\(\\Delta\\phi = 2m\\pi\\)<br>\\(p = m\\), avec \\(m \\in \\mathbb{Z}\\).<br><br>‚Ä¢ <b>Frange sombre (interf√©rences destructives) :</b><br>\\(\\delta = (m + 1/2) \\lambda_0\\)<br>\\(\\Delta\\phi = (2m+1)\\pi\\)<br>\\(p = m + 1/2\\), avec \\(m \\in \\mathbb{Z}\\).|${PO2}
10241|<span style="color: rgb(255, 170, 0);">(LPB)</span> D√©finition du contraste (ou visibilit√©) des franges.|Le contraste C mesure la "visibilit√©" des franges d'interf√©rence. Il est d√©fini par :<br>\\[C = \\frac{I_{max} - I_{min}}{I_{max} + I_{min}}\\]C est un nombre sans dimension compris entre 0 (pas d'interf√©rence visible) et 1 (contraste parfait).|${PO2}
10242|<span style="color: rgb(0, 255, 0);">(LPB)</span> Formule de Fresnel et d√©finitions associ√©es.|<img src="images/Capture d'√©cran 2023-12-07 193849.png">|${PO2}
10243|<span style="color: rgb(255, 170, 0);">Z.S</span> D√©terminer l'ordre de grandeur de \\(\\tau_c\\) pour la raie verte du mercure (\\(\\lambda_0=546\\,nm\\), \\(\\Delta\\lambda=1\\,nm\\)).|On a \\(f=c/\\lambda\\). En diff√©renciant, \\(|df| = \\frac{c}{\\lambda^2}|d\\lambda|\\), donc \\(\\Delta f \\approx \\frac{c}{\\lambda_0^2}\\Delta\\lambda\\).<br>Le temps de coh√©rence est \\(\\tau_c \\approx \\frac{1}{\\Delta f} \\approx \\frac{\\lambda_0^2}{c \\cdot \\Delta\\lambda}\\).<br>A.N. : \\(\\tau_c \\approx \\frac{(546 \\times 10^{-9})^2}{(3 \\times 10^8) \\cdot (1 \\times 10^{-9})} \\approx 10^{-12} s\\) (1 picoseconde).|${PO2}
10244|Quelles sont les conditions pour que deux ondes interf√®rent en un point M ? Quelle est l'expression de l'intensit√© r√©sultante ?|1. Les ondes doivent √™tre <b>coh√©rentes</b> (issues de la m√™me source).<br>2. Elles doivent avoir la <b>m√™me fr√©quence</b> (ou longueur d'onde).<br>3. La diff√©rence de marche \\(\\delta(M)\\) doit √™tre <b>inf√©rieure √† la longueur de coh√©rence</b> \\(L_c\\).<br>4. (Optionnel) Leurs polarisations ne doivent pas √™tre orthogonales.<br><br>Si ces conditions sont remplies :<br>\\(I(M) = I_1 + I_2 + 2\\sqrt{I_1 I_2} \\cos(\\frac{2\\pi}{\\lambda_0}\\delta(M))\\)<br><br>Sinon, les intensit√©s s'ajoutent simplement : \\(I(M) = I_1 + I_2\\).|${PO2}
10245|Calcul de l'intensit√© lumineuse en notation complexe.|L'intensit√© est proportionnelle au carr√© du module de l'amplitude complexe totale :<br>\\[I(M) \\propto |\\underline{a}_{total}|^2 = |\\underline{a}_1 + \\underline{a}_2|^2\\]Si \\(I = K\\langle a^2 \\rangle\\), alors en notation complexe \\(I = \\frac{1}{2} K |\\underline{a}|^2\\).<br>Pour des interf√©rences, \\(I_{total} = \\frac{1}{2}K (\\underline{a}_1+\\underline{a}_2)(\\underline{a}_1^*+\\underline{a}_2^*) = I_1+I_2+2\\sqrt{I_1I_2}\\cos(\\Delta\\phi)\\).|${PO2}
10246|<span style="color: rgb(255, 170, 0);">(Y)</span><br>1. Sch√©ma du dispositif des trous d'Young.<br>2. Exprimer la diff√©rence de marche \\(\\delta\\) et l'intensit√© \\(I\\) en un point M(x) de l'√©cran.|1. Sch√©ma :<br><img src="images/paste-b443fcf093a3ca4302e5e76ea046eb563521e601.jpg"><br>2. La diff√©rence de marche est \\(\\delta(M) = (S_2M) - (S_1M)\\).<br>Dans l'approximation o√π la distance √† l'√©cran \\(D\\) est grande devant la distance entre les fentes \\(a\\) et la position \\(x\\) (\\(D \\gg a, x\\)), on trouve :<br>\\[\\delta(M) \\approx \\frac{ax}{D}\\](en supposant un indice \\(n=1\\)).<br>L'intensit√© lumineuse est donn√©e par la formule de Fresnel pour deux sources d'√©gale intensit√© \\(I_0\\) :<br>\\[I(x) = 2I_0 \\left(1 + \\cos\\left(\\frac{2\\pi}{\\lambda_0} \\frac{ax}{D}\\right)\\right) = 4I_0 \\cos^2\\left(\\frac{\\pi ax}{\\lambda_0 D}\\right)\\]|${PO3}
10247|Quand dit-on que les interf√©rences sont <b>non localis√©es</b> ? Donner un exemple.|Lorsque les franges d'interf√©rences sont visibles et bien contrast√©es quelle que soit la position de l'√©cran dans le champ d'interf√©rence, on dit qu'elles sont non localis√©es.<br><b>Exemple :</b> Le dispositif des trous d'Young √©clair√© par une source ponctuelle produit des interf√©rences non localis√©es.|${PO3}
10248|Pour une source ponctuelle (centr√©e ou non), quelle est l'expression de l'<b>interfrange</b> \\(i\\) dans le montage des trous d'Young ?|L'interfrange est la distance entre deux franges brillantes (ou sombres) cons√©cutives. Elle est donn√©e par :<br>\\[i = \\frac{\\lambda_0 D}{a}\\]en supposant que l'exp√©rience a lieu dans l'air (\\(n \\approx 1\\)).|${PO3}
10249|(F.H) D√©terminer la diff√©rence de marche pour le dispositif des trous d'Young avec une source ponctuelle <b>excentr√©e</b>.<br><img src="images/imgfh1.jpg">|La diff√©rence de marche totale est la somme de deux contributions :<br>\\(\\delta(M) = [(S_2M) - (S_1M)] + [(SS_2) - (SS_1)]\\)<br>‚Ä¢ Le premier terme est la diff√©rence de marche due au trajet apr√®s les fentes : \\(\\frac{ax}{D}\\).<br>‚Ä¢ Le second terme est la diff√©rence de marche due au trajet avant les fentes : \\(-\\frac{ab}{l}\\).<br>La diff√©rence de marche totale est donc :<br>\\[\\delta(M) = \\frac{ax}{D} - \\frac{ab}{l}\\]|${PO3}
10250|<span style="color: rgb(255, 170, 0);">(F.H)</span> R√©aliser le sch√©ma du montage des trous d'Young avec observation √† l'infini (montage √† deux lentilles).|<img src="images/paste-9a60a5058a996c2a13547706b58d971c86f71533.jpg">|${PO3}
10251|(F.H) D√©terminer la diff√©rence de marche pour le dispositif des trous d'Young avec observation √† l'infini (lentille apr√®s les fentes).<br><img src="images/imgfh3.jpg">|Les rayons issus de S1 et S2 qui convergent en M sont parall√®les entre eux avant la lentille, formant un angle \\(\\theta\\) avec l'axe. La diff√©rence de marche est la distance \\((S_2H)\\).<br>Dans le triangle rectangle \\((S_1S_2H)\\), on a \\((S_2H) = S_1S_2 \\sin\\theta = a\\sin\\theta\\).<br>Dans l'approximation des petits angles, \\(\\sin\\theta \\approx \\tan\\theta = x/f'_2\\).<br>La diff√©rence de marche est donc :<br>\\[\\delta(M) = a\\sin\\theta \\approx \\frac{ax}{f'_2}\\]|${PO3}
10252|(F.H) Exprimer la diff√©rence de phase \\(\\Delta\\phi(M)\\) dans le cas o√π \\(\\delta(M) = \\frac{ax}{f'_2}\\).|La relation entre d√©phasage et diff√©rence de marche est \\(\\Delta\\phi(M) = \\frac{2\\pi}{\\lambda_0}\\delta(M)\\).<br>On a donc :<br>\\[\\Delta\\phi(M) = \\frac{2\\pi a x}{\\lambda_0 f'_2}\\]|${PO3}
10253|(F.H) Quelle est l'expression de l'interfrange pour un montage des trous d'Young avec observation √† l'infini (lentille L2 de focale \\(f'_2\\)) ?|L'intensit√© varie en \\(\\cos(\\frac{2\\pi a x}{\\lambda_0 f'_2})\\). La p√©riode spatiale de ce signal est l'interfrange \\(i\\).<br>\\(\\frac{2\\pi a i}{\\lambda_0 f'_2} = 2\\pi \\Rightarrow i = \\frac{\\lambda_0 f'_2}{a}\\).|${PO3}
10254|<span style="color: rgb(255, 170, 0);">(Y)</span> Pour le dispositif des trous d'Young, d√©terminer l'allure des franges, l'interfrange, et la position des franges brillantes et sombres.<br><img src="images/paste-b443fcf093a3ca4302e5e76ea046eb563521e601.jpg">|‚Ä¢ <b>Allure :</b> L'intensit√© \\(I(x)\\) ne d√©pend que de \\(x\\). Les lieux de m√™me intensit√© sont des droites d'√©quation \\(x=cste\\). Les franges sont des <b>droites verticales</b> parall√®les √† l'axe (Oy).<br>‚Ä¢ <b>Interfrange :</b> \\(i = \\frac{\\lambda_0 D}{a}\\) (pour \\(n=1\\)).<br>‚Ä¢ <b>Franges brillantes (p=m) :</b> \\(\\delta = m\\lambda_0 \\Rightarrow \\frac{ax}{D}=m\\lambda_0 \\Rightarrow x_m = m \\cdot i\\).<br>‚Ä¢ <b>Franges sombres (p=m+1/2) :</b> \\(\\delta = (m+1/2)\\lambda_0 \\Rightarrow x_m = (m+1/2) \\cdot i\\).|${PO3}
10255|<span style="color: rgb(255, 170, 0);">(M.S)</span> Quels sont les √©l√©ments constitutifs de l'interf√©rom√®tre de Michelson ?|‚Ä¢ Une source lumineuse.<br>‚Ä¢ Une lame <b>s√©paratrice</b> (SP), semi-r√©fl√©chissante.<br>‚Ä¢ Une lame <b>compensatrice</b> (C), de m√™me √©paisseur et indice que la SP.<br>‚Ä¢ Deux miroirs plans, M1 (mobile en translation) et M2 (orientable).<br>‚Ä¢ Des vis de r√©glage (chariotage et orientation).<br>‚Ä¢ Un √©cran ou un d√©tecteur pour l'observation.|${PO4}
10256|<span style="color: rgb(255, 170, 0);">(M.S)</span> Comment sont positionn√©s les miroirs M1 et M2 l'un par rapport √† l'autre ?|Ils sont <b>presque perpendiculaires</b>. Un l√©ger angle entre eux permet de cr√©er un "coin d'air".|${PO4}
10257|<span style="color: rgb(255, 170, 0);">(M.S)</span> Quel est l'angle approximatif form√© par la s√©paratrice avec les miroirs ?|La s√©paratrice est inclin√©e √† <b>45¬∞</b> par rapport √† l'axe optique principal.|${PO4}
10258|<span style="color: rgb(255, 170, 0);">(M.S)</span> √Ä quoi servent les vis de rotation des miroirs ?|Elles permettent de modifier tr√®s finement l'orientation du miroir M2, et donc de changer l'angle \\(\\alpha\\) du coin d'air √©quivalent. C'est essentiel pour passer du r√©glage "coin d'air" √† "lame d'air".|${PO4}
10259|<span style="color: rgb(255, 170, 0);">(M.S)</span> Quelle est la fonction de la lame semi-r√©fl√©chissante (s√©paratrice) ?|Elle r√©alise une <b>division d'amplitude</b> : elle s√©pare le faisceau lumineux incident en deux faisceaux coh√©tents, l'un transmis vers le miroir M1 et l'autre r√©fl√©chi vers le miroir M2. Elle recombine ensuite ces deux faisceaux pour cr√©er des interf√©rences.|${PO4}
10260|<span style="color: rgb(0, 255, 0);">(M.S)</span> Quelle est la fonction de la vis de chariotage ?|Elle permet de d√©placer le miroir M1 en translation le long de l'axe optique. Cela modifie la distance \\(d = O_1O'_2\\) et donc la diff√©rence de marche entre les deux bras de l'interf√©rom√®tre.|${PO4}
10261|<span style="color: rgb(255, 170, 0);">(M.S)</span> Quel est le r√¥le du verre anticalorique (VAC) √† l'entr√©e du Michelson ?|Il sert de filtre pour bloquer le rayonnement infrarouge √©mis par la source, qui pourrait √©chauffer et endommager les composants optiques sans contribuer √† l'image visible.|${PO4}
10262|<span style="color: rgb(255, 170, 0);">(M.S)</span> Comment peut-on modifier la diff√©rence de marche dans le Michelson ?|On peut la modifier de deux mani√®res :<br>1. En <b>chariotant</b> le miroir M1, ce qui change l'√©paisseur \\(e\\) de la lame d'air √©quivalente.<br>2. En changeant l'<b>orientation</b> du miroir M2, ce qui modifie l'angle \\(\\alpha\\) du coin d'air.|${PO4}
10263|<span style="color: rgb(255, 170, 0);">(M.S)</span> Que repr√©sentent les sources secondaires S1 et S2 dans le Michelson ?|Ce sont les images virtuelles de la source S √† travers les deux bras de l'interf√©rom√®tre. S1 est l'image de S par le miroir M1. S2 est l'image de S par le miroir M'2 (sym√©trique de M2 par rapport √† la s√©paratrice). Les interf√©rences observ√©es sont celles produites par ces deux sources virtuelles coh√©rentes.|${PO4}
10264|Pour un Michelson en <b>coin d'air</b> (angle \\(\\alpha\\)) :<br>1. Donner l'expression de l'intensit√© \\(I(M)\\).<br>2. Donner l'interfrange \\(i\\).<br>3. Quel est le lien entre le d√©filement des franges et le d√©placement de M1 ?<br><img src="images/paste-c17d437c97f3bbf3f4ed711c99e018069921b86b.jpg">|1. \\(\\delta(x) = 2\\alpha x\\) (pour \\(n=1\\)). L'intensit√© est \\(I(x) = 2I_0(1+\\cos(\\frac{4\\pi\\alpha x}{\\lambda_0}))\\). Les franges sont des droites d'√©quation \\(x=cste\\), dites "d'√©gale √©paisseur".<br>2. L'interfrange est \\(i = \\frac{\\lambda_0}{2\\alpha}\\).<br>3. Lorsqu'on translate M1 d'une distance \\(d\\), le nombre de franges qui d√©filent est \\(N = \\frac{2d}{\\lambda_0}\\). Une frange qui d√©file correspond √† une variation de \\(\\delta\\) de \\(\\lambda_0\\), soit un d√©placement de M1 de \\(\\lambda_0/2\\).|${PO4}
10265|<span style="color: rgb(255, 170, 0);">(M.S)</span> Qu'est-ce que le sch√©ma √©quivalent de l'interf√©rom√®tre de Michelson ?|C'est un sch√©ma simplifi√© o√π l'on remplace le bras (s√©paratrice + miroir M2) par le miroir M'2, qui est l'image de M2 par rapport √† la face semi-r√©fl√©chissante de la s√©paratrice. Le Michelson devient alors √©quivalent √† l'interf√©rence entre la lumi√®re r√©fl√©chie par M1 et M'2.<br><img src="images/paste-d07d84a1f13b8af6982560be0ba3e124ca557624.jpg">|${PO4}
10266|<span style="color: rgb(255, 170, 0);">(M.S)</span> Quelle figure d'interf√©rences observe-t-on en configuration "coin d'air", "lame d'air" et "contact optique" ?|‚Ä¢ <b>Coin d'air</b> (M1 et M'2 non parall√®les) : Franges <b>rectilignes</b> d'√©gale √©paisseur.<br><img src="images/paste-a3d5a705a818368d1da37f0122ff6c7d746e1f15.jpg"><br>‚Ä¢ <b>Lame d'air</b> (M1 et M'2 parall√®les) : <b>Anneaux</b> concentriques d'√©gale inclinaison.<br><img src="images/paste-4223f67d2af5c4eb29fa2b09005fbbf651ba46bb.jpg"><br>‚Ä¢ <b>Contact optique</b> (M1 et M'2 confondus) : <b>Teinte plate</b> (√©clairement uniforme).<br><img src="images/paste-47c013e3cf015048cca208a22e792ce8bb1282c6.jpg">|${PO4}
10267|<span style="color: rgb(0, 255, 0);">(C.E.)</span> Condition d'√©clairage pour un Michelson r√©gl√© en <b>lame d'air</b>.|Pour observer les anneaux (franges d'√©gale inclinaison), il faut que la lumi√®re arrive sur la lame d'air avec une grande vari√©t√© d'angles d'incidence \\(i\\). On utilise donc une <b>source √©tendue</b> ou on place une <b>lentille convergente (condenseur)</b> apr√®s la source pour cr√©er un faisceau convergent.|${PO4}
10268|<span style="color: rgb(0, 255, 0);">(C.E.)</span> Condition d'observation pour un Michelson r√©gl√© en <b>lame d'air</b>.|Les interf√©rences sont <b>localis√©es √† l'infini</b>. Pour les observer, on peut soit :<br>‚Ä¢ Regarder "√† l'infini" avec l'≈ìil (sans accommoder).<br>‚Ä¢ Projeter les franges sur un √©cran plac√© dans le <b>plan focal image</b> d'une lentille convergente.|${PO4}
10269|<span style="color: rgb(0, 255, 0);">(C.E.)</span> Conditions d'√©clairage et d'observation pour un Michelson r√©gl√© en <b>coin d'air</b>.|‚Ä¢ <b>√âclairage :</b> On utilise un faisceau de rayons quasi parall√®les en <b>incidence normale</b> (\\(i \\approx 0\\)) pour que la diff√©rence de marche ne d√©pende que de l'√©paisseur locale \\(e(x)\\).<br>‚Ä¢ <b>Observation :</b> Les interf√©rences (franges d'√©gale √©paisseur) sont <b>localis√©es au voisinage des miroirs</b>. On observe donc l'image des miroirs, soit √† l'≈ìil nu en accommodant, soit en projetant l'image des miroirs sur un √©cran avec une lentille.|${PO4}
10270|Quelle est l'expression de la diff√©rence de marche pour un Michelson en coin d'air ? O√π sont localis√©es les interf√©rences ?|En incidence quasi normale, la diff√©rence de marche en un point M (d'abscisse x) est :<br>\\[\\delta(M) \\approx 2e(M) = 2\\alpha x\\]o√π \\(e(M)\\) est l'√©paisseur locale du coin d'air.<br>Les interf√©rences sont <b>localis√©es au voisinage des miroirs</b>.|${PO4}
10271|√âtablir l'expression de la diff√©rence de marche pour un Michelson r√©gl√© en lame d'air. O√π sont localis√©es les interf√©rences ?|Les interf√©rences sont <b>localis√©es √† l'infini</b>.<br><img src="images/paste-07ac48dd5b6af09d4fbe94e765ffc7d4bec2e7fb.jpg"><br>Par un raisonnement sur les chemins optiques, on montre que pour un rayon arrivant avec une incidence \\(i\\), la diff√©rence de marche est :<br>\\[\\delta(i) = 2e \\cos(i)\\]o√π \\(e\\) est l'√©paisseur de la lame d'air (distance entre M1 et M'2).|${PO4}
10272|<span style="color: rgb(0, 255, 0);">(C.J)</span><br>Pour un Michelson en lame d'air (\\(\\delta = 2e\\cos i\\)), comment calculer les ordres d'interf√©rence extr√™mes \\(p_{max}\\) et \\(p_{min}\\) ? Que se passe-t-il si l'angle maximal d'observation \\(\\theta_{max}\\) augmente ?<br><img src="images/sch√©maexo2optique4.PNG">|L'ordre d'interf√©rence est \\(p(i) = \\frac{2e\\cos i}{\\lambda_0}\\).<br>1. L'ordre est maximal au centre (\\(i=0\\)), donc \\(p_{max} = \\frac{2e}{\\lambda_0}\\).<br>L'ordre est minimal en bord de champ (\\(i=\\theta_{max}\\)), donc \\(p_{min} = \\frac{2e\\cos\\theta_{max}}{\\lambda_0}\\).<br>2. Si \\(\\theta_{max}\\) augmente, \\(\\cos\\theta_{max}\\) diminue, donc \\(p_{min}\\) diminue. L'intervalle \\([p_{min}, p_{max}]\\) s'agrandit, on observe donc <b>plus d'anneaux</b>.|${PO4}
10273|<span style="color: rgb(255, 170, 0);">(L.L)</span> Comment passer du r√©glage "coin d'air" au r√©glage "lame d'air" (contact optique exclu) ?|On utilise les vis d'orientation du miroir M2. On fait tourner le miroir de mani√®re √† <b>augmenter l'interfrange</b> \\(i = \\lambda_0 / (2\\alpha)\\).<br>Lorsque l'interfrange devient infinie (\\(\\alpha \\to 0\\)), on atteint la configuration de la lame d'air et on observe une teinte uniforme qui se transforme en anneaux si l'on s'√©carte du contact optique.|${PO4}
10274|<span style="color: rgb(0, 255, 0);">(L.L)</span> Qu'observe-t-on au contact optique dans un interf√©rom√®tre de Michelson ?|Au contact optique, M1 et M'2 sont confondus (\\(e=0\\) et \\(\\alpha=0\\)). La diff√©rence de marche \\(\\delta\\) est nulle partout, quel que soit l'angle d'incidence.<br>L'√©clairement sur l'√©cran est donc uniforme et maximal (frange brillante d'ordre 0). On parle de "teinte plate".|${PO4}
10275|<span style="color: rgb(255, 170, 0);">(A.R)</span> Quelle est l'allure de la figure d'interf√©rence en lame d'air et en coin d'air ? Justifier.|‚Ä¢ En <b>lame d'air</b>, \\(\\delta = 2e\\cos i\\). L'intensit√© ne d√©pend que de l'angle d'incidence \\(i\\). Les lieux d'√©gale intensit√© sont des cercles, d'o√π les <b>anneaux</b> (franges d'√©gale inclinaison).<br>‚Ä¢ En <b>coin d'air</b>, \\(\\delta \\approx 2\\alpha x\\). L'intensit√© ne d√©pend que de la position \\(x\\) (donc de l'√©paisseur locale). Les lieux d'√©gale intensit√© sont des droites, d'o√π les <b>franges rectilignes</b> (franges d'√©gale √©paisseur).|${PO4}
10276|<span style="color: rgb(0, 255, 0);">(A.R)</span> En lame d'air, comment √©volue la figure d'interf√©rence lorsque l'on diminue l'√©paisseur \\(e\\) ? Quel est le cas limite ?|Lorsque l'on diminue l'√©paisseur \\(e\\), l'ordre d'interf√©rence \\(p = 2e\\cos i / \\lambda_0\\) diminue. Pour un ordre \\(p\\) donn√©, \\(\\cos i\\) doit augmenter, donc \\(i\\) doit diminuer. Le rayon des anneaux diminue : les anneaux "rentrent" vers le centre et disparaissent.<br>Le cas limite est le <b>contact optique</b> (\\(e=0\\)), o√π l'on observe une <b>teinte plate</b> uniforme.|${PO4}
`.trim();

    // === LIGHTBOX IMAGE VIEWER ===
    const LB = {
      el:null, stage:null, canvas:null, img:null,
      counter:null,
      images:[], idx:0,
      baseW:0, baseH:0,
      s:1, minS:1, maxS:5, x:0, y:0,
      pointers:new Map(), startDist:0, startS:1, startX:0, startY:0, panStartX:0, panStartY:0,
      tapMoved:false
    };

    function ensureLightbox(){
      if (LB.el) return LB.el;
      const el = document.createElement('div');
      el.className = 'img-lightbox';
      el.innerHTML = `
        <div class="img-stage" id="lbStage" tabindex="-1" aria-label="Image viewer">
          <div class="img-canvas" id="lbCanvas"><img id="lbImg" alt=""></div>
        </div>
        <div class="img-counter" id="lbCounter">1/1</div>
      `;
      document.body.appendChild(el);
      LB.el = el;
      LB.stage = el.querySelector('#lbStage');
      LB.canvas = el.querySelector('#lbCanvas');
      LB.img = el.querySelector('#lbImg');
      LB.counter = el.querySelector('#lbCounter');

      LB.stage.addEventListener('pointerdown', e=>{
        LB.stage.setPointerCapture?.(e.pointerId);
        LB.pointers.set(e.pointerId, {x:e.clientX, y:e.clientY});
        if (LB.pointers.size===1){
          LB.panStartX = LB.x; LB.panStartY = LB.y;
          LB.startX = e.clientX; LB.startY = e.clientY;
          LB.startS = LB.s; LB.tapMoved = false;
        }else if(LB.pointers.size===2){
          const pts=[...LB.pointers.values()];
          LB.startDist = Math.hypot(pts[0].x-pts[1].x, pts[0].y-pts[1].y) || 1;
          LB.startS = LB.s; LB.tapMoved = true;
        }
        e.preventDefault();
      });

      LB.stage.addEventListener('pointermove', e=>{
        if(!LB.pointers.has(e.pointerId)) return;
        LB.pointers.set(e.pointerId, {x:e.clientX, y:e.clientY});
        const dx = e.clientX - LB.startX;
        const dy = e.clientY - LB.startY;
        if (Math.abs(dx)>6 || Math.abs(dy)>6) LB.tapMoved = true;

        if(LB.pointers.size>=2){
          const pts=[...LB.pointers.values()];
          const dist=Math.hypot(pts[0].x-pts[1].x, pts[0].y-pts[1].y) || LB.startDist;
          setLBScaleCentered(LB.startS * (dist/LB.startDist));
        }else{
          setLBPan(LB.panStartX + dx, LB.panStartY + dy);
        }
        e.preventDefault();
      });

      const endPtr = e=>{
        if(LB.pointers.has(e.pointerId)) LB.pointers.delete(e.pointerId);
        if(LB.pointers.size===0){
          if (!LB.tapMoved){
            const r = LB.img.getBoundingClientRect();
            if (!(e.clientX>=r.left && e.clientX<=r.right && e.clientY>=r.top && e.clientY<=r.bottom)) {
              closeLightbox();
            }
          }
          LB.startDist=0;
        }else if(LB.pointers.size===1){
          const p=[...LB.pointers.values()][0];
          LB.startX=p.x; LB.startY=p.y;
          LB.panStartX = LB.x; LB.panStartY = LB.y;
          LB.startS = LB.s; LB.startDist=0;
        }
      };
      LB.stage.addEventListener('pointerup', endPtr);
      LB.stage.addEventListener('pointercancel', endPtr);
      LB.stage.addEventListener('lostpointercapture', endPtr);

      let lastTap=0;
      LB.stage.addEventListener('pointerdown', e=>{
        const now=Date.now();
        if(now-lastTap<250){
          if (LB.s > LB.minS+0.001) setLBScaleCentered(LB.minS);
          else setLBScaleCentered(Math.min(LB.maxS, LB.minS*2.2));
          LB.tapMoved = true;
        }
        lastTap=now;
      });

      LB.stage.addEventListener('wheel', e=>{
        e.preventDefault();
        const step = (e.deltaY>0 ? -0.15 : 0.15);
        setLBScaleCentered(LB.s + step*LB.s);
      }, {passive:false});

      window.addEventListener('resize', ()=>{
        if(LB.el.classList.contains('open')) refitLB();
      });

      return el;
    }

    function openLightboxFor(imgEl, scopeEl){
      ensureLightbox();
      const list = Array.from(scopeEl.querySelectorAll('img'));
      LB.images = list.map(i=>({src:i.currentSrc||i.src, alt:i.alt||'', w:i.naturalWidth||i.width||800, h:i.naturalHeight||i.height||600}));
      LB.idx = Math.max(0, list.indexOf(imgEl));
      LB.el.classList.add('open');
      document.body.dataset._oriOverflow = document.body.style.overflow || '';
      document.body.style.overflow = 'hidden';
      LB.el.focus?.();
      showLB(LB.idx, true);
    }

    function closeLightbox(){
      LB.el.classList.remove('open');
      LB.images=[]; LB.idx=0;
      document.body.style.overflow = document.body.dataset._oriOverflow || '';
    }
    
    function safeCloseLightbox(){
      try { if (LB?.el?.classList.contains('open')) closeLightbox(); } catch(e){}
    }

    function showLB(idx, initial=false){
      if(!LB.images.length) return;
      LB.idx = (idx+LB.images.length) % LB.images.length;
      const it = LB.images[LB.idx];
      LB.img.src = it.src;
      LB.img.alt = it.alt;
      LB.baseW = it.w; LB.baseH = it.h;
      if (LB.counter) LB.counter.textContent = `${LB.idx+1}/${LB.images.length}`;
      refitLB(initial);
    }

    function refitLB(initial=false){
      const sw = LB.stage.clientWidth, sh = LB.stage.clientHeight;
      const fit = Math.min(sw/LB.baseW, sh/LB.baseH);
      LB.minS = fit;
      if (initial){
        LB.s = fit;
        LB.x = (sw - LB.s*LB.baseW)/2;
        LB.y = (sh - LB.s*LB.baseH)/2;
        applyLB();
      }else{
        setLBScaleCentered(fit, true);
      }
    }

    function applyLB(){
      const sw=LB.stage.clientWidth, sh=LB.stage.clientHeight;
      const w=LB.s*LB.baseW, h=LB.s*LB.baseH;
      if (w <= sw) LB.x = (sw - w)/2; else LB.x = clamp(LB.x, sw - w, 0);
      if (h <= sh) LB.y = (sh - h)/2; else LB.y = clamp(LB.y, sh - h, 0);
      LB.canvas.style.width = LB.baseW + 'px';
      LB.canvas.style.height = LB.baseH + 'px';
      LB.canvas.style.transform = `translate(${LB.x}px, ${LB.y}px) scale(${LB.s})`;
    }

    function setLBPan(nx, ny){
      LB.x = nx; LB.y = ny;
      applyLB();
    }

    function setLBScaleCentered(newS, force=false){
      const oldS = LB.s;
      let s = clamp(newS, LB.minS, LB.maxS);
      if (!force && Math.abs(s-oldS)<1e-4) return;
      const cx = LB.stage.clientWidth/2, cy = LB.stage.clientHeight/2;
      const imgCx = (cx - LB.x) / oldS;
      const imgCy = (cy - LB.y) / oldS;
      LB.s = s;
      LB.x = cx - LB.s * imgCx;
      LB.y = cy - LB.s * imgCy;
      applyLB();
    }

    function parseCardsRaw(raw){
      return raw.split(/\r?\n/).map(l=>{
        const p=l.split('|'); if(p.length!==4) return null;
        const [id,f,e,c]=p;
        return {id:id.trim(),front:f.trim(),back:e.trim(),chapter:c.trim()};
      }).filter(Boolean);
    }
    const flashcardDataEN  = parseCardsRaw(cardsRawText);
    const flashcardDataPHY = parseCardsRaw(physicsRawText);
    
    const StateStore = {
      db: null,
      async open(){
        if (this.db) return this.db;
        return this.db = await new Promise((res, rej)=>{
          const req = indexedDB.open('flash9x16_state', 1);
          req.onupgradeneeded = ()=> req.result.createObjectStore('kv');
          req.onsuccess = ()=> res(req.result);
          req.onerror = ()=> rej(req.error);
        });
      },
      async set(key, value){
        const db = await this.open();
        await new Promise((res, rej)=>{
          const tx = db.transaction('kv','readwrite');
          tx.objectStore('kv').put(value, key);
          tx.oncomplete = res; tx.onerror = ()=>rej(tx.error);
        });
      },
      async get(key){
        const db = await this.open();
        return await new Promise((res, rej)=>{
          const tx = db.transaction('kv','readonly');
          const rq = tx.objectStore('kv').get(key);
          rq.onsuccess = ()=>res(rq.result);
          rq.onerror = ()=>rej(rq.error);
        });
      }
    };
    
    // ---------- Utils ----------
    const Media = {
      db:null,
      cache:new Map(),
      async open(){
        if (this.db) return this.db;
        this.db = await new Promise((resolve,reject)=>{
          const req = indexedDB.open('flash9x16_media', 1);
          req.onupgradeneeded = e=>{
            const db = req.result;
            if (!db.objectStoreNames.contains('files')){
              db.createObjectStore('files', { keyPath:'key' });
            }
          };
          req.onsuccess = ()=>resolve(req.result);
          req.onerror = ()=>reject(req.error);
        });
        return this.db;
      },
      async save(key, blob, meta={}){
        const db = await this.open();
        await new Promise((res,rej)=>{
          const tx = db.transaction('files','readwrite');
          tx.objectStore('files').put({ key, blob, meta, ts:Date.now() });
          tx.oncomplete = res; tx.onerror = ()=>rej(tx.error);
        });
        data.mediaIndex = data.mediaIndex || {};
        data.mediaIndex[key] = { name: meta.name||key, type: blob.type, size: blob.size };
        saveData();
      },
      async urlFor(key){
        if (this.cache.has(key)) return this.cache.get(key);
        const db = await this.open();
        const rec = await new Promise((res,rej)=>{
          const tx = db.transaction('files','readonly');
          const rq = tx.objectStore('files').get(key);
          rq.onsuccess = ()=>res(rq.result);
          rq.onerror = ()=>rej(rq.error);
        });
        if (!rec || !rec.blob) throw new Error('Media manquant: '+key);
        const url = URL.createObjectURL(rec.blob);
        this.cache.set(key, url);
        return url;
      },
      revokeAll(){
        for (const url of this.cache.values()) URL.revokeObjectURL(url);
        this.cache.clear();
      },
      async clearAll(){
        const db = await this.open();
        await new Promise((res,rej)=>{
          const tx = db.transaction('files','readwrite');
          tx.objectStore('files').clear();
          tx.oncomplete=res; tx.onerror=()=>rej(tx.error);
        });
        this.revokeAll();
        data.mediaIndex = {};
        saveData();
      },
      rewriteHTMLToPlaceholders(html, nameMap){
        if (!html) return html;
        return String(html).replace(/(<img\b[^>]?\bsrc=["'])([^"']+)(["'][^>]*>)/gi, (m,prefix,src,suffix)=>{
          const clean = src.replace(/^.*[\\\/]/, '').replace(/^_+/, '');
          const key = nameMap[clean] || nameMap[decodeURIComponent(clean)] || null;
          return key ? `${prefix}media://${key}${suffix}` : m;
        });
      },
      async resolveMediaInElement(el){
        const imgs = Array.from(el.querySelectorAll('img[src^="media://"]'));
        await Promise.all(imgs.map(async img=>{
          const key = img.getAttribute('src').replace(/^media:\/\//,'');
          try { img.src = await Media.urlFor(key); } catch(e){ console.warn('media url fail', key, e); }
        }));
      }
    };
    const ensureSQL = (()=> {
      let p=null;
      return ()=> {
        if (p) return p;
        p = initSqlJs({ locateFile: f => `https://cdn.jsdelivr.net/npm/sql.js@1.10.2/dist/${f}` });
        return p;
      };
    })();

    async function importFiles(files){
      for (const file of files){
        const name=file.name.toLowerCase();
        if (name.endsWith('.apkg')) await importApkg(file);
        else if (name.endsWith('.csv') || name.endsWith('.tsv')) await importDelimited(file);
        else if (name.endsWith('.json')) await importJSON(file);
        else console.warn('Format non g√©r√©:', file.name);
      }
    }

    async function importApkg(file) {
      try {
          const buf = await file.arrayBuffer();
          const zip = await JSZip.loadAsync(buf);
          let mediaMap = {};
          const mediaEntry = zip.file(/^media(\.json)?$/i)[0];
          if (mediaEntry) {
              try { mediaMap = JSON.parse(await mediaEntry.async('string')); } catch (e) { console.warn('media.json parse error', e); }
          }
          const importId = `apkg-${slugify(file.name.replace(/\.[^.]+$/,''))}-${Date.now()}`;
          const mediaNameToKey = {};
          for (const [numStr, realName] of Object.entries(mediaMap)) {
              const num = String(numStr);
              const entry = zip.file(new RegExp(`^${num}$`))[0];
              if (!entry) continue;
              const blob = await entry.async('blob');
              const key = `${importId}/${realName||num}`;
              await Media.save(key, blob, { name: realName || num });
              mediaNameToKey[realName] = key;
              mediaNameToKey[num] = key;
          }
          const colEntry = zip.file(/collection\.anki2(1|\.db)?/i)[0];
          if (!colEntry) {
              const fileList = Object.keys(zip.files).join('\n - ');
              throw new Error(`Fichier de base de donn√©es (collection.anki2 ou similaire) introuvable dans le .apkg.\n\nFichiers pr√©sents :\n - ${fileList}`);
          }
          const dbBytes = new Uint8Array(await colEntry.async('uint8array'));
          const SQL = await ensureSQL();
          const db = new SQL.Database(dbBytes);
          let deckById = {};
          try {
              const res = db.exec('select decks from col limit 1');
              if (res && res[0] && res[0].values && res[0].values[0] && res[0].values[0][0]) {
                  deckById = JSON.parse(res[0].values[0][0] || '{}');
              }
          } catch (e) { console.warn('col.decks JSON parse error', e); }
          let rows;
          try {
              const q = `select cards.id as cid, cards.nid, cards.did, cards.ord, notes.flds from cards join notes on notes.id = cards.nid`;
              rows = db.exec(q);
          } catch(e) {
              const tablesRes = db.exec("SELECT name FROM sqlite_master WHERE type='table';");
              const tableNames = tablesRes[0].values.map(v => v[0]).join(', ');
              throw new Error(`Erreur lors de la lecture des cartes. Le format de la base de donn√©es est peut-√™tre diff√©rent.\n\nErreur technique : ${e.message}\n\nTables trouv√©es : ${tableNames}`);
          }
          if (!rows || !rows[0] || !rows[0].values.length) { db.close(); console.warn('Aucune carte trouv√©e dans la base de donn√©es.'); }
          const cols = rows[0].columns;
          const vals = rows[0].values;
          const byDeck = new Map();
          for (const r of vals) {
              const row = Object.fromEntries(cols.map((c, i) => [c, r[i]]));
              const did = String(row.did);
              const deckName = (deckById[did]?.name) || (`Deck ${did}`);
              const name = deckName.replace(/::/g, ' ‚Ä∫ ');
              const flds = String(row.flds || '').split('\x1f');
              const frontRaw = flds[0] || '';
              const backRaw = flds[1] || '';
              const front = Media.rewriteHTMLToPlaceholders(frontRaw, mediaNameToKey);
              const back = Media.rewriteHTMLToPlaceholders(backRaw, mediaNameToKey);
              const chapArr = byDeck.get(name) || [];
              chapArr.push({ id: String(row.cid), front, back, deckName: name });
              byDeck.set(name, chapArr);
          }
          db.close();
          if (byDeck.size === 0) { alert("Avertissement : Le fichier .apkg a √©t√© trait√©, mais aucune carte n'a pu √™tre extraite. Le format est peut-√™tre non standard."); return; }
          const subjectId = `import-${slugify(file.name.replace(/\.[^.]+$/,''))}`;
          const chapters = [];
          for (const [name, arr] of byDeck.entries()) {
              const cards = arr.map(r => ({
                  id: `${slugify(name)}-${r.id}`, front: r.front, back: r.back, grade: 'unseen',
                  timesReviewed: 0, lastReviewed: 0, lastMs: 0, avgMs: 0, perfEma: 0.5, ef: 2.5, intervalDays: 0, dueAt: 0, streak: 0, successes: 0, failures: 0
              }));
              const ch = {
                  id: 'chap-' + slugify(name), title: name, description: `${emojiFor(name)||'üì¶'} ${name}`,
                  settings: { sessionSize: 10, dailyGoal: 10, reviewOrder: 'front-first', langSwap: false },
                  filters: { grades: { unseen: true, echec: true, difficile: true, bien: true, facile: true } },
                  stats: { gradeCounts: { unseen: cards.length, echec: 0, difficile: 0, bien: 0, facile: 0 },
                      totalReviews: 0, dailyReviews: {}, dailyChanges: {}, dailyDurMs: {}, dailyDurCount: {}, dailyLog: {} },
                  cards };
              chapters.push(ch);
          }
          const subject = { id: subjectId, title: file.name.replace(/\.[^.]+$/, ''), chapters, imported: true };
          chapters.forEach(ch => ch.imported = true);
          data.subjects = data.subjects || [];
          data.subjects.push(subject);
          data.app.currentSubjectId = subjectId;
          saveData();
      } catch (err) {
          console.error("Erreur d√©taill√©e lors de l'import APGK:", err);
          throw err;
      }
    }

    async function importDelimited(file){
      const text = await file.text();
      const isTSV = file.name.toLowerCase().endsWith('.tsv');
      const sep = isTSV ? '\t' : (text.includes('\t') ? '\t' : (text.includes(';')?';':','));
      const lines = text.split(/\r?\n/).filter(Boolean);
      let header = lines[0].split(sep).map(s=>s.trim().toLowerCase());
      let start = 0;
      let hasHeader = header.includes('front') && header.includes('back');
      if (!hasHeader){ header = ['front','back','chapter']; } else { start = 1; }
      const recs = [];
      for (let i=start;i<lines.length;i++){
        const cols = lines[i].split(sep);
        const row = Object.fromEntries(header.map((h,j)=>[h, cols[j]||'']));
        recs.push({ front: row.front||cols[0]||'', back: row.back||cols[1]||'', chapter: row.chapter||'G√©n√©ral' });
      }
      await importAsSimpleSubject(file.name.replace(/\.[^.]+$/,''), recs);
    }

    async function importJSON(file){
      const obj = JSON.parse(await file.text());
      if (Array.isArray(obj)) {
        await importAsSimpleSubject(file.name.replace(/\.[^.]+$/,''), obj);
      } else if (obj && Array.isArray(obj.cards)){
        await importAsSimpleSubject(obj.subject||file.name.replace(/\.[^.]+$/,''), obj.cards);
      } else { throw new Error('JSON non reconnu'); }
    }

    async function importAsSimpleSubject(subjectName, list){
      const byChap = {};
      list.forEach(x=>{
        const ch = (x.chapter||'G√©n√©ral').trim() || 'G√©n√©ral';
        (byChap[ch]=byChap[ch]||[]).push({
          front: Media.rewriteHTMLToPlaceholders(String(x.front||''), {}),
          back: Media.rewriteHTMLToPlaceholders(String(x.back||''), {})
        });
      });
      const subjectId = `import-${slugify(subjectName)}-${Date.now()}`;
      const chapters = Object.entries(byChap).map(([name, arr])=>{
        const cards = arr.map((r,i)=>({
          id:`${slugify(name)}-${i}-${Date.now()}`, front:r.front, back:r.back, grade:'unseen',
          timesReviewed:0, lastReviewed:0, lastMs:0, avgMs:0, perfEma:0.5, ef:2.5, intervalDays:0, dueAt:0, streak:0, successes:0, failures:0
        }));
        return {
          id:'chap-'+slugify(name), title:name, description:`üì¶ ${name}`,
          settings:{sessionSize:10, dailyGoal:10, reviewOrder:'front-first', langSwap:false},
          filters:{grades:{unseen:true,echec:true,difficile:true,bien:true,facile:true}},
          stats:{ gradeCounts:{unseen:cards.length,echec:0,difficile:0,bien:0,facile:0},
            totalReviews:0, dailyReviews:{}, dailyChanges:{}, dailyDurMs:{}, dailyDurCount:{}, dailyLog:{} },
          cards
        };
      });
      const subject = { id:subjectId, title:subjectName, chapters, imported:true };
      chapters.forEach(ch=> ch.imported = true);
      data.subjects.push(subject);
      data.app.currentSubjectId = subjectId;
      saveData();
      goDeck(false);
    }
    
    function exportProgress(){
      const blob = new Blob([JSON.stringify(data)], { type:'application/json' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = `flashcards-progress-${new Date().toISOString().slice(0,10)}.json`;
      a.click();
      setTimeout(()=>URL.revokeObjectURL(a.href), 1000);
    }
    
    async function importProgressFile(file){
      if (!confirm("Attention : l'importation d'une progression remplacera toutes vos donn√©es actuelles. Voulez-vous continuer ?")) {
        return;
      }
      const text = await file.text();
      try{
        const obj = JSON.parse(text);
        if (obj && Array.isArray(obj.subjects) && obj.app){
          data = obj;
          upgradeData();
          applyTheme();
          applyUI();
          saveData();
          renderByState(false);
          alert('Progression import√©e ‚úÖ');
        }else{
          alert('Fichier de progression invalide.');
        }
      }catch(e){
        alert('Erreur lors de l\'importation du JSON: '+e.message);
      }
    }

    const $ = s=>document.querySelector(s);
    const $$ = s=>Array.from(document.querySelectorAll(s));
    const ChartHit = {};
    const Bar7Hit = {};

    const dateKey = (d)=>`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
    const todayKey = ()=>dateKey(new Date());
    const clamp = (n,min,max)=>Math.max(min,Math.min(max,n));
    const formatDuration = (ms)=>{const sec=Math.round(ms/1000); const m=Math.floor(sec/60); const s=sec%60; return `${m}:${String(s).padStart(2,'0')}`;};
    const avg = a=>!a?.length?0:a.reduce((x,y)=>x+y,0)/a.length;
    const deepClone = o=>JSON.parse(JSON.stringify(o));
    const pickN = (arr,n)=>{const c=arr.slice(); for(let i=c.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [c[i],c[j]]=[c[j],c[i]];} return c.slice(0,n);};
    const isSuccess = g=>g==='facile'||g==='bien';

    function preprocessLaTeX(s){
      if (!s) return s;
      return s
        .replace(/\[latex\]/gi, '')
        .replace(/\[\/latex\]/gi, '')
        .replace(/\\newline\s*/g, '<br/>');
    }

    function typesetLatex(container){
      if (window.MathJax && window.MathJax.typesetPromise) {
        const el = (typeof container === 'string') ? $(container) : container;
        if (el) {
          return window.MathJax.typesetPromise([el]).catch(err=>console.warn('MathJax error:', err));
        }
      }
      return Promise.resolve();
    }


    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$','$$'], ['\\[', '\\]']], processEscapes: true, packages: {'[+]': ['noerrors', 'noundefined']} },
      options: { skipHtmlTags: ['script','noscript','style','textarea','pre','code'] },
      startup: { typeset: false }
    };

    function formatDayKeyFR(key){
      const [Y,M,D]=key.split('-').map(Number);
      const d=new Date(Y, M-1, D);
      const jours=['Dim','Lun','Mar','Mer','Jeu','Ven','Sam'];
      const mois=['janv.','f√©vr.','mars','avr.','mai','juin','juil.','ao√ªt','sept.','oct.','nov.','d√©c.'];
      return `${jours[d.getDay()]} ${String(D).padStart(2,'0')} ${mois[M-1]} ${Y}`;
    }

    const slugify=s=>s.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'');
    const emojiFor=title=>CHAPTER_EMOJIS[title]||'';

    function extractRowId(cardId) {
      const m = String(cardId).match(/-(\d+)$/);
      return m ? m[1] : null;
    }

    // ---------- Construction donn√©es ----------
    function buildChaptersFromFlashcards(list){
      const byChap={}; list.forEach(r=>{const n=r.chapter||'Sans cat√©gorie'; (byChap[n]=byChap[n]||[]).push(r);});
      const chapters = Object.keys(byChap).map(name=>{
        const id='chap-'+slugify(name);
        const cards=byChap[name].map(r=>({
          id:`${slugify(name)}-${r.id}`, front:r.front, back:r.back,
          grade:'unseen', timesReviewed:0, lastReviewed:0, lastMs:0, avgMs:0,
          perfEma:0.5, ef:2.5, intervalDays:0, dueAt:0, streak:0, successes:0, failures:0
        }));
        return {
          id, title:name, description: emojiFor(name)?`${emojiFor(name)} ${name}`:name,
          settings:{sessionSize:10, dailyGoal:10, reviewOrder:'front-first', langSwap:false},
          filters:{grades:{unseen:true, echec:true, difficile:true, bien:true, facile:true}},
          stats:{
            gradeCounts:{unseen:cards.length,echec:0,difficile:0,bien:0,facile:0},
            totalReviews:0, dailyReviews:{}, dailyChanges:{}, dailyDurMs:{}, dailyDurCount:{}, dailyLog: {}
          },
          cards
        };
      });
      return {chapters, app:{currentChapterId:chapters[0]?.id||null, theme:'dark', prefs:{fsTerm:22, fsDef:24, accent:'indigo', showEmoji:true, radius:14}}};
    }

    function buildSubjectFromList(title, list){
      const built = buildChaptersFromFlashcards(list);
      return { id: slugify(title), title, chapters: built.chapters, groups: [] };
    }

    function buildCanonicalSubjects(){
      const en  = buildSubjectFromList('Anglais',  flashcardDataEN);
      const phy = buildSubjectFromList('Physique', flashcardDataPHY);
      return [en, phy];
    }

    function loadData(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(raw){
          const parsed = JSON.parse(raw);
          if (Array.isArray(parsed.subjects)) return parsed;
          if (Array.isArray(parsed.chapters)) {
            return {
              subjects: [{ id:'anglais', title:'Anglais', chapters: parsed.chapters, groups:[] }],
              app: parsed.app || { theme:'dark', prefs:{ fsTerm:22, fsDef:24, accent:'indigo', showEmoji:true, radius:14 }, currentSubjectId:'anglais' }
            };
          }
        }
      }catch(e){}
      
      const subjects = buildCanonicalSubjects();
      return {
        subjects,
        app:{
          currentSubjectId: subjects[0]?.id || null,
          theme:'light',
          prefs:{ fsTerm:22, fsDef:24, accent:'indigo', showEmoji:true, radius:14 }
        }
      };
    }

    function saveData(){
      try{
        const str=JSON.stringify(data);
        localStorage.setItem(STORAGE_KEY,str);
        StateStore.set('state', str).catch(e => console.warn("IDB save failed", e));
      }catch(e){console.warn('Save error',e);}
    }

    function nukeCookieBackup(){
      try{
        const n = parseInt(getCookie('F9X16_BN')||'0',10);
        for (let i=0; i<Math.max(100,n); i++) delCookie('F9X16_B'+i);
        delCookie('F9X16_BN');
      }catch(e){}
    }

    function pruneStats({maxDays=180, maxLogsPerDay=200}={}){
      const cutoff = new Date();
      cutoff.setHours(0,0,0,0);
      cutoff.setDate(cutoff.getDate() - maxDays);
      const cutoffKey = dateKey(cutoff);

      (data.subjects||[]).forEach(subj=>{
        (subj.chapters||[]).forEach(ch=>{
          const S = ch.stats || {};
          ['dailyReviews','dailyDurMs','dailyDurCount','dailyChanges','dailyLog'].forEach(k=>{
            const m = S[k] || {};
            Object.keys(m).forEach(day=>{ if (day < cutoffKey) delete m[day]; });
          });
          const logs = S.dailyLog || {};
          Object.keys(logs).forEach(day=>{
            const arr = logs[day];
            if (Array.isArray(arr) && arr.length > maxLogsPerDay){ logs[day] = arr.slice(-maxLogsPerDay); }
          });
        });
      });
      saveData();
    }


    function setCookie(name,value,days=365){try{document.cookie=`${name}=${encodeURIComponent(value)}; max-age=${days*86400}; path=/; SameSite=Lax;`;}catch(e){}}
    function getCookie(name){try{const m=document.cookie.split(';').map(s=>s.trim()).find(s=>s.startsWith(name+'=')); return m?decodeURIComponent(m.split('=').slice(1).join('=')):null;}catch(e){return null;}}
    function delCookie(name){document.cookie=`${name}=; max-age=0; path=/; SameSite=Lax;`;}
    
    let data; // D√©clar√© ici, initialis√© dans init()

    // ---------- Helpers de mati√®re ----------
    function getCurrentSubject(){
      const id = data?.app?.currentSubjectId;
      const s = data?.subjects?.find(x=>x.id===id);
      return s || data?.subjects?.[0] || null;
    }
    function setCurrentSubject(id){
      if (!data?.subjects?.find(s=>s.id===id)) return;
      data.app.currentSubjectId = id;
      saveData();
    }
    function getCurrentChapters(){
      const s=getCurrentSubject();
      return s?.chapters || [];
    }
    
    // NOUVEAU : Helpers pour la gestion des chapitres et mati√®res
    function getChapterEmoji(ch) { return (ch && (ch.emoji || emojiFor(ch.title) || '')) || ''; }
    function updateChapterDescription(ch) { const em = getChapterEmoji(ch); ch.description = (em ? em + ' ' : '') + ch.title; }
    function uniqueChapterId(subj, baseId) {
      const ids = new Set((subj.chapters||[]).map(c=>c.id));
      if(!ids.has(baseId)) return baseId;
      let i=2, id=baseId;
      while(ids.has(id)) id = baseId + '-' + i++;
      return id;
    }
    function moveChapterToSubject(fromSubjId, chapId, toSubjId) {
      if (fromSubjId === toSubjId) return false;
      const from = (data.subjects||[]).find(s=>s.id===fromSubjId);
      const to   = (data.subjects||[]).find(s=>s.id===toSubjId);
      if (!from || !to) return false;
      const idx = (from.chapters||[]).findIndex(c=>c.id===chapId);
      if (idx<0) return false;
      const ch = from.chapters[idx];
      ensureGroups(from).forEach(g=>{ g.chapIds = g.chapIds.filter(id=>id!==chapId); });
      ensureValidGroups(from);
      from.chapters.splice(idx,1);
      ch.id = uniqueChapterId(to, ch.id);
      to.chapters = to.chapters || [];
      to.chapters.push(ch);
      ensureValidGroups(to);
      deleteSubjectIfEmpty(from.id);
      saveData();
      return true;
    }
    function deleteSubjectIfEmpty(subjId) {
      const i = (data.subjects||[]).findIndex(s=>s.id===subjId);
      if (i<0) return;
      if ((data.subjects[i].chapters||[]).length===0){
        const wasCurrent = data.app.currentSubjectId === subjId;
        data.subjects.splice(i,1);
        if (wasCurrent){ data.app.currentSubjectId = data.subjects[0]?.id || null; }
        saveData();
      }
    }
    function renameSubject(subjId, newTitle, newEmoji='') {
      const s = (data.subjects||[]).find(x=>x.id===subjId);
      if (!s) return false;
      if (typeof newTitle==='string' && newTitle.trim()) s.title = newTitle.trim();
      s.emoji = (newEmoji || '').trim();
      saveData();
      return true;
    }

    // ===== GROUPES ("fichiers") =====
    function getSubject(){ return getCurrentSubject(); }
    function ensureGroups(subj){ if (!Array.isArray(subj.groups)) subj.groups = []; return subj.groups; }
    function findGroupById(subj, gid){ return ensureGroups(subj).find(g=>g.id===gid)||null; }
    function findGroupByChapter(subj, chapId){ return ensureGroups(subj).find(g=>g.chapIds.includes(chapId))||null; }

    function groupEmojiList(subj, group){
      const set = new Set();
      group.chapIds.forEach(id=>{
        const ch = subj.chapters.find(c=>c.id===id);
        const em = ch ? getChapterEmoji(ch) : ''; // MODIFI√â
        if (em) set.add(em);
      });
      return Array.from(set).join(', ');
    }

    function buildGroupStats(subj, group){
      const chs = group.chapIds.map(id=>subj.chapters.find(c=>c.id===id)).filter(Boolean);
      const counts={unseen:0,echec:0,difficile:0,bien:0,facile:0};
      chs.forEach(ch=>{
        const g=getLiveGradeCounts(ch);
        counts.unseen+=g.unseen; counts.echec+=g.echec; counts.difficile+=g.difficile; counts.bien+=g.bien; counts.facile+=g.facile;
      });
      const stats={ totalReviews:0, dailyReviews:{}, dailyDurMs:{}, dailyDurCount:{}, dailyChanges:{} };
      const base=new Date();
      stats.totalReviews = chs.reduce((s,ch)=>s+(ch.stats.totalReviews||0),0);
      for(let i=0;i<60;i++){
        const d=new Date(base); d.setDate(base.getDate()-i); const k=dateKey(d);
        stats.dailyReviews[k]=chs.reduce((s,ch)=>s+(ch.stats.dailyReviews[k]||0),0);
        stats.dailyDurMs[k]=chs.reduce((s,ch)=>s+(ch.stats.dailyDurMs[k]||0),0);
        stats.dailyDurCount[k]=chs.reduce((s,ch)=>s+(ch.stats.dailyDurCount[k]||0),0);
        const agg = chs.reduce((acc,ch)=>{ const v=ch.stats.dailyChanges[k];
        if(v){acc.changed+=v.changed||0; acc.total+=v.total||0;} return acc;},{changed:0,total:0});
        stats.dailyChanges[k]=agg;
      }
      return { counts, stats };
    }

    function buildVirtualFromGroup(subj, group){
      const chs = group.chapIds.map(id=>subj.chapters.find(c=>c.id===id)).filter(Boolean);
      const cards=[];
      chs.forEach(ch=>{
        ch.cards.forEach(c=>{
          cards.push({
            id:`virt-${ch.id}-${c.id}`,
            front:c.front, back:c.back, grade:c.grade||'unseen',
            timesReviewed:c.timesReviewed||0, lastReviewed:c.lastReviewed||0, lastMs:c.lastMs||0, avgMs:c.avgMs||0,
            perfEma:c.perfEma||0.5, ef:c.ef||2.5, intervalDays:c.intervalDays||0, dueAt:c.dueAt||0,
            streak:c.streak||0, successes:c.successes||0, failures:c.failures||0,
            _origin: { chapId: ch.id, cardId: c.id }
          });
        });
      });
      const avgSize = Math.round(chs.reduce((s,ch)=>s+(ch.settings.sessionSize||10),0)/Math.max(1,chs.length))||10;
      const avgGoal = Math.round(chs.reduce((s,ch)=>s+(ch.settings.dailyGoal||10),0)/Math.max(1,chs.length))||10;
      const { counts, stats } = buildGroupStats(subj, group);
      
      // *** CORRECTION APPLIQU√âE *** : Utilise le nom/emoji personnalis√© ou un nom par d√©faut.
      const finalTitle = group.title || `Fichier (${groupEmojiList(subj, group)})`;
      const finalEmoji = group.emoji || '';
      
      return {
        id: 'group-'+group.id,
        _groupId: group.id, // Ajout d'une r√©f√©rence √† l'ID du groupe original
        title: finalTitle,
        emoji: finalEmoji,
        description: (finalEmoji ? finalEmoji + ' ' : '') + finalTitle,
        virtual:true, _ids: group.chapIds.slice(),
        settings:{ sessionSize:avgSize, dailyGoal:avgGoal, reviewOrder:'front-first', langSwap:false },
        filters: group.filters ? deepClone(group.filters) : { grades:{unseen:true,echec:true,difficile:true,bien:true,facile:true} },
        stats: { gradeCounts: counts, ...stats },
        cards
      };
    }

    function addGroup(subj, chapIds){
      const ids = Array.from(new Set(chapIds)).filter(Boolean);
      if (ids.length<2) return null;
      const id = 'g'+Date.now().toString(36)+Math.random().toString(36).slice(2,6);
      // *** CORRECTION APPLIQU√âE *** : On ajoute des champs pour un nom et un emoji personnalis√©s
      const g = { id, chapIds: ids, createdAt: Date.now(), title: '', emoji: '' };
      ensureGroups(subj).push(g); return g;
    }
    function addToGroup(subj, groupId, chapId){
      const g = findGroupById(subj, groupId); if(!g) return;
      if(!g.chapIds.includes(chapId)) g.chapIds.push(chapId);
    }
    function removeFromGroup(subj, groupId, chapIds){
      const g = findGroupById(subj, groupId); if(!g) return;
      g.chapIds = g.chapIds.filter(id=>!chapIds.includes(id));
    }
    function deleteGroup(subj, groupId){
      subj.groups = ensureGroups(subj).filter(g=>g.id!==groupId);
    }
    function ensureValidGroups(subj){
      const set = new Set((subj.chapters||[]).map(c=>c.id));
      subj.groups = ensureGroups(subj).map(g=>({...g, chapIds: g.chapIds.filter(id=>set.has(id))}))
        .filter(g=>g.chapIds.length>=2);
    }
    
    // ---------- √âtat UI + Nav ----------
    const State = {view:'deck', chapterId:null, review:null, cardsIndex:0, dailyKey: null};
    State.virtualChapter = null;

    const _getChapterReal = (id) => getCurrentChapters().find(c=>c.id===id);
    function getChapter(id){
      if (State.virtualChapter && State.virtualChapter.id===id) return State.virtualChapter;
      return _getChapterReal(id);
    }
    function updateChapterFilter(chap, key) {
    let targetObject = chap; // Cible par d√©faut : le chapitre lui-m√™me

    // Si c'est un chapitre virtuel, on doit modifier le groupe original pour la sauvegarde
    if (chap.virtual && chap._groupId) {
        const subj = getCurrentSubject();
        const group = findGroupById(subj, chap._groupId);
        if (group) {
            // Initialise la structure des filtres sur le groupe si elle n'existe pas
            if (!group.filters) {
                group.filters = { grades:{unseen:true,echec:true,difficile:true,bien:true,facile:true} };
            }
            targetObject = group; // La cible de la modification devient le groupe persistant
        }
    }

    toggleFilterKey(targetObject, key); // Applique la logique de bascule sur la bonne cible

    // Si on a modifi√© un groupe, on synchronise le chapitre virtuel en m√©moire pour que l'UI se mette √† jour instantan√©ment
    if (targetObject !== chap) {
        chap.filters = targetObject.filters;
    }

    saveData(); // Sauvegarde les changements (y compris les filtres du groupe)
    renderChapter(chap.id); // Re-dessine la vue du chapitre
}
    function deleteImportedChapter(chId){
      const subj = getCurrentSubject();
      const idx = subj?.chapters?.findIndex(c=>c.id===chId) ?? -1;
      if (idx<0) return false;
      const ch = subj.chapters[idx];
      if (!ch.imported){ alert('Seuls les chapitres import√©s peuvent √™tre supprim√©s.'); return false; }
      if (!confirm(`Supprimer le chapitre "${ch.title}" ?`)) return false;

      ensureGroups(subj).forEach(g=>{
        g.chapIds = g.chapIds.filter(id=>id!==chId);
      });
      ensureValidGroups(subj);
      subj.chapters.splice(idx,1);

      if (subj.chapters.length===0 && subj.imported){
        data.subjects = (data.subjects||[]).filter(s=>s.id!==subj.id);
        if (data.app.currentSubjectId === subj.id){
          data.app.currentSubjectId = data.subjects[0]?.id || null;
        }
      }
      saveData();
      return true;
    }


    const Nav = {
      stack:[],
      push(){
        this.stack.push(deepClone({
          view:State.view, chapterId:State.chapterId, review:State.review,
          cardsIndex:State.cardsIndex, dailyKey: State.dailyKey
        }));
      },
      back(){
        if(!this.stack.length) return;

        // *** CORRECTION APPLIQU√âE ***
        // On regarde l'√©tat vers lequel on va revenir SANS le retirer de la pile.
        const stateToRestore = this.stack[this.stack.length - 1];

        // Si l'√©tat de destination n'est PAS un chapitre virtuel (fichier),
        // alors on peut effacer sans risque la m√©moire du chapitre virtuel.
        // Sinon, on la conserve pour que la page de stats du fichier puisse se r√©afficher.
        if (!stateToRestore.chapterId || !stateToRestore.chapterId.startsWith('group-')) {
          State.virtualChapter = null;
        }
        // --- Fin de la correction ---

        const prev=this.stack.pop();
        State.view=prev.view; State.chapterId=prev.chapterId; State.review=prev.review;
        State.cardsIndex=prev.cardsIndex||0; State.dailyKey=prev.dailyKey||null;
        renderByState(false);
      },
      clear(){this.stack=[];}
    };

    const backBtn=$('#backBtn');
    const titleEl=$('#title');
    const bottomActions=$('#bottomActions');
    const revisionBar=$('#revisionBar');
    const startReviewBtn=$('#startReviewBtn');

    const subjectMenuId = 'subjectMenu';
    function ensureSubjectMenu(){
      let m = document.getElementById(subjectMenuId);
      if(!m){
        m = document.createElement('div');
        m.id = subjectMenuId;
        m.className = 'subject-menu';
        document.body.appendChild(m);
      }
      return m;
    }
    
    // MODIFI√â : renderSubjectMenu avec options de renommage et suppression
    function renderSubjectMenu(){
      const m = ensureSubjectMenu();
      const list = data.subjects || [];
      const currentId = data.app.currentSubjectId;
      m.innerHTML = list.map(s=>`
        <div class="subject-item" data-id="${s.id}">
          <div class="name">${s.emoji ? (s.emoji+' ') : ''}${s.title}</div>
          <div class="meta">${s.chapters?.length||0} chap.</div>
          ${s.id===currentId ? '<div class="muted">‚úì</div>': ''}
          <div class="subject-actions">
            <button class="btn btn--tiny rename-subject" title="Renommer">‚úèÔ∏è</button>
            ${(s.chapters?.length||0)===0 ? '<button class="btn btn--tiny del-subject" title="Supprimer">üóëÔ∏è</button>':''}
          </div>
        </div>
      `).join('');

      m.querySelectorAll('.subject-item').forEach(el=>{
        el.addEventListener('click', (e)=>{
          if (e.target.closest('.rename-subject, .del-subject')) return;
          const id = el.getAttribute('data-id');
          const currentId = data.app.currentSubjectId;
          if(id && id!==currentId){
            setCurrentSubject(id);
            closeSubjectMenu();
            goDeck(false);
          }else{
            closeSubjectMenu();
          }
          e.stopPropagation();
        });
      });

      m.querySelectorAll('.rename-subject').forEach(btn=>{
        btn.addEventListener('click', e=>{
          e.stopPropagation();
          const id = btn.closest('.subject-item').getAttribute('data-id');
          const s = data.subjects.find(x=>x.id===id);
          const newTitle = prompt('Nouveau nom de la mati√®re:', s.title);
          if (newTitle==null) return;
          const newEmoji = prompt('Emoji (optionnel):', s.emoji||'') || '';
          if (renameSubject(id, newTitle, newEmoji)){
            renderSubjectMenu();
            const subj = getCurrentSubject();
            setTopbar({ title: `Deck ‚Ä¢ ${(subj.emoji? subj.emoji+' ' : '')}${subj.title}` });
            goDeck(false);
          }
        });
      });

      m.querySelectorAll('.del-subject').forEach(btn=>{
        btn.addEventListener('click', e=>{
          e.stopPropagation();
          const id = btn.closest('.subject-item').getAttribute('data-id');
          const s = data.subjects.find(x=>x.id===id);
          if ((s.chapters?.length||0)>0) return;
          if (confirm(`Supprimer la mati√®re "${s.title}" ?`)){
            deleteSubjectIfEmpty(id);
            closeSubjectMenu();
            goDeck(false);
          }
        });
      });
    }

    function positionSubjectMenu(){
      const m = ensureSubjectMenu();
      const rect = titleEl.getBoundingClientRect();
      const top = rect.bottom + 6 + window.scrollY;
      const left = rect.left + window.scrollX;
      m.style.top = `${top}px`;
      m.style.left = `${Math.max(8, left - 10)}px`;
    }
    function openSubjectMenu(){
      renderSubjectMenu();
      positionSubjectMenu();
      const m = ensureSubjectMenu();
      m.style.display='block';
      setTimeout(()=>document.addEventListener('click', onDocClickClose), 0);
    }
    function closeSubjectMenu(){
      const m = ensureSubjectMenu();
      m.style.display='none';
      document.removeEventListener('click', onDocClickClose);
    }
    function onDocClickClose(e){
      const m = document.getElementById(subjectMenuId);
      if(!m) return;
      if(m.contains(e.target) || e.target===titleEl) return;
      closeSubjectMenu();
    }
    titleEl.addEventListener('click', ()=>{
      if(State.view!=='deck'){ goDeck(false); return; }
      const m = document.getElementById(subjectMenuId);
      if(m && m.style.display==='block') closeSubjectMenu();
      else openSubjectMenu();
    });

    backBtn.addEventListener('click', ()=>{
  // Logique pour quitter l'√©cran de r√©capitulatif
  if (State.view === 'recap') {
    // <-- MODIFICATION CL√â : On retire l'√©cran de stats pr√©c√©dent de l'historique
    // car on y retourne "manuellement".
    if (Nav.stack.length > 0) {
      Nav.stack.pop();
    }

    // R√©cup√®re l'ID du chapitre de la session qui vient de se terminer
    const targetChapId = State.review?.chapterId || State.chapterId;
    State.review = null; // Nettoie l'√©tat de la session
    hideReviewActionsBar();

    if (targetChapId && targetChapId.startsWith('group-')) {
      // Cas d'un "fichier" (chapitre virtuel)
      const subj = getCurrentSubject();
      const groupId = targetChapId.replace('group-', '');
      const group = findGroupById(subj, groupId);
      if (group) {
        // Reconstruit le chapitre virtuel avec les stats √† jour et y navigue
        State.virtualChapter = buildVirtualFromGroup(subj, group);
        goChapter(State.virtualChapter.id, false);
      } else {
        goDeck(false); // S√©curit√© si le groupe a √©t√© supprim√©
      }
    } else if (targetChapId) {
      // Cas d'un chapitre normal : on y retourne simplement
      goChapter(targetChapId, false);
    } else {
      // S√©curit√© : retour au menu principal
      goDeck(false);
    }
    return; // Emp√™che l'ex√©cution du Nav.back() plus bas
  }

  // Logique pour quitter une r√©vision en cours
  if (State.view === 'review' && State.review && State.review.end == null) {
    if (!confirm('Quitter la r√©vision en cours ?')) return;
  }
  
  // Comportement de retour par d√©faut pour les autres √©crans
  Nav.back();
});

    $('#cardsBtn').addEventListener('click',()=>goCards(State.chapterId));
    $('#settingsBtn').addEventListener('click',()=>openSettings(State.chapterId));
    startReviewBtn.addEventListener('click',() => startReview(State.chapterId));

    // ---------- Rendu ----------
    function setTopbar({title,showBack}={}){
      const visible = typeof showBack==='boolean' ? showBack : (State.view!=='deck');
      backBtn.classList.toggle('hidden',!visible);
      if(title) titleEl.textContent=title;
    }

    function setBottomVisibility({actions=false, revision=false, sessionSize=10, enabled=true, available=null, chapterId=null}={}){
      bottomActions.style.display = actions?'grid':'none';
      revisionBar.style.display = revision?'block':'none';
      const phoneEl=$('#app');
      phoneEl.style.setProperty('--row-actions', actions?'52px':'0px');
      phoneEl.style.setProperty('--row-rev', revision?'64px':'0px');

      if(available==null && chapterId){
        const chap=getChapter(chapterId); available = chap?countAvailable(chap):0;
      }
      if(available==null) available=0;
      const planned = available>0 ? Math.min(sessionSize,available):0;
      startReviewBtn.textContent = `R√©vision ‚Ä¢ ${planned||sessionSize} cartes${revision ? (available>0? ` ‚Ä¢ ${available} dispo`:'') : ''}`;
      startReviewBtn.disabled = !enabled || available<=0;
    }

    function renderByState(push=true){
      switch(State.view){
        case 'deck': return goDeck(push);
        case 'chapter': return goChapter(State.chapterId,push);
        case 'cards': return goCards(State.chapterId,push);
        case 'review': return goReview(push);
        case 'recap': return goRecap(push);
        case 'settings': return openSettings(State.chapterId,push);
        case 'daily': return goDaily(State.chapterId, State.dailyKey, push);
      }
    }
    function hideReviewActionsBar(){const el=$('#reviewActionsBar'); if(el){el.style.display='none'; el.innerHTML='';}}

    // Deck
    function goDeck(push=true){
      safeCloseLightbox();
      Media.revokeAll();
      if(push) Nav.push();
      State.view='deck';
      State.chapterId=null;
      const subj = getCurrentSubject();
      // MODIFI√â : Affiche l'emoji de la mati√®re dans le titre
      setTopbar({ title: `Deck ‚Ä¢ ${(subj?.emoji? subj.emoji+' ' : '')}${subj?.title||''}`, showBack:false});
      setBottomVisibility({actions:false, revision:false});
      hideReviewActionsBar();
      renderDeck();
    }
    
    function renderDeck() {
      const v = $('#view');
      const subj = getCurrentSubject();
      if (!subj) { v.innerHTML = `<div class="card center muted">Aucun deck s√©lectionn√©.</div>`; return; }
      
      const groups = ensureGroups(subj);
      const allChapters = (subj.chapters || []).slice();
      const chapterIdsInGroups = new Set(groups.flatMap(g => g.chapIds));

      v.innerHTML = `
      <div class="card flexcol" style="flex:1;">
        <div class="deck-head">
          <div class="section-title">Chapitres & Fichiers</div>
          <div class="actions">
            <button class="btn btn--ghost btn--tiny" id="importBtn">Importer</button>
            <input id="importInput" type="file" class="hidden" accept=".apkg,.csv,.tsv,.json" multiple />
          </div>
        </div>
        <div id="deckList" class="scroll-y" style="flex:1; min-height:0; padding-right:4px;">
          <div class="list">
            ${groups.map(g => {
              const { counts } = buildGroupStats(subj, g);
              const total = counts.unseen + counts.echec + counts.difficile + counts.bien + counts.facile;
              const viewed = Math.max(0, total - counts.unseen);
              const pct = total ? Math.round(viewed * 100 / total) : 0;
              const emojis = groupEmojiList(subj, g);
              const chapterNamesList = g.chapIds.map(chapId => {
                  const chapter = allChapters.find(ch => ch.id === chapId); return chapter ? chapter.title : null;
              }).filter(Boolean).join(', ');
              return `
                <div class="deck-item" data-type="group" data-id="${g.id}">
                  <div class="slide">
                    <div style="min-width:0; flex:1">
                      <div class="title-line" style="font-weight:900; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-size:18px;">
                        ${g.title ? ((g.emoji ? g.emoji + ' ' : '') + g.title) : `üìÅ Fichier (${emojis})`}
                      </div>
                      <div class="mt6" style="display:flex; flex-wrap:wrap; gap:6px">
                        <span class="chip-pie" title="Progression : ${pct}%" style="--progress:${pct}%"></span>
                        <span class="chip">üü• ${counts.echec}</span> <span class="chip">üü® ${counts.difficile}</span> <span class="chip">üü¶ ${counts.bien}</span> <span class="chip">üü© ${counts.facile}</span>
                        <span class="folder-badge">‚Ä¢ ${g.chapIds.length} chap.</span>
                      </div>
                      <div class="muted chapter-list mt6" title="${chapterNamesList}">${chapterNamesList}</div>
                    </div>
                    <div class="muted" style="font-size:18px; padding-left: 8px;">‚Ä∫</div>
                  </div>
                </div>`;
            }).join('')}
            ${allChapters
              .filter(ch => !chapterIdsInGroups.has(ch.id))
              .map(ch => {
                const counts = getLiveGradeCounts(ch);
                const total = ch.cards?.length ?? 0;
                const viewed = Math.max(0, total - counts.unseen);
                const pct = total ? Math.round((viewed / total) * 100) : 0;
                const deleteButtonHTML = ch.imported ? `<div class="right-action"><button class="btn btn--solid btn--red btn--tiny deleteChBtn" data-chap-id="${ch.id}">Supprimer</button></div>` : '';
                return `
                  <div class="deck-item" data-type="chapter" data-id="${ch.id}">
                    ${deleteButtonHTML}
                    <div class="slide">
                      <div style="min-width:0; flex:1">
                        <div class="title-line" style="font-weight:900; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-size:18px;">
                          ${ch.description || ch.title}
                        </div>
                        <div class="mt6" style="display:flex; flex-wrap:wrap; gap:6px">
                          <span class="chip-pie" title="Progression : ${pct}%" style="--progress:${pct}%"></span>
                          <span class="chip">üü• ${counts.echec}</span> <span class="chip">üü® ${counts.difficile}</span> <span class="chip">üü¶ ${counts.bien}</span> <span class="chip">üü© ${counts.facile}</span>
                        </div>
                      </div>
                      <div class="muted" style="font-size:18px; padding-left: 8px;">‚Ä∫</div>
                    </div>
                  </div>`;
              }).join('')}
          </div>
        </div>
      </div>`;

      const importBtn = $('#importBtn'); const importInput = $('#importInput');
      if (importBtn && importInput) {
          importBtn.addEventListener('click', () => importInput.click());
          importInput.addEventListener('change', async (e) => {
              const files = Array.from(e.target.files || []);
              if (!files.length) return;
              try {
                  await Promise.all(files.map(file => importFiles([file])));
                  alert('Import termin√© ‚úÖ'); saveData(); goDeck(false);
              } catch (err) { console.error(err); alert('Erreur lors de l\'importation : ' + (err?.message || 'Erreur inconnue.'));
              } finally { importInput.value = ''; }
          });
      }
      bindDeckInteractions();
    }
    
    // MODIFI√â : bindDeckInteractions avec drag & drop vers le menu des mati√®res
    function bindDeckInteractions() {
      const list = $('#deckList'); if (!list) return; const subj = getCurrentSubject();
      list.addEventListener('click', (e) => {
          if (e.target.matches('.deleteChBtn')) {
              e.stopPropagation(); const id = e.target.getAttribute('data-chap-id');
              if (deleteImportedChapter(id)) renderDeck();
          }
      });
      const items = $$('.deck-item');
      items.forEach(el => {
          el.style.webkitUserSelect = 'none'; el.style.userSelect = 'none'; el.style.webkitTouchCallout = 'none';
          const type = el.getAttribute('data-type'); const id = el.getAttribute('data-id');
          let sx = 0, sy = 0, dx = 0, dy = 0; let interactionState = 'idle'; let longPressTimer = null; let ghost = null;
          let animationFrameId = null; let scrollDirection = 0; const scrollSpeed = 6; const scrollContainer = list;
          const autoScroll = () => { if (scrollDirection !== 0) { scrollContainer.scrollTop += scrollSpeed * scrollDirection; } if (interactionState === 'dragging') { animationFrameId = requestAnimationFrame(autoScroll); } };
          const startDrag = (e) => {
              if (interactionState !== 'pressed' || type !== 'chapter') return;
              interactionState = 'dragging'; el.classList.add('dragging-origin'); document.body.classList.add('dragging-active');
              scrollContainer.classList.add('scroll-lock');
              openSubjectMenu(); // Ouvre le menu des mati√®res pour le drop
              ghost = el.cloneNode(true); ghost.classList.add('drag-ghost');
              ghost.style.width = el.getBoundingClientRect().width + 'px'; document.body.appendChild(ghost); moveGhost(e.clientX, e.clientY);
              animationFrameId = requestAnimationFrame(autoScroll);
          };
          const moveGhost = (x, y) => { if (!ghost) return; ghost.style.transform = `translate(${x - 75}px, ${y - 75}px) scale(1.02)`; };
          const onDown = e => {
              if (e.target.closest('button')) return; sx = e.clientX; sy = e.clientY; dx = 0; dy = 0;
              interactionState = 'pressed'; el.setPointerCapture?.(e.pointerId); clearTimeout(longPressTimer);
              if (type === 'chapter') { longPressTimer = setTimeout(() => startDrag(e), 500); } 
              else if (type === 'group') { longPressTimer = setTimeout(() => { interactionState = 'idle'; handleDecompose(id); }, 700); }
          };
          const onMove = e => {
              if (interactionState === 'idle' || interactionState === 'swiping') return;
              dx = e.clientX - sx; dy = e.clientY - sy;
              if (interactionState === 'pressed' && (Math.abs(dx) > 10 || Math.abs(dy) > 10)) {
                  clearTimeout(longPressTimer);
                  if (Math.abs(dx) > Math.abs(dy) * 1.5) {
                      if (dx < 0 && el.querySelector('.right-action')) { interactionState = 'swiping'; el.classList.add('reveal-delete'); e.preventDefault(); }
                  }
              }
              if (interactionState === 'dragging') {
                  e.preventDefault(); moveGhost(e.clientX, e.clientY);
                  const rect = scrollContainer.getBoundingClientRect(); const edgeSize = rect.height * 0.20;
                  if (e.clientY < rect.top + edgeSize) scrollDirection = -1; else if (e.clientY > rect.bottom - edgeSize) scrollDirection = 1; else scrollDirection = 0;
                  
                  $$('.deck-item, .subject-item').forEach(n => n.classList.remove('drop-target'));
                  const targetDeck = document.elementFromPoint(e.clientX, e.clientY)?.closest('.deck-item');
                  const targetSubj = document.elementFromPoint(e.clientX, e.clientY)?.closest('.subject-item');
                  if (targetDeck && targetDeck !== el) { targetDeck.classList.add('drop-target'); }
                  else if (targetSubj) { targetSubj.classList.add('drop-target'); }
              }
          };
          const onUp = e => {
              clearTimeout(longPressTimer);
              
              if (interactionState === 'dragging') {
                const subjEl = document.elementFromPoint(e.clientX, e.clientY)?.closest('.subject-item');
                if (subjEl) {
                  const toId = subjEl.getAttribute('data-id');
                  const fromId = subj.id;
                  if (toId && toId !== fromId) {
                    if (moveChapterToSubject(fromId, id, toId)) {
                      setCurrentSubject(toId);
                    }
                  }
                } else {
                  const targetEl = document.elementFromPoint(e.clientX, e.clientY)?.closest('.deck-item');
                  if (targetEl && targetEl !== el) {
                      const tType = targetEl.getAttribute('data-type'); const tId = targetEl.getAttribute('data-id');
                      handleDrop(subj, { type, id }, { type: tType, id: tId });
                  }
                }
                renderDeck(); // Refresh dans tous les cas de drop
              } else if (interactionState === 'pressed' && Math.hypot(dx, dy) < 10) {
                  if (type === 'group') openGroup(subj, id); else goChapter(id);
              }

              cancelAnimationFrame(animationFrameId); scrollDirection = 0; scrollContainer.classList.remove('scroll-lock');
              interactionState = 'idle'; if (ghost) ghost.remove(); ghost = null;
              el.classList.remove('dragging-origin'); document.body.classList.remove('dragging-active');
              $$('.deck-item, .subject-item').forEach(n => n.classList.remove('drop-target'));
              closeSubjectMenu();
          };
          el.addEventListener('pointerdown', onDown); el.addEventListener('pointermove', onMove);
          el.addEventListener('pointerup', onUp); el.addEventListener('pointercancel', onUp);
          el.addEventListener('contextmenu', e => e.preventDefault());
      });
      list.addEventListener('scroll', () => { $$('.deck-item.reveal-delete').forEach(n => n.classList.remove('reveal-delete')); }, { passive: true });
    }

    function handleDecompose(groupId) {
        const subj = getCurrentSubject(); const group = findGroupById(subj, groupId); if (!group) return;
        if (confirm("D√©composer ce fichier ? Les chapitres deviendront ind√©pendants.")) {
            deleteGroup(subj, groupId); saveData(); renderDeck();
        }
    }


    function handleDrop(subj, src, dst){
      if (src.type!=='chapter') return;
      const srcG = findGroupByChapter(subj, src.id);
      if (dst.type==='chapter'){
        if (src.id === dst.id) return;
        const dstG = findGroupByChapter(subj, dst.id);
        if (!srcG && !dstG){ addGroup(subj, [src.id, dst.id]); }
        else if (srcG && !dstG){ addToGroup(subj, srcG.id, dst.id); }
        else if (!srcG && dstG){ addToGroup(subj, dstG.id, src.id); }
        else if (srcG && dstG && srcG.id!==dstG.id){
          removeFromGroup(subj, srcG.id, [src.id]);
          addToGroup(subj, dstG.id, src.id);
          ensureValidGroups(subj);
        }
      }else if (dst.type==='group'){
        const g = findGroupById(subj, dst.id); if (!g) return;
        const srcG = findGroupByChapter(subj, src.id);
        if (srcG && srcG.id!==g.id){ removeFromGroup(subj, srcG.id, [src.id]); ensureValidGroups(subj); }
        addToGroup(subj, g.id, src.id);
      }
      ensureValidGroups(subj); saveData();
    }

    function openGroup(subj, groupId){
      const g = findGroupById(subj, groupId); if(!g) return;
      State.virtualChapter = buildVirtualFromGroup(subj, g);
      goChapter(State.virtualChapter.id);
    }
    
    // Chapter
    function goChapter(chapterId,push=true){
      safeCloseLightbox();
      Media.revokeAll();
      if(push) Nav.push();
      State.view='chapter'; State.chapterId=chapterId;
      const chap=getChapter(chapterId);
      if(!chap) { console.warn("Chapitre non trouv√©:", chapterId); Nav.back(); return; }
      setTopbar({title:chap?.title||'Statistiques'});
      setBottomVisibility({
        actions:true, revision:true, sessionSize:chap.settings.sessionSize,
        enabled:(chap.cards && chap.cards.length>0),
        available:countAvailable(chap), chapterId:chap.id
      });
      hideReviewActionsBar();
      renderChapter(chapterId);
    }

    function renderChapter(chapterId){
      const v=$('#view'); const chap=getChapter(chapterId);
      const sel=chap.filters.grades||{};
      const counts = chap.stats.gradeCounts || getLiveGradeCounts(chap);
      const {unseen,echec,difficile,bien,facile}=counts;

      const today=getTodayCount(chap);
      const week=getWeekCount(chap);
      const success=getSuccessRate(chap);
      const avg7=get7DayAvgMs(chap);
      const dueNow=getDueNow(chap);
      const streak=getStreakDays(chap);
      const emoji=getChapterEmoji(chap); // MODIFI√â

      v.innerHTML = `
        <div class="card" style="flex:1; display:flex; flex-direction:column;">
          <div class="section-title">${chap.virtual ? chap.description : (emoji?emoji+' ':'')}Statistiques</div>
          <div class="kpi">
            <div class="k"><div class="label">Cartes non vues</div><div class="value">${unseen}</div></div>
            <div class="k"><div class="label">Total cartes</div><div class="value">${chap.cards.length}</div></div>
          </div>
          <div class="chart-wrap"><canvas id="gradeChart" width="180" height="180" aria-label="Diagramme des scores"></canvas></div>
          <div class="legend" id="legend">
            <div class="legend-item ${sel.unseen?'':'inactive'}" data-key="unseen"><span class="dot gray"></span> Non vus: <b class="count">${unseen}</b></div>
            <div class="legend-item ${sel.echec?'':'inactive'}" data-key="echec"><span class="dot red"></span> √âchec: <b class="count">${echec}</b></div>
            <div class="legend-item ${sel.difficile?'':'inactive'}" data-key="difficile"><span class="dot amber"></span> Difficile: <b class="count">${difficile}</b></div>
            <div class="legend-item ${sel.bien?'':'inactive'}" data-key="bien"><span class="dot blue"></span> Bien: <b class="count">${bien}</b></div>
            <div class="legend-item ${sel.facile?'':'inactive'}" data-key="facile"><span class="dot green"></span> Facile: <b class="count">${facile}</b></div>
          </div>
          <div class="kpi mt8">
            <div class="k"><div class="label">Aujourd'hui</div><div class="value">${today}</div></div>
            <div class="k"><div class="label">Cette semaine</div><div class="value">${week}</div></div>
          </div>
          <div class="kpi mt8">
            <div class="k"><div class="label">Taux de r√©ussite</div><div class="value">${success}%</div></div>
            <div class="k"><div class="label">Temps moyen (7j)</div><div class="value">${avg7? (Math.round(avg7/100)/10)+'s':'‚Äî'}</div></div>
          </div>
          <div class="kpi mt8">
            <div class="k"><div class="label">√Ä r√©viser maintenant</div><div class="value">${dueNow}</div></div>
            <div class="k"><div class="label">S√©rie (jours)</div><div class="value">${streak}</div></div>
          </div>
          <div class="bar7-wrap">
            <div class="label" style="color:var(--primary)">Activit√© 7 jours</div>
            <canvas id="bar7" width="220" height="60"></canvas>
            <div class="bar7-labels" id="bar7Labels"></div>
          </div>
        </div>`;

      drawGradeChart('gradeChart',counts,chap.filters.grades);
      const canvas=$('#gradeChart'); canvas.style.cursor='pointer';
      canvas.onclick=(ev)=>handleChartClick(ev,'gradeChart',chap,counts);

      $$('#legend .legend-item').forEach(el=>{
        const key=el.getAttribute('data-key'); const act=()=>{handleLegendClick(key,chap);};
        el.addEventListener('click',act);
        el.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' ') {e.preventDefault(); act();}});
        el.setAttribute('tabindex','0'); el.setAttribute('role','button');
      });

      updateRevisionBarForChapter(chap);
      drawBars7('bar7', getLastNDaysArray(chap,7));
      const lbl=$('#bar7Labels');
      if(lbl){const noms=getLastNDaysLabelsFR(7); lbl.innerHTML=noms.map(j=>`<div>${j.substring(0,3)}</div>`).join('');}
      const barCanvas = $('#bar7');
      if (barCanvas) { barCanvas.style.cursor = 'pointer'; barCanvas.onclick = (ev) => openDayFromBarClick(ev, 'bar7', chap.id, 7); }
      const labelsWrap = $('#bar7Labels');
      if (labelsWrap) {
        Array.from(labelsWrap.children).forEach((el, i) => {
          el.style.cursor = 'pointer'; el.title = 'Voir les cartes de ce jour';
          el.onclick = () => goDaily(chap.id, dayKeyFromIndex(7, i));
        });
      }
      (function(){
        let t; const redraw=()=>drawBars7('bar7',getLastNDaysArray(chap,7));
        window.removeEventListener('resize', window._bar7ResizeHandler || (()=>{}));
        window._bar7ResizeHandler=()=>{clearTimeout(t); t=setTimeout(redraw,150);};
        window.addEventListener('resize', window._bar7ResizeHandler);
      })();
    }

    function updateRevisionBarForChapter(chap){
      const available=countAvailable(chap);
      setBottomVisibility({actions:true, revision:true, sessionSize:chap.settings.sessionSize, enabled:available>0, available});
    }

    // Cards
    async function goCards(chapterId,push=true){
      safeCloseLightbox();
      Media.revokeAll();
      if(push) Nav.push();
      State.view='cards'; State.chapterId=chapterId;
      const chap=getChapter(chapterId);
      setTopbar({title:`${chap.title} ‚Ä¢ Cartes`});
      setBottomVisibility({actions:false, revision:false});
      hideReviewActionsBar();
      await renderCards(chapterId);
    }

    async function renderCards(chapterId){
      const v=$('#view'); const chap=getChapter(chapterId);
      const sel=chap.filters.grades||{};
      const pool=chap.cards.filter(c=>sel[(c.grade||'unseen')]);
      v.innerHTML = `
        <div style="flex:1; display:flex; flex-direction:column; min-height:0;">
          <div class="section-title">Cartes (${pool.length})</div>
          <div id="cardsGrid" class="scroll-y" style="flex:1; min-height:0; padding-right:4px;">
            <div class="cards-grid">
              ${pool.map(c=>{
                const {frontText,backText}=getCardSides(c,chap);
                const f = preprocessLaTeX(frontText);
                const b = preprocessLaTeX(backText);
                const gradeClass=`grade-${c.grade||'unseen'}`;
                const timeStr=c.avgMs?formatDuration(c.avgMs):'';
                return `
                  <div class="card-block ${gradeClass}" data-id="${c.id}">
                    <div class="term">${f}</div>
                    <div class="definition">${b}</div>
                    ${timeStr?`<div class="cb-time">${timeStr}</div>`:''}
                  </div>`;
              }).join('')}
            </div>
          </div>
        </div>`;
      await Media.resolveMediaInElement(v);
      await typesetLatex(v);
      const grid=$('#cardsGrid');
      grid.addEventListener('click',e=>{
        const block=e.target.closest('.card-block'); if(!block) return;
        $$('.card-block').forEach(b=>{if(b!==block) b.classList.remove('flipped');});
        block.classList.toggle('flipped');
      });
    }
    
    // Daily Activity View
    function getCombinedDailyLogFor(chap, dayKey){
      const logs=[];
      (chap._ids||[]).forEach(cid=>{
        const real = _getChapterReal(cid);
        const arr = real?.stats?.dailyLog?.[dayKey] || [];
        arr.forEach(e=> logs.push({ ...e, _chapId: cid }));
      });
      return logs;
    }
    function getCombinedDailyLogForGroup(subj, group, dayKey){
      const logs=[];
      (group.chapIds||[]).forEach(cid=>{
        const ch = subj.chapters.find(c=>c.id===cid);
        const arr = ch?.stats?.dailyLog?.[dayKey] || [];
        arr.forEach(e=> logs.push({ ...e, _chapId: cid }));
      });
      return logs;
    }
    async function goDaily(chapterId, dayKey, push=true){
      safeCloseLightbox();
      Media.revokeAll();
      if (push) Nav.push();
      State.view='daily'; State.chapterId=chapterId; State.dailyKey=dayKey;
      const chap=getChapter(chapterId);
      setTopbar({ title:`Activit√© ‚Ä¢ ${formatDayKeyFR(dayKey)}` });
      setBottomVisibility({ actions:false, revision:false });
      hideReviewActionsBar();
      await renderDaily(chap, dayKey);
    }

    async function renderDaily(chap, dayKey){
      const subj = getCurrentSubject();
      let log;
      if (chap.virtual && chap.id.startsWith('group-')){
        const gid = chap.id.slice('group-'.length);
        const g = findGroupById(subj, gid);
        log = g ? getCombinedDailyLogForGroup(subj, g, dayKey) : [];
      } else { log = (chap.stats.dailyLog && chap.stats.dailyLog[dayKey]) ? chap.stats.dailyLog[dayKey].slice() : []; }
      const v = document.getElementById('view');
      if (!log.length){
        v.innerHTML = `
          <div class="card" style="flex:1; display:flex; flex-direction:column;">
            <div class="section-title">Activit√© du ${formatDayKeyFR(dayKey)}</div>
            <div class="muted">Aucune donn√©e pour ce jour.</div>
          </div>`;
        return;
      }
      log.sort((a,b)=>a.ts-b.ts);
      const byCard = new Map();
      for (const e of log){
        const curr = byCard.get(e.cardId) || { firstPrev:null, firstTs:Infinity, lastNext:null, lastTs:-Infinity, events:[], _chapId: e._chapId };
        if (e.ts < curr.firstTs){ curr.firstTs = e.ts; curr.firstPrev = e.prev; }
        if (e.ts > curr.lastTs) { curr.lastTs = e.ts; curr.lastNext = e.next; }
        curr.events.push(e); byCard.set(e.cardId, curr);
      }
      const rows = [];
      for (const [cardId, info] of byCard){
        const baseChap = chap.virtual ? _getChapterReal(info._chapId) : chap;
        const card = baseChap.cards.find(c=>c.id===cardId); if (!card) continue;
        const {frontText, backText} = getCardSides(card, baseChap);
        rows.push({ id: cardId, term: preprocessLaTeX(frontText), def:  preprocessLaTeX(backText),
          before: info.firstPrev || 'unseen', after: info.lastNext || (card.grade || 'unseen') });
      }
      rows.sort((a,b)=>{
        const ca = (a.before!==a.after), cb=(b.before!==b.after); if (ca!==cb) return ca? -1: 1;
        return a.term.localeCompare(b.term, 'fr');
      });
      v.innerHTML = `
        <div class="card" style="flex:1; display:flex; flex-direction:column; min-height:0;">
          <div class="section-title">Activit√© du ${formatDayKeyFR(dayKey)} ‚Ä¢ ${rows.length} carte(s)</div>
          <div id="dailyList" class="scroll-y" style="flex:1; min-height:0; padding-right:4px;">
            <div class="list" style="gap:10px">
              ${rows.map(r=>`
                <div class="grid2">
                  <div class="card-block grade-${r.before}" data-id="${r.id}" data-side="before" title="Avant ce jour">
                    <div class="term">${r.term}</div><div class="definition">${r.def}</div>
                  </div>
                  <div class="card-block grade-${r.after}" data-id="${r.id}" data-side="after" title="Apr√®s ce jour">
                    <div class="term">${r.term}</div><div class="definition">${r.def}</div>
                  </div>
                </div>`).join('')}
            </div>
          </div>
          <div class="small muted mt6">Astuce: touchez une carte pour afficher/masquer la d√©finition.</div>
        </div>`;
      await Media.resolveMediaInElement(v);
      await typesetLatex(v);
      const list = document.getElementById('dailyList');
      list.addEventListener('click', (e)=>{
        const block = e.target.closest('.card-block'); if (!block) return;
        block.classList.toggle('flipped');
      });
    }

    // Review
    function goReview(push=true){
      safeCloseLightbox();
      Media.revokeAll();
      if(push) Nav.push();
      State.view='review';
      setTopbar({title:'R√©vision'});
      setBottomVisibility({actions:false, revision:true});
      revisionBar.style.display='none';
      $('#reviewActionsBar').style.display='block';
      renderReview();
    }

    function renderReviewFooter(){
      const bar=$('#reviewActionsBar'); if(!bar) return;
      const r=State.review;
      if(!r.flipped){
        bar.innerHTML=`<button class="btn btn--solid btn--primary" id="flipBtn">Retourner</button>`;
        $('#flipBtn').onclick=()=>{r.flipped=true; renderReview();};
      }else{
        bar.innerHTML=`
          <div class="row-4">
            <button class="btn btn--red" id="grade_echec">√âchec</button>
            <button class="btn btn--amber" id="grade_difficile">Difficile</button>
            <button class="btn btn--blue" id="grade_bien">Bien</button>
            <button class="btn btn--green" id="grade_facile">Facile</button>
          </div>`;
        $('#grade_echec').onclick=()=>submitGrade('echec');
        $('#grade_difficile').onclick=()=>submitGrade('difficile');
        $('#grade_bien').onclick=()=>submitGrade('bien');
        $('#grade_facile').onclick=()=>submitGrade('facile');
      }
    }

    function renderReview(){
      const v=$('#view'); const r=State.review;
      const { card: current, chap } = getCurrentCard();
      const total=r.queue.length; const idx=r.index+1;
      const {frontText,backText}=getCardSides(current,chap);
      const frontHTML = preprocessLaTeX(frontText);
      const backHTML  = preprocessLaTeX(backText);
      const frontFirst = chap.settings.reviewOrder!=='back-first';
      const prompt = frontFirst ? frontHTML : backHTML;
      const isPromptFront=frontFirst; const promptClass=isPromptFront?'term':'definition'; const promptFace=isPromptFront?'front':'back';
      v.innerHTML = `
        <div class="review-wrap">
          <div class="review-top"><div>${r.mode==='multi' ? ('Multi ‚Ä¢ '+chap.title) : chap.title}</div><div>${idx} / ${total}</div></div>
          <div class="review-card">
            <div class="review-scroller">
              ${!r.flipped
                ? `<div class="${promptClass}" data-face="${promptFace}">${prompt}</div>`
                : `<div class="stack"><div class="term" data-face="front">${frontHTML}</div><div class="definition" data-face="back" style="margin-top:6px">${backHTML}</div></div>`
              }
            </div>
          </div>
        </div>`;
      typesetLatex(v).then(async ()=>{
        await Media.resolveMediaInElement(v);
        initReviewGestures();
      });
      renderReviewFooter();
    }

    // Recap
    function goRecap(push=true){
      safeCloseLightbox();
      Media.revokeAll();
      if(push) Nav.push();
      State.view='recap';
      const chap = getChapter(State.review.chapterId) || State.virtualChapter || getChapter(State.review.multiChaps[0]);
      setTopbar({title:'R√©capitulatif'});
      setBottomVisibility({actions:false, revision:false});
      hideReviewActionsBar();
      renderRecap(chap);
    }

    function renderRecap(chap){
      const v = $('#view'); const r = State.review;
      const duration = (() => {
        if (r && Array.isArray(r.answers) && r.answers.length) return r.answers.reduce((sum, a) => sum + (a.ms || 0), 0);
        if (r?.end && r?.start && r.end > r.start) return r.end - r.start;
        return 0;
      })();
      const totalSession = r.answers.length;
      const avgPerCard = totalSession ? duration / totalSession : 0;
      const todayChange=getTodayChange(chap); const todayReviews=getTodayCount(chap);
      v.innerHTML = `
        <div class="card recap" style="flex:1">
          <div><h2>R√©capitulatif</h2><div class="subtitle">${chap.title}</div></div>
          <div class="grid2">
            <div class="stat"><div class="label">R√©visions/jour (7j)</div><div class="val">${get7DayAverage(chap)}</div></div>
            <div class="stat"><div class="label">Changement de classe aujourd'hui</div><div class="val">${todayChange.total>0?Math.round((todayChange.changed/todayChange.total)*100):0}%</div></div>
            <div class="stat"><div class="label">Objectif quotidien</div><div class="val">${chap.settings.dailyGoal}</div></div>
            <div class="stat"><div class="label">R√©visions aujourd'hui</div><div class="val">${todayReviews}/${chap.settings.dailyGoal}</div></div>
          </div>
          <div class="grid2">
            <div class="stat"><div class="label">Total r√©visions (session)</div><div class="val">${totalSession}</div></div>
            <div class="stat"><div class="label">Dur√©e (session)</div><div class="val">${formatDuration(duration)}</div></div>
            <div class="stat"><div class="label">Temps moyen/carte</div><div class="val">${formatDuration(avgPerCard)}</div></div>
          </div>
          <div class="cta"><button class="btn btn--solid btn--primary" id="continueBtn">Continuer</button></div>
        </div>`;
      $('#continueBtn').addEventListener('click',()=>startReview(chap.id, false));
    }

    function startReviewMulti(chapIds, virtualChapId, groupFilters, push = true){
  const all = chapIds.map(_getChapterReal).filter(Boolean);
  if (!all.length) return;
  
  const pool = [];
  // <-- MODIFICATION CL√â : On utilise le filtre du groupe (groupFilters)
  // au lieu des filtres individuels de chaque chapitre.
  const sel = groupFilters.grades; 
  
  all.forEach(ch=>{
    // On parcourt les cartes de chaque chapitre et on applique le filtre commun.
    ch.cards.forEach(c=>{
      if (sel[c.grade||'unseen']) {
        pool.push({ chapId: ch.id, card: c });
      }
    });
  });

  if (!pool.length){
    alert('Aucune carte disponible avec les filtres actuels.');
    return;
  }
  
  const scored = pool.map(({chapId,card})=>{
    const g=card.grade||'unseen'; const baseWMap={unseen:6,echec:5,difficile:3.5,bien:2,facile:1};
    const now=Date.now(); const baseW=baseWMap[g]??1; let dueBoost=1;
    if(card.dueAt && card.dueAt>0){ const delta=now-card.dueAt; dueBoost = delta>0 ? (1+Math.min(3,delta/864e5)) : 0.85; }else{ dueBoost=1.15; }
    const ema=typeof card.perfEma=='number' ? card.perfEma : 0.5; const perfBoost=1+(1-ema)*1.6;
    const s=card.streak||0; const streakAdj = s>=3 ? (1/(1+0.12*(s-2))) : (s<0 ? (1+0.18*Math.min(8,Math.abs(s))) : 1);
    const t=card.avgMs||0; const timeBoost=1+Math.min(2,t/3000); const jitter=0.9+Math.random()*0.2;
    const weight=baseW*dueBoost*perfBoost*streakAdj*timeBoost*jitter;
    return { chapId, cardId: card.id, weight };
  });
  
  scored.sort((a,b)=>b.weight-a.weight);
  const avgSize = Math.round(all.reduce((s,ch)=>s+(ch.settings.sessionSize||10),0)/all.length);
  const size = Math.min(avgSize||10, scored.length);
  const queue = scored.slice(0,size).map(x=>({ chapId:x.chapId, cardId:x.cardId }));
  
  State.review = { mode:'multi', chapterId: virtualChapId, multiChaps: chapIds.slice(), queue, index:0, flipped:false, answers:[], start:Date.now(), end:null, cardStart:Date.now() };
  goReview(push);
}
    // ---------- Logique r√©vision ----------
    function startReview(chapterId, push = true) {
  if(!chapterId) return;
  const chap=getChapter(chapterId);
  
  if (chap && chap.virtual && Array.isArray(chap._ids)) {
    // <-- MODIFICATION CL√â : On passe maintenant chap.filters en 3√®me argument
    return startReviewMulti(chap._ids, chap.id, chap.filters, push);
  }
  
  const sel=chap.filters.grades;
  const pool=chap.cards.filter(c=>sel[(c.grade||'unseen')]);
  const size=Math.min(chap.settings.sessionSize,pool.length);
  if(size<=0){alert('Aucune carte disponible avec les filtres s√©lectionn√©s.'); return;}
  const queue=buildSmartQueue(chap,pool,size).map(c=>c.id);
  State.review={chapterId, queue, index:0, flipped:false, answers:[], start:Date.now(), end:null, cardStart:Date.now()};
  goReview(push);
}

    function buildSmartQueue(chap, pool, size) {
  const now = Date.now();
  
  // Fonction utilitaire pour m√©langer un tableau (algorithme de Fisher-Yates)
  const shuffleArray = (array) => {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  };

  // --- √âtape 1 : Cat√©goriser toutes les cartes du pool ---
  const newCards = [];
  const lapsedCards = []; // Cartes √©chou√©es ou difficiles, √† r√©apprendre
  const dueReviews = [];  // Cartes √† r√©viser dont la date est √©chue

  pool.forEach(card => {
    const grade = card.grade || 'unseen';
    
    if (grade === 'unseen') {
      newCards.push(card);
    } else if (grade === 'echec' || grade === 'difficile') {
      lapsedCards.push(card);
    } else if (card.dueAt && card.dueAt <= now) {
      // Uniquement les cartes "bien" ou "facile" qui sont dues
      dueReviews.push(card);
    }
    // Les cartes dont la date de r√©vision est future sont ignor√©es.
  });

  // --- √âtape 2 : Construire la session en respectant les priorit√©s ---
  
  // On m√©lange chaque cat√©gorie pour √©viter de voir toujours les m√™mes cartes au d√©but
  shuffleArray(lapsedCards);
  shuffleArray(dueReviews);
  shuffleArray(newCards);
  
  // On assemble la file d'attente finale en suivant l'ordre de priorit√© :
  // 1. Lapsus -> 2. R√©visions dues -> 3. Nouvelles cartes
  const sessionQueue = [
    ...lapsedCards,
    ...dueReviews,
    ...newCards
  ];

  // --- √âtape 3 : Renvoyer le nombre de cartes demand√© ---
  return sessionQueue.slice(0, size);
}

    function getCurrentCard(){
      const r=State.review;
      if (r?.mode==='multi'){
        const item = r.queue[r.index]; const chap = _getChapterReal(item.chapId);
        const card = chap.cards.find(c=>c.id===item.cardId); return { card, chap };
      }else{
        const chap=getChapter(r.chapterId); const id=r.queue[r.index];
        return { card: chap.cards.find(c=>c.id===id), chap };
      }
    }

    function submitGrade(nextGrade){
      const r=State.review; const now=Date.now();
      
      // *** CORRECTION APPLIQU√âE ***
      // L'ancienne m√©thode ne fonctionnait pas pour les r√©visions multi-chapitres (fichiers)
      // car `r.chapterId` est null dans ce cas. La nouvelle logique lit directement
      // l'origine de la carte depuis la file d'attente de la r√©vision.
      let originChapId, originCardId;

      if (r.mode === 'multi') {
        const queueItem = r.queue[r.index];
        originChapId = queueItem.chapId;
        originCardId = queueItem.cardId;
      } else {
        originChapId = r.chapterId;
        originCardId = r.queue[r.index];
      }
      
      const chap = _getChapterReal(originChapId);
      if (!chap) {
        console.error("Erreur critique : Chapitre d'origine introuvable.", {originChapId, originCardId});
        alert("Une erreur s'est produite, impossible de continuer la r√©vision.");
        goDeck(false); // Retour au deck pour √©viter de rester bloqu√©
        return;
      }
      const card = chap.cards.find(c => c.id === originCardId);
      if (!card) {
        console.error("Erreur critique : Carte d'origine introuvable.", {originChapId, originCardId});
        alert("Une erreur s'est produite, impossible de continuer la r√©vision.");
        goDeck(false);
        return;
      }
      // --- Fin de la correction de la logique ---

      const duration=Math.max(0, now-(r.cardStart||now));
      const prevGrade=card.grade||'unseen'; const next=nextGrade;
      const wasZeroBeforeNext=(chap.stats.gradeCounts[next]||0)===0;
      card.grade=next; syncGradeCounts(chap);
      const alpha=0.3; const q01=gradeNorm01(next);
      card.perfEma = (1-alpha)*(card.perfEma??0.5) + alpha*q01;
      scheduleNext(card,next,now);
      card.lastReviewed=now; card.lastMs=duration;
      card.avgMs = card.avgMs ? Math.round(card.avgMs*0.7 + duration*0.3) : duration;
      card.timesReviewed=(card.timesReviewed||0)+1;
      if(isSuccess(next)) card.successes+=1; else card.failures+=1;
      chap.stats.totalReviews += 1;
      const tk=todayKey();
      chap.stats.dailyReviews[tk]=(chap.stats.dailyReviews[tk]||0)+1;
      chap.stats.dailyDurMs[tk]=(chap.stats.dailyDurMs[tk]||0)+duration;
      chap.stats.dailyDurCount[tk]=(chap.stats.dailyDurCount[tk]||0)+1;
      const dc=chap.stats.dailyChanges[tk]||{changed:0,total:0};
      dc.total+=1; if(prevGrade!==next) dc.changed+=1; chap.stats.dailyChanges[tk]=dc;
      const log = chap.stats.dailyLog[tk] || [];
      log.push({ cardId: card.id, prev: prevGrade, next, ms: duration, ts: now });
      chap.stats.dailyLog[tk] = log;
      if(wasZeroBeforeNext && next!=='unseen'){ chap.filters.grades[next]=true; }
      r.answers.push({cardId:card.id, prev:prevGrade, next, ms:duration});
      if(r.index < r.queue.length-1){
        r.index+=1; r.flipped=false; r.cardStart=Date.now();
        saveData(); renderReview();
      }else{
        r.end=Date.now();
        saveData();
        goRecap(false);
      }
    }

    // ---------- Helpers chapitres/stats ----------
    function getCardSides(card,chap){
      return chap?.settings?.langSwap ? {frontText:card.back, backText:card.front} : {frontText:card.front, backText:card.back};
    }
    function getLiveGradeCounts(chap){
      const c={unseen:0,echec:0,difficile:0,bien:0,facile:0};
      (chap.cards||[]).forEach(x=>{const g=x.grade||'unseen'; c[g]!=null ? c[g]++ : c.unseen++;});
      return c;
    }
    function syncGradeCounts(chap){chap.stats=chap.stats||{}; chap.stats.gradeCounts=getLiveGradeCounts(chap);}
    function getTodayCount(chap){return chap.stats.dailyReviews[todayKey()]||0;}
    function getTodayChange(chap){return chap.stats.dailyChanges[todayKey()]||{changed:0,total:0};}
    function get7DayAverage(chap){
      const base=new Date(); const days=[];
      for(let i=6;i>=0;i--){const d=new Date(base); d.setDate(base.getDate()-i); days.push(chap.stats.dailyReviews[dateKey(d)]||0);}
      return Math.round(avg(days));
    }
    function getWeekCount(chap){
      const base=new Date(); let sum=0;
      for(let i=0;i<7;i++){const d=new Date(base); d.setDate(base.getDate()-i); sum+=(chap.stats.dailyReviews[dateKey(d)]||0);}
      return sum;
    }
    function getSuccessRate(chap){
      const gc=chap.stats.gradeCounts||{};
      const good=(gc.bien||0)+(gc.facile||0);
      const attempt=good+(gc.echec||0)+(gc.difficile||0);
      return attempt===0?0:Math.round((good/attempt)*100);
    }
    function get7DayAvgMs(chap){
      if(!chap.stats.dailyDurMs||!chap.stats.dailyDurCount) return 0;
      const base=new Date(); let sum=0,cnt=0;
      for(let i=0;i<7;i++){ const d=new Date(base); d.setDate(base.getDate()-i); const k=dateKey(d); sum+=(chap.stats.dailyDurMs[k]||0); cnt+=(chap.stats.dailyDurCount[k]||0); }
      return cnt?Math.round(sum/cnt):0;
    }
    function countAvailable(chap){const sel=chap.filters.grades; return chap.cards.filter(c=>sel[(c.grade||'unseen')]).length;}
    function getDueNow(chap){const now=Date.now(); return chap.cards.filter(c=>c.dueAt && c.dueAt>0 && c.dueAt<=now).length;}
    function getStreakDays(chap){
      const base=new Date(); let streak=0;
      for(let i=0;i<365;i++){const d=new Date(base); d.setDate(base.getDate()-i); const n=chap.stats.dailyReviews[dateKey(d)]||0; if(n>0) streak++; else break;}
      return streak;
    }
    function getLastNDaysArray(chap,n){
      const arr=[]; const base=new Date();
      for(let i=n-1;i>=0;i--){const d=new Date(base); d.setDate(base.getDate()-i); arr.push(chap.stats.dailyReviews[dateKey(d)]||0);}
      return arr;
    }
    function getLastNDaysLabelsFR(n){
      const noms=[]; const base=new Date(); const J=['Dimanche','Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi'];
      for(let i=n-1;i>=0;i--){const d=new Date(base); d.setDate(base.getDate()-i); noms.push(J[d.getDay()]);}
      return noms;
    }
    function dayKeyFromIndex(n, index) {
      const base = new Date(); const offset = (n - 1) - index; const d = new Date(base);
      d.setHours(0,0,0,0); d.setDate(base.getDate() - offset); return dateKey(d);
    }
    function openDayFromBarClick(evt, canvasId, chapId, n=7) {
      const hit = Bar7Hit[canvasId]; if (!hit) return;
      const rect = evt.target.getBoundingClientRect(); const xCSS = (evt.clientX - rect.left) * (hit.cssW / rect.width);
      const i = hit.bars.findIndex(b => xCSS >= b.x && xCSS <= b.x + b.w);
      if (i < 0) return; const key = dayKeyFromIndex(n, i); goDaily(chapId, key);
    }

    // ---------- Bar chart ----------
    function drawBars7(canvasId, values) {
      const el = document.getElementById(canvasId); if (!el) return;
      const ctx = el.getContext('2d');
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      const cssW = Math.round(el.clientWidth || el.getBoundingClientRect().width || 220);
      const cssH = Math.round(parseFloat(getComputedStyle(el).height) || el.height || 60);
      if (el.width !== cssW * dpr || el.height !== cssH * dpr) { el.width = cssW * dpr; el.height = cssH * dpr; }
      ctx.setTransform(1, 0, 0, 1, 0, 0); ctx.clearRect(0, 0, el.width, el.height); ctx.scale(dpr, dpr);
      const w = cssW, h = cssH; const max = Math.max(1, ...values); const n = values.length; const gap = 6;
      const totalGap = gap * (n - 1); const barW = Math.max(6, Math.floor((w - totalGap) / n));
      const primary = getComputedStyle(document.documentElement).getPropertyValue('--primary').trim() || '#6366f1';
      const textColor = getComputedStyle(document.documentElement).getPropertyValue('--text').trim() || '#0f172a';
      const fontPx = Math.max(9, Math.min(10, Math.floor(barW * 0.7))); const textPad = fontPx + 4;
      const baseY = h - textPad - 2; const minH = 3;
      ctx.strokeStyle = 'rgba(148,163,184,0.35)'; ctx.lineWidth = 1; ctx.beginPath();
      ctx.moveTo(0, baseY + 0.5); ctx.lineTo(w, baseY + 0.5); ctx.stroke();
      ctx.font = `bold ${fontPx}px ui-sans-serif, system-ui`; ctx.textAlign = 'center'; ctx.textBaseline = 'top';
      let x = 0; const bars = [];
      values.forEach(v => {
        const bhRaw = Math.round((v / max) * (h - textPad - 8)); const bh = Math.max(minH, bhRaw);
        const y = baseY - bh; ctx.fillStyle = primary; ctx.globalAlpha = 0.95; ctx.fillRect(x, y, barW, bh);
        ctx.globalAlpha = 1; ctx.fillStyle = textColor; ctx.fillText(String(v), x + barW / 2, baseY + 2);
        ctx.fillStyle = 'rgba(0,0,0,0.15)'; ctx.fillRect(x, baseY, barW, 2);
        bars.push({ x, w: barW }); x += barW + gap;
      });
      Bar7Hit[canvasId] = { cssW: w, cssH: h, bars };
    }


    // ---------- Donut ----------
    function drawGradeChart(canvasId,counts,activeKeys=null){
      const el=document.getElementById(canvasId); if(!el) return;
      const ctx=el.getContext('2d'); const w=el.width,h=el.height;
      ctx.clearRect(0,0,w,h); const cx=w/2, cy=h/2; const outerR=Math.min(w,h)/2-6; const innerR=outerR*0.65;
      const css=getComputedStyle(document.documentElement);
      const segments=[ {key:'unseen',color:'#9ca3af'}, {key:'echec',color:css.getPropertyValue('--red').trim()}, {key:'difficile',color:css.getPropertyValue('--amber').trim()}, {key:'bien',color:css.getPropertyValue('--blue').trim()}, {key:'facile',color:css.getPropertyValue('--green').trim()}, ];
      const total=segments.reduce((s,seg)=>s+(counts[seg.key]||0),0);
      const arcs=[];
      if(total===0){
        ctx.beginPath(); ctx.arc(cx,cy,outerR,0,Math.PI*2); ctx.arc(cx,cy,innerR,0,Math.PI*2,true);
        ctx.fillStyle='#cbd5e1'; ctx.globalAlpha=.25; ctx.fill(); ctx.globalAlpha=1;
        ctx.fillStyle='#64748b'; ctx.font='bold 12px ui-sans-serif, system-ui'; ctx.textAlign='center'; ctx.textBaseline='middle';
        ctx.fillText('Aucune donn√©e',cx,cy);
        ChartHit[canvasId]={cx,cy,innerR,outerR,arcs:[]}; return;
      }
      let start=-Math.PI/2;
      segments.forEach(seg=>{
        const val=counts[seg.key]||0; if(val<=0) return;
        const a=(val/total)*Math.PI*2; const end=start+a;
        const active=!activeKeys || !!activeKeys[seg.key];
        ctx.beginPath(); ctx.arc(cx,cy,outerR,start,end); ctx.arc(cx,cy,innerR,end,start,true);
        ctx.fillStyle=seg.color; ctx.globalAlpha=active?0.9:0.22; ctx.fill(); ctx.globalAlpha=1;
        arcs.push({key:seg.key,start,end}); start=end;
      });
      ctx.fillStyle='#0ea5e9'; ctx.font='bold 18px ui-sans-serif, system-ui'; ctx.textAlign='center'; ctx.textBaseline='middle';
      ctx.fillText(String(total),cx,cy-4);
      ctx.fillStyle='#64748b'; ctx.font='10px ui-sans-serif, system-ui'; ctx.fillText('cartes',cx,cy+10);
      ChartHit[canvasId]={cx,cy,innerR,outerR,arcs};
    }

    function toggleFilterKey(chap,key){
      const sel=chap.filters.grades; const total=Object.keys(sel).length; const active=Object.keys(sel).filter(k=>sel[k]); const isSelected=!!sel[key];
      if(active.length===total){Object.keys(sel).forEach(k=>sel[k]=false); sel[key]=true;}
      else if(active.length===1 && isSelected){sel[key]=true;}
      else{ sel[key]=!isSelected; if(Object.keys(sel).filter(k=>sel[k]).length===0){sel[key]=true;} }
    }
    function handleChartClick(evt,canvasId,chap){
      const map=ChartHit[canvasId]; if(!map||!map.arcs.length) return;
      const rect=evt.target.getBoundingClientRect(); const scaleX=evt.target.width/rect.width; const scaleY=evt.target.height/rect.height;
      const x=(evt.clientX-rect.left)*scaleX; const y=(evt.clientY-rect.top)*scaleY;
      const dx=x-map.cx, dy=y-map.cy; const r=Math.hypot(dx,dy); if(r<map.innerR||r>map.outerR) return;
      let a=Math.atan2(dy,dx); while(a<-Math.PI/2) a+=2*Math.PI; while(a>3*Math.PI/2) a-=2*Math.PI;
      const hit=map.arcs.find(s=>a>=s.start && a<=s.end); if(!hit) return;
      updateChapterFilter(chap, hit.key);
    }
    function handleLegendClick(key,chap){ updateChapterFilter(chap, key); }

    // ---------- Th√®me / UI ----------
    function applyTheme(){document.documentElement.setAttribute('data-theme', (data?.app?.theme)||'dark');}
    function applyUI(){
      const p=data.app.prefs||{};
      document.documentElement.style.setProperty('--fs-term',(p.fsTerm||20)+'px');
      document.documentElement.style.setProperty('--fs-def',(p.fsDef||24)+'px');
      document.documentElement.style.setProperty('--radius-md',(p.radius||14)+'px');
      const palette={ indigo:['#6366f1','#5457e6'], blue:['#3b82f6','#2563eb'], teal:['#14b8a6','#0d9488'], emerald:['#10b981','#059669'], rose:['#f43f5e','#e11d48'], amber:['#f59e0b','#d97706'], violet:['#8b5cf6','#7c3aed'] };
      const acc=palette[p.accent]||palette.indigo;
      document.documentElement.style.setProperty('--primary',acc[0]);
      document.documentElement.style.setProperty('--primary-600',acc[1]);
    }

    function upgradeData(){
      data.app=data.app||{};
      if(!('theme' in data.app)) data.app.theme='dark';
      data.app.prefs=data.app.prefs||{};
      if(typeof data.app.prefs.fsTerm!=='number') data.app.prefs.fsTerm=22;
      if(typeof data.app.prefs.fsDef!=='number') data.app.prefs.fsDef=24;
      if(!data.app.prefs.accent) data.app.prefs.accent='indigo';
      if(typeof data.app.prefs.showEmoji!=='boolean') data.app.prefs.showEmoji=true;
      if(typeof data.app.prefs.radius!=='number') data.app.prefs.radius=14;
      if (!data.mediaIndex) data.mediaIndex = {};
      if(!Array.isArray(data.subjects)){
        data.subjects = [{ id:'anglais', title:'Anglais', chapters: data.chapters||[], groups: [] }];
        delete data.chapters;
        if(!data.app.currentSubjectId) data.app.currentSubjectId='anglais';
      }
      data.subjects.forEach(subj=>{
        if (!Array.isArray(subj.groups)) subj.groups = [];
        ensureValidGroups(subj);
        (subj.chapters||[]).forEach(ch=>{
          ch.settings=ch.settings||{};
          if(typeof ch.settings.langSwap!=='boolean') ch.settings.langSwap=false;
          ch.stats=ch.stats||{};
          if (!ch.stats.dailyLog) ch.stats.dailyLog = {};
          (ch.cards||[]).forEach(c=>{
            if(typeof c.perfEma!=='number') c.perfEma=0.5; if(typeof c.ef!=='number') c.ef=2.5;
            if(typeof c.intervalDays!=='number') c.intervalDays=0; if(typeof c.dueAt!=='number') c.dueAt=0;
            if(typeof c.streak!=='number') c.streak=0; if(typeof c.successes!=='number') c.successes=0; if(typeof c.failures!=='number') c.failures=0;
          });
          syncGradeCounts(ch);
        });
        // NOUVEAU : Ajout des propri√©t√©s emoji et mise √† jour des descriptions
        subj.emoji = subj.emoji || '';
        (subj.chapters||[]).forEach(ch=>{
            ch.emoji = ch.emoji || '';
            if (!ch.description) updateChapterDescription(ch);
        });
      });
      saveData();
    }

    // ---------- Param√®tres ----------
    function openSettings(chapterId,push=true){
      safeCloseLightbox();
      Media.revokeAll();
      if(!chapterId) chapterId=State.chapterId;
      const chap=getChapter(chapterId); if(!chap) return;

      if(push) Nav.push();
      const v=$('#view'); State.view='settings';
      setTopbar({title:`${chap.title} ‚Ä¢ Param√®tres`});
      setBottomVisibility({actions:false, revision:false});
      hideReviewActionsBar();

      v.innerHTML = `
        <div class="settings-page scroll-y" style="flex:1; min-height:0;">
          <div>
            <div class="settings-hero">Param√®tres</div>
            <div class="settings-sub">Personnalisez l‚Äôaffichage, les langues et vos objectifs</div>
          </div>
          <!-- NOUVEAU : Section pour renommer le chapitre -->
          <div class="settings-section">
            <div class="section-title">Chapitre</div>
            <label class="mt6 muted" style="font-size:13px">Nom du chapitre</label>
            <input id="chTitleInput" class="input" type="text" value="${chap.title}">
            <label class="mt6 muted" style="font-size:13px">Emoji (optionnel)</label>
            <input id="chEmojiInput" class="input" type="text" maxlength="4" value="${chap.emoji||''}" placeholder="ex: üìö">
            <div class="mt6"> <button class="btn" id="saveChapterIdentity">Enregistrer</button> </div>
          </div>
          <div class="settings-section">
            <div class="section-title">Apparence</div>
            <div class="mt6 muted" style="font-size:13px">‚Ä¢ Th√®me: <b id="themeLbl">${data.app.theme==='light'?'Clair':'Sombre'}</b></div>
            <div style="display:flex; gap:8px; flex-wrap:wrap"> <button class="btn" id="toggleTheme">Basculer Clair/Sombre</button> </div>
            <div class="mt6 muted" style="font-size:13px">Couleur d‚Äôaccent</div>
            <div class="swatches" id="accentSwatches">
              <button class="swatch" data-accent="indigo" style="--sw:#6366f1" aria-label="Indigo"></button> <button class="swatch" data-accent="blue" style="--sw:#3b82f6" aria-label="Bleu"></button>
              <button class="swatch" data-accent="teal" style="--sw:#14b8a6" aria-label="Teal"></button> <button class="swatch" data-accent="emerald" style="--sw:#10b981" aria-label="√âmeraude"></button>
              <button class="swatch" data-accent="rose" style="--sw:#f43f5e" aria-label="Rose"></button> <button class="swatch" data-accent="amber" style="--sw:#f59e0b" aria-label="Ambre"></button>
              <button class="swatch" data-accent="violet" style="--sw:#8b5cf6" aria-label="Violet"></button>
            </div>
          </div>
          <div class="settings-section">
            <div class="section-title">Langues</div>
            <div class="mt6 muted" style="font-size:13px">Recto ‚Üí Verso: <b id="langOrderLbl">${chap.settings.langSwap?'EN ‚Üí FR':'FR ‚Üí EN'}</b></div>
            <button class="btn" id="toggleLangSwap">Basculer FR ‚Üî EN</button>
          </div>
          <div class="settings-section">
            <div class="section-title">Typographie</div>
            <div class="card" id="typoPreview" style="margin-bottom:8px; padding:10px; position:relative;">
              <div class="term">Exemple recto (Front)</div>
              <div class="definition" style="margin-top:6px">Exemple verso (Back)</div>
              <div class="muted" style="font-size:12px; margin-top:6px">Glissez ‚Üë‚Üì pour ajuster via les roues ou directement ici.</div>
              <div id="typoToast" class="size-toast"></div>
            </div>
            <div class="wheel" id="wheelFsTerm"><div class="name">Recto (Front)</div><div class="hint">Glissez ‚Üë‚Üì</div><div class="wheel-value"></div></div>
            <div class="wheel mt6" id="wheelFsDef"><div class="name">Verso (Back)</div><div class="hint">Glissez ‚Üë‚Üì</div><div class="wheel-value"></div></div>
          </div>
          <div class="settings-section">
            <div class="section-title">Session & Objectif</div>
            <div class="wheel" id="wheelSession"><div class="name">Taille session</div><div class="hint">Glissez ‚Üë‚Üì</div><div class="wheel-value"></div></div>
            <div class="wheel mt6" id="wheelGoal"><div class="name">Objectif quotidien</div><div class="hint">Glissez ‚Üë‚Üì</div><div class="wheel-value"></div></div>
          </div>
          <div class="settings-section">
            <div class="section-title">Gestion des donn√©es</div>
            <div class="mt6 muted" style="font-size:13px">Sauvegardez ou restaurez manuellement votre progression.</div>
            <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:6px">
              <button class="btn" id="exportProgressBtn">Exporter ma progression</button>
              <button class="btn" id="importProgressBtn">Importer une progression</button>
              <input type="file" id="importProgressInput" class="hidden" accept="application/json">
            </div>
          </div>
          <div class="settings-section">
            <div class="section-title">R√©initialiser</div>
            <div class="mt6 muted" style="font-size:13px">Remettre √† z√©ro la progression (grades, stats, temps).</div>
            <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:6px">
              <button class="btn" id="resetChapterBtn">Reset chapitre</button>
              <button class="btn btn--solid btn--red" id="resetAllBtn">Reset application</button>
            </div>
          </div>
        </div>`;

      // NOUVEAU : Event listeners pour renommer le chapitre
      const chTitleInput = $('#chTitleInput');
      const chEmojiInput = $('#chEmojiInput');
      $('#saveChapterIdentity').onclick = ()=>{
        const newTitle = (chTitleInput.value||'').trim();
        const newEmoji = (chEmojiInput.value||'').trim();

        // *** CORRECTION APPLIQU√âE *** : G√®re le cas d'un chapitre virtuel (fichier)
        if (chap.virtual && chap._groupId) {
          const subj = getCurrentSubject();
          const group = findGroupById(subj, chap._groupId);
          if (group) {
            // On modifie le groupe original
            group.title = newTitle;
            group.emoji = newEmoji;
            
            // On met aussi √† jour le chapitre virtuel pour une actualisation imm√©diate
            chap.title = newTitle; 
            chap.emoji = newEmoji;
            updateChapterDescription(chap); // Met √† jour la description
          }
        } else {
          // Comportement normal pour un chapitre r√©el
          if (newTitle) chap.title = newTitle;
          chap.emoji = newEmoji;
          updateChapterDescription(chap);
        }

        saveData();
        // On rafra√Æchit la vue actuelle pour voir le nom mis √† jour
        goChapter(chap.id, false); 
      };

      const P=data.app.prefs;
      const refreshTheme=()=>{$('#themeLbl').textContent=data.app.theme==='light'?'Clair':'Sombre';};
      const refreshLang=()=>{$('#langOrderLbl').textContent=chap.settings.langSwap?'EN ‚Üí FR':'FR ‚Üí EN';};
      $('#toggleLangSwap').onclick=()=>{chap.settings.langSwap=!chap.settings.langSwap; saveData(); refreshLang(); renderByState(false);};
      $('#toggleTheme').onclick=()=>{data.app.theme=data.app.theme==='light'?'dark':'light'; saveData(); applyTheme(); refreshTheme();};
      const activeAccent=data.app.prefs.accent||'indigo';
      $$('#accentSwatches .swatch').forEach(sw=>{
        const key=sw.getAttribute('data-accent');
        sw.classList.toggle('is-active', key===activeAccent);
        sw.onclick=()=>{data.app.prefs.accent=key; saveData(); applyUI(); $$('#accentSwatches .swatch').forEach(x=>x.classList.toggle('is-active', x.getAttribute('data-accent')===key));};
      });

      bindWheel($('#wheelFsTerm'),{get:()=>P.fsTerm, set:v=>{P.fsTerm=v}, min:12,max:60,step:1,unit:'px'});
      bindWheel($('#wheelFsDef'),{get:()=>P.fsDef, set:v=>{P.fsDef=v}, min:14,max:72,step:1,unit:'px'});
      bindWheel($('#wheelSession'),{get:()=>chap.settings.sessionSize,set:v=>{chap.settings.sessionSize=v}, min:5,max:200,step:5,unit:' cartes'});
      bindWheel($('#wheelGoal'),{get:()=>chap.settings.dailyGoal,set:v=>{chap.settings.dailyGoal=v}, min:5,max:500,step:5,unit:' cartes'});

      $('#exportProgressBtn').onclick = exportProgress;
      $('#importProgressBtn').onclick = () => $('#importProgressInput').click();
      $('#importProgressInput').onchange = (e) => {
        if (e.target.files && e.target.files[0]) { importProgressFile(e.target.files[0]); }
        e.target.value = '';
      };

      $('#resetChapterBtn').onclick=()=>{
        if(!confirm('R√©initialiser la progression de ce chapitre ?')) return;
        resetChapter(chap.id); saveData(); openSettings(chapterId,false);
      };
      $('#resetAllBtn').onclick=resetAll;
      bindTypoPreviewDrag();
    }

    function reconcileChaptersWithCanonical(canonChapters, oldChapters){
      const savedCardByRowId = new Map();
      for (const ch of (oldChapters||[])) {
        for (const c of (ch.cards||[])) {
          const rid = extractRowId(c.id);
          if (rid != null && !savedCardByRowId.has(rid)) savedCardByRowId.set(rid, c);
        }
      }
      const PROG_KEYS = [ 'grade','timesReviewed','lastReviewed','lastMs','avgMs', 'perfEma','ef','intervalDays','dueAt','streak','successes','failures' ];
      return canonChapters.map(cCh => {
        const sCh = (oldChapters||[]).find(x => x.title === cCh.title) || null;
        const merged = {
          id: cCh.id, title: cCh.title, description: cCh.description,
          settings: { ...cCh.settings, ...(sCh?.settings || {}) },
          filters: { grades: { ...cCh.filters.grades, ...(sCh?.filters?.grades || {}) } },
          stats: sCh?.stats ? { ...sCh.stats } : { ...cCh.stats },
          cards: []
        };
        const byRowId = new Map();
        if (sCh) { (sCh.cards||[]).forEach(sc => { const rid = extractRowId(sc.id); if (rid!=null) byRowId.set(rid, sc); }); }
        merged.cards = cCh.cards.map(cc=>{
          const rid = extractRowId(cc.id);
          const sc = byRowId.get(rid) || savedCardByRowId.get(rid);
          if (sc){ const copy = { ...cc }; PROG_KEYS.forEach(k => { if (sc[k] !== undefined) copy[k] = sc[k]; }); return copy; }
          return { ...cc };
        });
        merged.stats.gradeCounts = getLiveGradeCounts(merged); return merged;
      });
    }

    function reconcileAllSubjectsWithCanonical(){
      const canonSubjects = buildCanonicalSubjects();
      const oldSubjects = Array.isArray(data.subjects) ? data.subjects : [];
      const newSubjects = [];
      canonSubjects.forEach(cSub=>{
        const sSub = oldSubjects.find(s => s.id===cSub.id || s.title===cSub.title);
        const merged = {
          id: cSub.id, title: cSub.title,
          chapters: reconcileChaptersWithCanonical(cSub.chapters, sSub?.chapters || []),
          groups: Array.isArray(sSub?.groups) ? sSub.groups.slice() : []
        };
        ensureValidGroups(merged); newSubjects.push(merged);
      });
      oldSubjects.forEach(sSub=>{ if(!newSubjects.find(ns=>ns.id===sSub.id)) newSubjects.push(sSub); });
      data.subjects = newSubjects;
      if (!data.app.currentSubjectId || !data.subjects.find(s=>s.id===data.app.currentSubjectId)) {
        data.app.currentSubjectId = data.subjects[0]?.id || null;
      }
      saveData();
    }

    function initReviewGestures(){
        const view = document.getElementById('view'); if (!view) return;
        const scroller = view.querySelector('.review-scroller, .review-card > div'); if (!scroller) return;
        bindReviewSizeControls(); enableImageLightboxInReview(scroller);
    }

    function bindReviewSizeControls(){
      const faces = document.querySelectorAll('.review-card [data-face]'); if (!faces.length) return;
      const P = data.app.prefs || {};
      const applyVars = ()=>{
        document.documentElement.style.setProperty('--fs-term',(P.fsTerm||20)+'px');
        document.documentElement.style.setProperty('--fs-def',(P.fsDef||24)+'px');
      };
      faces.forEach(el=>{
        const face = el.getAttribute('data-face'); let startY=null, startVal=null;
        const getVal = () => face==='front' ? (P.fsTerm||20) : (P.fsDef||24);
        const setVal = v => { if (face==='front') P.fsTerm = clamp(v,12,60); else P.fsDef = clamp(v,14,72); applyVars(); };
        const commit = ()=>saveData();
        el.addEventListener('pointerdown', e=>{
          if (e.target.closest('img, video, svg, canvas, mjx-container, a, pre, code')) return;
          const scroller = el.closest('.review-card')?.querySelector('.review-scroller, .review-card > div');
          if (scroller && scroller.scrollHeight > scroller.clientHeight) return;
          startY=e.clientY; startVal=getVal(); el.setPointerCapture?.(e.pointerId);
          e.preventDefault(); e.stopPropagation();
        });
        el.addEventListener('pointermove', e=>{
          if (startY==null) return;
          const dy = startY - e.clientY; const delta = Math.round(dy/6);
          setVal(startVal + delta); e.preventDefault(); e.stopPropagation();
        });
        const end = e=>{ if (startY!=null) commit(); startY=null; startVal=null; };
        el.addEventListener('pointerup', end); el.addEventListener('pointercancel', end);
        el.addEventListener('wheel', e=>{
          e.preventDefault(); const dir = e.deltaY>0 ? -1 : 1;
          setVal(getVal()+dir); commit();
        },{passive:false});
      });
    }

    function bindTypoPreviewDrag(){
      const box=$('#typoPreview'); if(!box) return;
      const termEl=box.querySelector('.term'); const defEl=box.querySelector('.definition'); const toast=$('#typoToast'); const P=data.app.prefs||{};
      let startY=null,startTerm=null,startDef=null,target='both';
      const showToast=msg=>{if(!toast) return; toast.textContent=msg; toast.style.display='block';};
      const hideToast=()=>{if(toast) toast.style.display='none';};
      const updateVars=()=>{
        document.documentElement.style.setProperty('--fs-term',(P.fsTerm||20)+'px');
        document.documentElement.style.setProperty('--fs-def',(P.fsDef||24)+'px');
      };
      const start=e=>{
        const t=e.target.closest('.term, .definition, #typoPreview'); if(!t) return;
        startY=(e.touches?e.touches[0].clientY:e.clientY); startTerm=P.fsTerm||20; startDef=P.fsDef||24;
        target = t.classList.contains('term')?'term' : t.classList.contains('definition')?'def':'both';
        e.preventDefault();
      };
      const move=e=>{
        if(startY==null) return;
        const y=(e.touches?e.touches[0].clientY:e.clientY);
        const dy=startY-y; const delta=Math.round(dy/6);
        if(target==='term'||target==='both') P.fsTerm=clamp(startTerm+delta,12,60);
        if(target==='def'||target==='both') P.fsDef=clamp(startDef+delta,14,72);
        updateVars(); showToast(`Recto ${P.fsTerm}px ‚Ä¢ Verso ${P.fsDef}px`);
      };
      const end=()=>{
        if(startY!=null) saveData();
        startY=null; startTerm=null; startDef=null; target='both'; setTimeout(hideToast,200);
      };
      box.addEventListener('pointerdown',start); box.addEventListener('pointermove',move);
      box.addEventListener('pointerup',end); box.addEventListener('pointercancel',end);
      box.addEventListener('touchstart',start,{passive:false});
      box.addEventListener('touchmove',move,{passive:false});
      box.addEventListener('touchend',end,{passive:false});
      const wheelOn=(el,which)=>{
        el.addEventListener('wheel',(e)=>{
          e.preventDefault(); const dir=e.deltaY>0?-1:1;
          if(which==='term'||which==='both') P.fsTerm=clamp((P.fsTerm||20)+dir,12,60);
          if(which==='def'||which==='both') P.fsDef=clamp((P.fsDef||24)+dir,14,72);
          updateVars(); saveData(); showToast(`Recto ${P.fsTerm}px ‚Ä¢ Verso ${P.fsDef}px`); setTimeout(hideToast,250);
        },{passive:false});
      };
      wheelOn(termEl,'term'); wheelOn(defEl,'def'); wheelOn(box,'both');
    }

    function bindWheel(node,{get,set,min,max,step=1,unit='px',onApply}){
      const valueEl=node.querySelector('.wheel-value');
      const render=()=>{valueEl.textContent=get()+unit;};
      const commit=()=>{saveData(); applyUI(); if(onApply) onApply();};
      const setVal=v=>{set(clamp(v,min,max)); render(); applyUI();};
      const pd=e=>{e.preventDefault(); e.stopPropagation();};
      let startY=null,startV=null;
      node.addEventListener('pointerdown',e=>{startY=e.clientY; startV=get(); node.setPointerCapture?.(e.pointerId); pd(e);});
      node.addEventListener('pointermove',e=>{if(startY==null) return; const dy=startY-e.clientY; const delta=Math.round(dy/6)*step; setVal(startV+delta); pd(e);});
      const end=e=>{if(startY!=null) commit(); startY=null; startV=null;};
      node.addEventListener('pointerup',end); node.addEventListener('pointercancel',end);
      node.addEventListener('wheel',e=>{e.preventDefault(); const dir=e.deltaY>0?-step:step; setVal(get()+dir); commit();},{passive:false});
      render();
    }

    function gradeQuality5(g){switch(g){case'facile':return 5; case'bien':return 4; case'difficile':return 2; case'echec':return 1; default:return 0;}}
    function gradeNorm01(g){switch(g){case'facile':return 1.0; case'bien':return 0.75; case'difficile':return 0.35; case'echec':return 0.0; default:return 0.5;}}

    function scheduleNext(card,grade,now=Date.now()){
      const q=gradeQuality5(grade);
      let EF=card.ef||2.5; EF = EF + (0.1 - (5-q)*(0.08+(5-q)*0.02)); if(EF<1.3) EF=1.3; card.ef=EF;
      if(q<3){
        card.intervalDays = (grade==='echec')?0.02:0.5;
        card.dueAt=now+card.intervalDays*864e5;
        card.streak=(card.streak<=0?card.streak-1:-1);
      }else{
        let next; if(card.intervalDays<1e-6) next=1; else if(card.intervalDays<1.5) next=6; else next=Math.round(card.intervalDays*EF);
        card.intervalDays=next; card.dueAt=now+next*864e5;
        card.streak=(card.streak>=0?card.streak+1:1);
      }
      card.streak=Math.max(-8,Math.min(12,card.streak));
    }

    // ---------- Reset helpers ----------
    function resetChapter(chapId){
      const chap=getChapter(chapId); if(!chap) return;
      chap.cards.forEach(c=>{
        c.grade='unseen'; c.timesReviewed=0; c.lastReviewed=0; c.lastMs=0; c.avgMs=0; c.perfEma=0.5;
        c.ef=2.5; c.intervalDays=0; c.dueAt=0; c.streak=0; c.successes=0; c.failures=0;
      });
      chap.stats.gradeCounts={unseen:chap.cards.length,echec:0,difficile:0,bien:0,facile:0};
      chap.stats.totalReviews=0; chap.stats.dailyReviews = {}; chap.stats.dailyChanges = {};
      chap.stats.dailyDurMs = {}; chap.stats.dailyDurCount = {}; chap.stats.dailyLog = {};
      saveData(); alert('Chapitre r√©initialis√©.');
    }

    function enableImageLightboxInReview(scroller){
      const imgs = Array.from(scroller.querySelectorAll('img'));
      imgs.forEach(img=>{
        img._moved = false;
        img.addEventListener('pointerdown', e=>{ img._moved = false; img._sx = e.clientX; img._sy = e.clientY; });
        img.addEventListener('pointermove', e=>{ if (img._sx!=null && (Math.abs(e.clientX - img._sx)>6 || Math.abs(e.clientY - img._sy)>6)){ img._moved = true; } });
        img.addEventListener('click', e=>{ if (img._moved) return; e.preventDefault(); openLightboxFor(img, scroller); });
      });
    }

    async function resetAll(){
      if(!confirm('R√©initialiser toute l‚Äôapplication ?')) return;
      await Media.clearAll();
      const theme=data.app?.theme||'dark';
      const prefs=deepClone(data.app?.prefs||{});
      const subjects = buildCanonicalSubjects();
      data = { subjects, app: { theme, prefs, currentSubjectId: subjects[0]?.id || null } };
      upgradeData(); applyTheme(); applyUI(); saveData();
      goDeck(false); alert('Application r√©initialis√©e.');
    }

    // *** PATCH APPLIQU√â *** : Logique d'initialisation am√©lior√©e
    function init(){
      nukeCookieBackup();

      Media.open().catch(console.warn);
      if(navigator.storage && navigator.storage.persist){ navigator.storage.persist().then(granted=>console.log('persist granted?',granted)); }
      window.addEventListener('visibilitychange',()=>{if(document.visibilityState==='hidden') saveData();});
      window.addEventListener('pagehide',saveData);
      window.addEventListener('beforeunload',saveData);
      setInterval(saveData,15000);
      window.addEventListener('storage',(e)=>{ if(e.key===STORAGE_KEY && e.newValue){ try{data=JSON.parse(e.newValue); renderByState(false);}catch(err){} } });
    
      // 1. Charger les donn√©es existantes de l'utilisateur
      data = loadData();
      const savedVersion = data?.app?.version;
      console.log(`Version sauvegard√©e: ${savedVersion || 'aucune'}, Version du code: ${APP_VERSION}`);

      // 2. Syst√©matiquement r√©concilier le contenu du code avec les donn√©es sauvegard√©es
      //    Ceci garantit que les nouvelles cartes/chapitres sont toujours ajout√©s.
      console.log("R√©conciliation des donn√©es...");
      reconcileAllSubjectsWithCanonical();
      
      // 3. Mettre √† jour la version dans l'objet de donn√©es et sauvegarder
      //    C'est la SEULE fois o√π nous modifions la version.
      if (!data.app) data.app = {};
      data.app.version = APP_VERSION;
      saveData();
      console.log("Donn√©es √† jour et sauvegard√©es.");

      // 4. Continuer le d√©marrage normal de l'application
      pruneStats();
      upgradeData();
      applyTheme();
      applyUI();
      Nav.clear();
      goDeck(false);
      
      // Logique de secours pour IndexedDB
      StateStore.get('state').then(raw=>{
        if (!localStorage.getItem(STORAGE_KEY) && raw) {
          try{
            console.log("Restauration depuis la sauvegarde IndexedDB.");
            data = JSON.parse(raw);
            // On re-r√©concilie au cas o√π la sauvegarde IDB soit ancienne
            reconcileAllSubjectsWithCanonical();
            data.app.version = APP_VERSION;
            saveData();
            renderByState(false);
          } catch(e){ console.warn('√âchec de la restauration depuis IDB', e); }
        }
      });
    }
    
    init();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sql.js@1.10.2/dist/sql-wasm.js"></script>
  <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</body>
</html>
